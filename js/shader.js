// koffee 1.7.0

/*
 0000000  000   000   0000000   0000000    00000000  00000000   
000       000   000  000   000  000   000  000       000   000  
0000000   000000000  000000000  000   000  0000000   0000000    
     000  000   000  000   000  000   000  000       000   000  
0000000   000   000  000   000  0000000    00000000  000   000
 */
var Effect, Engine, Mesh, MeshBuilder, RawTexture, RenderTargetTexture, Shader, ShaderMaterial, Texture, Vector2, Vector3, Vector4, klog, performance, ref, ref1, slash,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('babylonjs'), Effect = ref.Effect, Engine = ref.Engine, Mesh = ref.Mesh, MeshBuilder = ref.MeshBuilder, RawTexture = ref.RawTexture, RenderTargetTexture = ref.RenderTargetTexture, ShaderMaterial = ref.ShaderMaterial, Texture = ref.Texture, Vector2 = ref.Vector2, Vector3 = ref.Vector3, Vector4 = ref.Vector4;

performance = require('perf_hooks').performance;

ref1 = require('kxk'), klog = ref1.klog, slash = ref1.slash;

Shader = (function() {
    function Shader(world) {
        var arr, bufferSource, fragSource;
        this.world = world;
        this.materialData = bind(this.materialData, this);
        this.scene = this.world.scene;
        this.bufferSize = {
            width: 512,
            height: 16
        };
        this.frameRates = [];
        this.buffer = false;
        this.textures = {
            keys: RawTexture.CreateRTexture(this.world.keys, 256, 3, this.scene, false),
            font: new Texture(__dirname + "/../img/font.png", this.scene)
        };
        if (this.buffer) {
            arr = new Float32Array(4 * this.bufferSize.width * this.bufferSize.height);
            this.textures.buffer = new RawTexture(arr, this.bufferSize.width, this.bufferSize.height, Engine.TEXTUREFORMAT_RGBA, this.scene, false, false, Texture.BILINEAR_SAMPLINGMODE, Engine.TEXTURETYPE_FLOAT);
        }
        this.iFrame = 0;
        this.vertexShader = "precision highp float; attribute vec3 position; attribute vec2 uv; uniform mat4 worldViewProjection;\nvoid main(void) { gl_Position = worldViewProjection * vec4(position, 1.0); }";
        fragSource = slash.readText(__dirname + "/../shader/tree.frag");
        if (this.buffer) {
            bufferSource = slash.readText(__dirname + "/../shader/eye_buffer.frag");
        }
        this.commonSource = slash.readText(__dirname + "/../shader/tree_common.frag");
        Effect.ShadersStore.mainVertexShader = this.vertexShader;
        Effect.ShadersStore.mainFragmentShader = this.shaderCode(fragSource);
        if (this.buffer) {
            Effect.ShadersStore.bufferVertexShader = this.vertexShader;
            Effect.ShadersStore.bufferFragmentShader = this.shaderCode(bufferSource);
        }
        this.shaderStart = performance.now();
        this.shaderMaterial = this.shaderMaterial('main');
        this.shaderMaterial.onCompiled = (function(_this) {
            return function() {
                _this.compileTime = parseInt(performance.now() - _this.shaderStart);
                return klog("shader compileTime " + (_this.compileTime / 1000) + "s");
            };
        })(this);
        if (this.buffer) {
            this.bufferMaterial = this.shaderMaterial('buffer');
            this.bufferMaterial.onCompiled = (function(_this) {
                return function() {
                    var compileTime;
                    compileTime = parseInt(performance.now() - _this.shaderStart);
                    return klog("buffer compileTime " + (compileTime / 1000) + "s");
                };
            })(this);
            this.plane2 = MeshBuilder.CreatePlane("plane2", {
                width: 10,
                height: 10
            }, this.scene);
            this.plane2.material = this.bufferMaterial;
            this.plane2.billboardMode = Mesh.BILLBOARDMODE_ALL;
        }
        this.plane = MeshBuilder.CreatePlane("plane", {
            width: 10,
            height: 10
        }, this.scene);
        this.plane.material = this.shaderMaterial;
        this.plane.billboardMode = Mesh.BILLBOARDMODE_ALL;
        if (this.buffer) {
            this.renderTarget = new RenderTargetTexture("buf", this.bufferSize, this.scene, false, false, Texture.BILINEAR_SAMPLINGMODE, Engine.TEXTURETYPE_FLOAT);
            this.renderTarget.renderList.push(this.plane2);
            this.scene.customRenderTargets.push(this.renderTarget);
            this.renderTarget.onBeforeRender = (function(_this) {
                return function() {
                    _this.plane2.position.copyFrom(_this.world.camera.position.add(_this.world.camera.getDir().scale(2)));
                    return _this.materialData(_this.bufferMaterial);
                };
            })(this);
        }
        this.scene.onBeforeRenderObservable.add((function(_this) {
            return function() {
                var j, len, r, ref10, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9;
                _this.textures.keys.update(_this.world.keys);
                _this.iResolution = new Vector3(_this.world.canvas.width, _this.world.canvas.height, 1);
                _this.iDelta = new Vector2(_this.world.camera.mouse.delta.x, _this.world.camera.mouse.delta.y);
                if (_this.world.camera.mouse.buttons) {
                    _this.iMouse = new Vector4(_this.world.camera.mouse.pos.x * ((ref2 = window.devicePixelRatio) != null ? ref2 : 0), _this.iResolution.y - (_this.world.camera.mouse.pos.y * ((ref3 = window.devicePixelRatio) != null ? ref3 : _this.iResolution.y)), (_this.world.camera.mouse.buttons && 1 || -1) * _this.world.camera.mouse.down.x * ((ref4 = window.devicePixelRatio) != null ? ref4 : 0), (_this.world.camera.mouse.buttons && 1 || -1) * (_this.iResolution.y - (_this.world.camera.mouse.down.y * ((ref5 = window.devicePixelRatio) != null ? ref5 : _this.iResolution.y))));
                } else {
                    _this.iMouse = new Vector4(_this.world.camera.mouse.up.x * ((ref6 = window.devicePixelRatio) != null ? ref6 : 0), _this.iResolution.y - (_this.world.camera.mouse.up.y * ((ref7 = window.devicePixelRatio) != null ? ref7 : _this.iResolution.y)), (_this.world.camera.mouse.buttons && 1 || -1) * _this.world.camera.mouse.down.x * ((ref8 = window.devicePixelRatio) != null ? ref8 : 0), (_this.world.camera.mouse.buttons && 1 || -1) * (_this.iResolution.y - (_this.world.camera.mouse.down.y * ((ref9 = window.devicePixelRatio) != null ? ref9 : _this.iResolution.y))));
                }
                _this.iCenter = new Vector3(_this.world.camera.center.x, _this.world.camera.center.y, _this.world.camera.center.z);
                _this.iCamera = new Vector3(_this.world.camera.position.x, _this.world.camera.position.y, _this.world.camera.position.z);
                _this.iTime = performance.now() / 1000;
                _this.iTimeDelta = _this.world.engine.getDeltaTime() / 1000;
                _this.frameRates.push(_this.world.engine.getFps());
                if (_this.frameRates.length > 30) {
                    _this.frameRates.shift();
                }
                _this.fps = 0;
                ref10 = _this.frameRates;
                for (j = 0, len = ref10.length; j < len; j++) {
                    r = ref10[j];
                    _this.fps += r;
                }
                return _this.fps /= _this.frameRates.length;
            };
        })(this));
        this.scene.onAfterRenderTargetsRenderObservable.add((function(_this) {
            return function() {
                if (_this.buffer) {
                    return _this.textures.buffer.update(_this.renderTarget.readPixels());
                }
            };
        })(this));
        this.scene.onAfterRenderObservable.add((function(_this) {
            return function() {
                var i, j, results;
                _this.iFrame++;
                results = [];
                for (i = j = 256; j < 512; i = ++j) {
                    results.push(_this.world.keys[i] = 0);
                }
                return results;
            };
        })(this));
    }

    Shader.prototype.render = function() {
        this.plane.position.copyFrom(this.world.camera.position.add(this.world.camera.getDir().scale(1.5)));
        return this.materialData(this.shaderMaterial);
    };

    Shader.prototype.materialData = function(m) {
        m.setTexture('iChannel0', this.textures.keys);
        if (this.buffer) {
            m.setTexture('iChannel1', this.textures.buffer);
        }
        m.setTexture('iChannel2', this.textures.font);
        m.setInt('iFrame', this.iFrame);
        m.setFloat('iCompile', this.compileTime / 1000);
        m.setFloat('iTime', this.iTime);
        m.setFloat('iTimeDelta', this.iTimeDelta);
        m.setVector2('iDelta', this.iDelta);
        m.setVector4('iMouse', this.iMouse);
        m.setVector3('iResolution', this.iResolution);
        m.setVector3('iCenter', this.iCenter);
        m.setVector3('iCamera', this.iCamera);
        m.setFloat('iDist', this.world.camera.dist);
        m.setFloat('iMinDist', this.world.camera.minDist);
        m.setFloat('iMaxDist', this.world.camera.maxDist);
        m.setFloat('iRotate', this.world.camera.rotate);
        m.setFloat('iDegree', this.world.camera.degree);
        m.setFloat('iFrameRate', Math.round(this.fps));
        return m.setFloat('iMs', this.world.engine.getDeltaTime());
    };

    Shader.prototype.shaderMaterial = function(key) {
        return new ShaderMaterial(key + "Shader", this.scene, {
            vertex: key,
            fragment: key
        }, {
            attributes: ['position', 'normal', 'uv'],
            uniforms: ['worldViewProjection', 'iCamera', 'iCenter', 'iDist', 'iMaxDist', 'iMinDist', 'iFrameRate', 'iMs', 'iFrame', 'iDelta', 'iTime', 'iTimeDelta', 'iMouse', 'iResolution', 'iRotate', 'iDegree', 'iCompile']
        });
    };

    Shader.prototype.shaderCode = function(fragSource) {
        return "precision highp float;\nuniform float     iTime;\nuniform float     iTimeDelta;\nuniform float     iFrameRate;\nuniform float     iMs;\nuniform float     iCompile;\nuniform float     iDist;\nuniform float     iMinDist;\nuniform float     iMaxDist;\nuniform float     iRotate;\nuniform float     iDegree;\nuniform vec2      iDelta;\nuniform vec4      iMouse;\nuniform vec3      iResolution;\nuniform vec3      iCenter;\nuniform vec3      iCamera;\nuniform int       iFrame;\nuniform sampler2D iChannel0;\nuniform sampler2D iChannel1;\nuniform sampler2D iChannel2;\n\n" + this.commonSource + "\n" + fragSource + "\n                        \nvoid main(void) \n{\n    mainImage(gl_FragColor, gl_FragCoord.xy);\n}";
    };

    return Shader;

})();

module.exports = Shader;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZGVyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQSxtS0FBQTtJQUFBOztBQVFBLE1BQTZILE9BQUEsQ0FBUSxXQUFSLENBQTdILEVBQUUsbUJBQUYsRUFBVSxtQkFBVixFQUFrQixlQUFsQixFQUF3Qiw2QkFBeEIsRUFBcUMsMkJBQXJDLEVBQWlELDZDQUFqRCxFQUFzRSxtQ0FBdEUsRUFBc0YscUJBQXRGLEVBQStGLHFCQUEvRixFQUF3RyxxQkFBeEcsRUFBaUg7O0FBQy9HLGNBQWdCLE9BQUEsQ0FBUSxZQUFSOztBQUNsQixPQUFrQixPQUFBLENBQVEsS0FBUixDQUFsQixFQUFFLGdCQUFGLEVBQVE7O0FBRUY7SUFFQyxnQkFBQyxLQUFEO0FBRUMsWUFBQTtRQUZBLElBQUMsQ0FBQSxRQUFEOztRQUVBLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBQyxDQUFBLEtBQUssQ0FBQztRQUNoQixJQUFDLENBQUEsVUFBRCxHQUFjO1lBQUEsS0FBQSxFQUFNLEdBQU47WUFBVyxNQUFBLEVBQU8sRUFBbEI7O1FBQ2QsSUFBQyxDQUFBLFVBQUQsR0FBYztRQUVkLElBQUMsQ0FBQSxNQUFELEdBQVU7UUFFVixJQUFDLENBQUEsUUFBRCxHQUNJO1lBQUEsSUFBQSxFQUFRLFVBQVUsQ0FBQyxjQUFYLENBQTBCLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBakMsRUFBdUMsR0FBdkMsRUFBNEMsQ0FBNUMsRUFBK0MsSUFBQyxDQUFBLEtBQWhELEVBQXVELEtBQXZELENBQVI7WUFDQSxJQUFBLEVBQVEsSUFBSSxPQUFKLENBQWUsU0FBRCxHQUFXLGtCQUF6QixFQUE0QyxJQUFDLENBQUEsS0FBN0MsQ0FEUjs7UUFHSixJQUFHLElBQUMsQ0FBQSxNQUFKO1lBQ0ksR0FBQSxHQUFNLElBQUksWUFBSixDQUFpQixDQUFBLEdBQUUsSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUFkLEdBQW9C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M0I7ZUFDQSxDQUFDLENBQUMsUUFBRixDQUFhLEtBQWIsRUFBMkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsWUFBZCxDQUFBLENBQTNCO0lBcEJVOztxQkE0QmQsY0FBQSxHQUFnQixTQUFDLEdBQUQ7ZUFFWixJQUFJLGNBQUosQ0FBc0IsR0FBRCxHQUFLLFFBQTFCLEVBQW1DLElBQUMsQ0FBQSxLQUFwQyxFQUNRO1lBQUEsTUFBQSxFQUFVLEdBQVY7WUFDQSxRQUFBLEVBQVUsR0FEVjtTQURSLEVBSVE7WUFBQSxVQUFBLEVBQVksQ0FBQyxVQUFELEVBQVksUUFBWixFQUFxQixJQUFyQixDQUFaO1lBQ0EsUUFBQSxFQUFZLENBQ1IscUJBRFEsRUFFUixTQUZRLEVBRUUsU0FGRixFQUVZLE9BRlosRUFFb0IsVUFGcEIsRUFFK0IsVUFGL0IsRUFHUixZQUhRLEVBR0ssS0FITCxFQUdXLFFBSFgsRUFJUixRQUpRLEVBSUMsT0FKRCxFQUlTLFlBSlQsRUFLUixRQUxRLEVBS0MsYUFMRCxFQU1SLFNBTlEsRUFNRSxTQU5GLEVBT1IsVUFQUSxDQURaO1NBSlI7SUFGWTs7cUJBaUJoQixVQUFBLEdBQVksU0FBQyxVQUFEO2VBQ1Isd2pCQUFBLEdBc0JNLElBQUMsQ0FBQSxZQXRCUCxHQXNCb0IsSUF0QnBCLEdBdUJNLFVBdkJOLEdBdUJpQjtJQXhCVDs7Ozs7O0FBZ0NoQixNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuIDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAwICAwMDAwMDAwMCAgIFxuMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgIFxuICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwICAwMDAgICAwMDAgIFxuIyMjXG5cbnsgRWZmZWN0LCBFbmdpbmUsIE1lc2gsIE1lc2hCdWlsZGVyLCBSYXdUZXh0dXJlLCBSZW5kZXJUYXJnZXRUZXh0dXJlLCBTaGFkZXJNYXRlcmlhbCwgVGV4dHVyZSwgVmVjdG9yMiwgVmVjdG9yMywgVmVjdG9yNCB9ID0gcmVxdWlyZSAnYmFieWxvbmpzJ1xueyBwZXJmb3JtYW5jZSB9ID0gcmVxdWlyZSAncGVyZl9ob29rcydcbnsga2xvZywgc2xhc2ggfSA9IHJlcXVpcmUgJ2t4aydcbiAgICAgICAgXG5jbGFzcyBTaGFkZXJcbiAgICBcbiAgICBAOiAoQHdvcmxkKSAtPlxuXG4gICAgICAgIEBzY2VuZSA9IEB3b3JsZC5zY2VuZVxuICAgICAgICBAYnVmZmVyU2l6ZSA9IHdpZHRoOjUxMiwgaGVpZ2h0OjE2XG4gICAgICAgIEBmcmFtZVJhdGVzID0gW11cblxuICAgICAgICBAYnVmZmVyID0gZmFsc2VcbiAgICAgICAgICAgIFxuICAgICAgICBAdGV4dHVyZXMgPSBcbiAgICAgICAgICAgIGtleXM6ICAgUmF3VGV4dHVyZS5DcmVhdGVSVGV4dHVyZSBAd29ybGQua2V5cywgMjU2LCAzLCBAc2NlbmUsIGZhbHNlXG4gICAgICAgICAgICBmb250OiAgIG5ldyBUZXh0dXJlKFwiI3tfX2Rpcm5hbWV9Ly4uL2ltZy9mb250LnBuZ1wiLCBAc2NlbmUpXG4gICAgICAgIFxuICAgICAgICBpZiBAYnVmZmVyXG4gICAgICAgICAgICBhcnIgPSBuZXcgRmxvYXQzMkFycmF5IDQqQGJ1ZmZlclNpemUud2lkdGgqQGJ1ZmZlclNpemUuaGVpZ2h0XG4gICAgICAgICAgICBAdGV4dHVyZXMuYnVmZmVyID0gbmV3IFJhd1RleHR1cmUgYXJyLCBAYnVmZmVyU2l6ZS53aWR0aCwgQGJ1ZmZlclNpemUuaGVpZ2h0LCBFbmdpbmUuVEVYVFVSRUZPUk1BVF9SR0JBLCBAc2NlbmUsIGZhbHNlLCBmYWxzZSwgVGV4dHVyZS5CSUxJTkVBUl9TQU1QTElOR01PREUsIEVuZ2luZS5URVhUVVJFVFlQRV9GTE9BVFxuICAgICAgICAgICAgXG4gICAgICAgIEBpRnJhbWUgPSAwXG4gICAgICAgIEB2ZXJ0ZXhTaGFkZXIgPSAgXCJcIlwiXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7IGF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uOyBhdHRyaWJ1dGUgdmVjMiB1djsgdW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb247XG4gICAgICAgICAgICB2b2lkIG1haW4odm9pZCkgeyBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHBvc2l0aW9uLCAxLjApOyB9XG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgXHJcbiAgICAgICAgZnJhZ1NvdXJjZSAgICA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci90cmVlLmZyYWdcIlxuICAgICAgICBpZiBAYnVmZmVyIHRoZW4gYnVmZmVyU291cmNlID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vc2hhZGVyL2V5ZV9idWZmZXIuZnJhZ1wiXG4gICAgICAgIEBjb21tb25Tb3VyY2UgPSBzbGFzaC5yZWFkVGV4dCBcIiN7X19kaXJuYW1lfS8uLi9zaGFkZXIvdHJlZV9jb21tb24uZnJhZ1wiXG4gICAgICAgIFxuICAgICAgICBFZmZlY3QuU2hhZGVyc1N0b3JlLm1haW5WZXJ0ZXhTaGFkZXIgICA9IEB2ZXJ0ZXhTaGFkZXJcbiAgICAgICAgRWZmZWN0LlNoYWRlcnNTdG9yZS5tYWluRnJhZ21lbnRTaGFkZXIgPSBAc2hhZGVyQ29kZSBmcmFnU291cmNlIFxuICAgICAgICBcbiAgICAgICAgaWYgQGJ1ZmZlciBcbiAgICAgICAgICAgIEVmZmVjdC5TaGFkZXJzU3RvcmUuYnVmZmVyVmVydGV4U2hhZGVyID0gQHZlcnRleFNoYWRlclxuICAgICAgICAgICAgRWZmZWN0LlNoYWRlcnNTdG9yZS5idWZmZXJGcmFnbWVudFNoYWRlciA9IEBzaGFkZXJDb2RlIGJ1ZmZlclNvdXJjZSBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIEBzaGFkZXJTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIFxuICAgICAgICAjIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAgICBcbiAgICAgICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgXG4gICAgICAgICMgMDAwMDAwMDAwICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwICAwMDAwMDAwMDAgIDAwMCAgICAgIFxuICAgICAgICAjIDAwMCAwIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICBcbiAgICAgICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgXG4gICAgICAgIFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwgPSBAc2hhZGVyTWF0ZXJpYWwgJ21haW4nXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5vbkNvbXBpbGVkID0gPT4gXG4gICAgICAgICAgICBAY29tcGlsZVRpbWUgPSBwYXJzZUludCBwZXJmb3JtYW5jZS5ub3coKS1Ac2hhZGVyU3RhcnRcbiAgICAgICAgICAgIGtsb2cgXCJzaGFkZXIgY29tcGlsZVRpbWUgI3tAY29tcGlsZVRpbWUvMTAwMH1zXCIgXG5cbiAgICAgICAgaWYgQGJ1ZmZlclxuICAgICAgICAgICAgQGJ1ZmZlck1hdGVyaWFsID0gQHNoYWRlck1hdGVyaWFsICdidWZmZXInXG4gICAgICAgICAgICBAYnVmZmVyTWF0ZXJpYWwub25Db21waWxlZCA9ID0+IFxuICAgICAgICAgICAgICAgIGNvbXBpbGVUaW1lID0gcGFyc2VJbnQgcGVyZm9ybWFuY2Uubm93KCktQHNoYWRlclN0YXJ0XG4gICAgICAgICAgICAgICAga2xvZyBcImJ1ZmZlciBjb21waWxlVGltZSAje2NvbXBpbGVUaW1lLzEwMDB9c1wiIFxuXG4gICAgICAgICAgICBAcGxhbmUyID0gTWVzaEJ1aWxkZXIuQ3JlYXRlUGxhbmUgXCJwbGFuZTJcIiwgeyB3aWR0aDogMTAsIGhlaWdodDogMTAgfSwgQHNjZW5lXG4gICAgICAgICAgICBAcGxhbmUyLm1hdGVyaWFsID0gQGJ1ZmZlck1hdGVyaWFsXG4gICAgICAgICAgICBAcGxhbmUyLmJpbGxib2FyZE1vZGUgPSBNZXNoLkJJTExCT0FSRE1PREVfQUxMXG5cbiAgICAgICAgQHBsYW5lID0gTWVzaEJ1aWxkZXIuQ3JlYXRlUGxhbmUgXCJwbGFuZVwiIHsgd2lkdGg6IDEwLCBoZWlnaHQ6IDEwIH0gQHNjZW5lXG4gICAgICAgIEBwbGFuZS5tYXRlcmlhbCA9IEBzaGFkZXJNYXRlcmlhbFxuICAgICAgICBAcGxhbmUuYmlsbGJvYXJkTW9kZSA9IE1lc2guQklMTEJPQVJETU9ERV9BTExcbiAgICAgICAgXG4gICAgICAgICMgMDAwMDAwMDAgICAgICAgICAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAwMCAgXG4gICAgICAgICMgMDAwICAgMDAwICAgICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgICAgIDAwMCAgICAgXG4gICAgICAgICMgMDAwMDAwMCAgICAwMDAwMDAgICAgIDAwMCAgICAgMDAwMDAwMDAwICAwMDAwMDAwICAgIDAwMCAgMDAwMCAgMDAwMDAwMCAgICAgIDAwMCAgICAgXG4gICAgICAgICMgMDAwICAgMDAwICAgICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgXG4gICAgICAgICMgMDAwICAgMDAwICAgICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAgIDAwMCAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiBAYnVmZmVyXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEByZW5kZXJUYXJnZXQgPSBuZXcgUmVuZGVyVGFyZ2V0VGV4dHVyZSBcImJ1ZlwiLCBAYnVmZmVyU2l6ZSwgQHNjZW5lLCBmYWxzZSwgZmFsc2UsIFRleHR1cmUuQklMSU5FQVJfU0FNUExJTkdNT0RFLCBFbmdpbmUuVEVYVFVSRVRZUEVfRkxPQVRcbiAgICAgICAgICAgIEByZW5kZXJUYXJnZXQucmVuZGVyTGlzdC5wdXNoIEBwbGFuZTJcbiAgICAgICAgICAgIEBzY2VuZS5jdXN0b21SZW5kZXJUYXJnZXRzLnB1c2ggQHJlbmRlclRhcmdldFxuICAgIFxyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIEByZW5kZXJUYXJnZXQub25CZWZvcmVSZW5kZXIgPSAoKSA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBAcGxhbmUyLnBvc2l0aW9uLmNvcHlGcm9tIEB3b3JsZC5jYW1lcmEucG9zaXRpb24uYWRkIEB3b3JsZC5jYW1lcmEuZ2V0RGlyKCkuc2NhbGUgMlxuICAgICAgICAgICAgICAgIEBtYXRlcmlhbERhdGEgQGJ1ZmZlck1hdGVyaWFsXG4gICAgICAgIFxuICAgICAgICBAc2NlbmUub25CZWZvcmVSZW5kZXJPYnNlcnZhYmxlLmFkZCA9PiBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQHRleHR1cmVzLmtleXMudXBkYXRlIEB3b3JsZC5rZXlzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEBpUmVzb2x1dGlvbiA9IG5ldyBWZWN0b3IzIEB3b3JsZC5jYW52YXMud2lkdGgsIEB3b3JsZC5jYW52YXMuaGVpZ2h0LCAxXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEBpRGVsdGEgPSBuZXcgVmVjdG9yMihAd29ybGQuY2FtZXJhLm1vdXNlLmRlbHRhLngsIEB3b3JsZC5jYW1lcmEubW91c2UuZGVsdGEueSkgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChAd29ybGQuY2FtZXJhLm1vdXNlLmJ1dHRvbnMpXG4gICAgICAgICAgICAgICAgQGlNb3VzZSA9IG5ldyBWZWN0b3I0KFxuICAgICAgICAgICAgICAgICAgICBAd29ybGQuY2FtZXJhLm1vdXNlLnBvcy54ICogKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID8gMClcbiAgICAgICAgICAgICAgICAgICAgQGlSZXNvbHV0aW9uLnkgLSAoQHdvcmxkLmNhbWVyYS5tb3VzZS5wb3MueSAqICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA/IEBpUmVzb2x1dGlvbi55KSlcbiAgICAgICAgICAgICAgICAgICAgKEB3b3JsZC5jYW1lcmEubW91c2UuYnV0dG9ucyBhbmQgMSBvciAtMSkgKiBAd29ybGQuY2FtZXJhLm1vdXNlLmRvd24ueCAqICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA/IDApXG4gICAgICAgICAgICAgICAgICAgIChAd29ybGQuY2FtZXJhLm1vdXNlLmJ1dHRvbnMgYW5kIDEgb3IgLTEpICogKEBpUmVzb2x1dGlvbi55IC0gKEB3b3JsZC5jYW1lcmEubW91c2UuZG93bi55ICogKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID8gQGlSZXNvbHV0aW9uLnkpKSkpXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgQGlNb3VzZSA9IG5ldyBWZWN0b3I0KFxuICAgICAgICAgICAgICAgICAgICBAd29ybGQuY2FtZXJhLm1vdXNlLnVwLnggKiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gPyAwKVxuICAgICAgICAgICAgICAgICAgICBAaVJlc29sdXRpb24ueSAtIChAd29ybGQuY2FtZXJhLm1vdXNlLnVwLnkgKiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gPyBAaVJlc29sdXRpb24ueSkpXG4gICAgICAgICAgICAgICAgICAgIChAd29ybGQuY2FtZXJhLm1vdXNlLmJ1dHRvbnMgYW5kIDEgb3IgLTEpICogQHdvcmxkLmNhbWVyYS5tb3VzZS5kb3duLnggKiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gPyAwKVxuICAgICAgICAgICAgICAgICAgICAoQHdvcmxkLmNhbWVyYS5tb3VzZS5idXR0b25zIGFuZCAxIG9yIC0xKSAqIChAaVJlc29sdXRpb24ueSAtIChAd29ybGQuY2FtZXJhLm1vdXNlLmRvd24ueSAqICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA/IEBpUmVzb2x1dGlvbi55KSkpKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIEBpQ2VudGVyID0gbmV3IFZlY3RvcjMgQHdvcmxkLmNhbWVyYS5jZW50ZXIueCwgQHdvcmxkLmNhbWVyYS5jZW50ZXIueSwgQHdvcmxkLmNhbWVyYS5jZW50ZXIuelxuICAgICAgICAgICAgQGlDYW1lcmEgPSBuZXcgVmVjdG9yMyBAd29ybGQuY2FtZXJhLnBvc2l0aW9uLngsIEB3b3JsZC5jYW1lcmEucG9zaXRpb24ueSwgQHdvcmxkLmNhbWVyYS5wb3NpdGlvbi56XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgIEBpVGltZSAgICAgID0gcGVyZm9ybWFuY2Uubm93KCkvMTAwMFxuICAgICAgICAgICAgQGlUaW1lRGVsdGEgPSBAd29ybGQuZW5naW5lLmdldERlbHRhVGltZSgpLzEwMDBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQGZyYW1lUmF0ZXMucHVzaCBAd29ybGQuZW5naW5lLmdldEZwcygpXG4gICAgICAgICAgICBpZiBAZnJhbWVSYXRlcy5sZW5ndGggPiAzMCB0aGVuIEBmcmFtZVJhdGVzLnNoaWZ0KClcbiAgICAgICAgICAgIEBmcHMgPSAwXG4gICAgICAgICAgICBmb3IgciBpbiBAZnJhbWVSYXRlcyB0aGVuIEBmcHMgKz0gclxuICAgICAgICAgICAgQGZwcyAvPSBAZnJhbWVSYXRlcy5sZW5ndGhcbiAgICAgICAgICAgIFxuICAgICAgICAjICAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAgXG4gICAgICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICBcbiAgICAgICAgIyAwMDAwMDAwMDAgIDAwMDAwMCAgICAgICAwMDAgICAgIDAwMDAwMDAgICAwMDAwMDAwICAgIFxuICAgICAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4gICAgICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgICAgMDAwICAgICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICAgICAgXG4gICAgICAgIEBzY2VuZS5vbkFmdGVyUmVuZGVyVGFyZ2V0c1JlbmRlck9ic2VydmFibGUuYWRkID0+IFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiBAYnVmZmVyIHRoZW4gQHRleHR1cmVzLmJ1ZmZlci51cGRhdGUgQHJlbmRlclRhcmdldC5yZWFkUGl4ZWxzKClcbiAgICAgICAgICAgIFxuICAgICAgICBAc2NlbmUub25BZnRlclJlbmRlck9ic2VydmFibGUuYWRkID0+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEBpRnJhbWUrK1xuICAgICAgICAgICAgZm9yIGkgaW4gWzI1Ni4uLjUxMl0gXG4gICAgICAgICAgICAgICAgQHdvcmxkLmtleXNbaV0gPSAwXG4gICAgICAgICAgIFxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwICAwMDAgICAwMDAgIFxuICAgIFxuICAgIHJlbmRlcjogLT5cblxuICAgICAgICBAcGxhbmUucG9zaXRpb24uY29weUZyb20gQHdvcmxkLmNhbWVyYS5wb3NpdGlvbi5hZGQgQHdvcmxkLmNhbWVyYS5nZXREaXIoKS5zY2FsZSAxLjVcbiAgICAgICAgXG4gICAgICAgIEBtYXRlcmlhbERhdGEgQHNoYWRlck1hdGVyaWFsXG4gICAgICAgICAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICBcbiAgICBcbiAgICBtYXRlcmlhbERhdGE6IChtKSA9PiBcbiAgICAgICAgXG4gICAgICAgIG0uc2V0VGV4dHVyZSAnaUNoYW5uZWwwJyAgIEB0ZXh0dXJlcy5rZXlzIFxuICAgICAgICBtLnNldFRleHR1cmUgJ2lDaGFubmVsMScgICBAdGV4dHVyZXMuYnVmZmVyIGlmIEBidWZmZXJcbiAgICAgICAgbS5zZXRUZXh0dXJlICdpQ2hhbm5lbDInICAgQHRleHR1cmVzLmZvbnRcbiAgICAgICAgbS5zZXRJbnQgICAgICdpRnJhbWUnICAgICAgQGlGcmFtZVxuICAgICAgICBtLnNldEZsb2F0ICAgJ2lDb21waWxlJyAgICBAY29tcGlsZVRpbWUvMTAwMFxuICAgICAgICBtLnNldEZsb2F0ICAgJ2lUaW1lJyAgICAgICBAaVRpbWVcbiAgICAgICAgbS5zZXRGbG9hdCAgICdpVGltZURlbHRhJyAgQGlUaW1lRGVsdGFcbiAgICAgICAgbS5zZXRWZWN0b3IyICdpRGVsdGEnICAgICAgQGlEZWx0YVxuICAgICAgICBtLnNldFZlY3RvcjQgJ2lNb3VzZScgICAgICBAaU1vdXNlXG4gICAgICAgIG0uc2V0VmVjdG9yMyAnaVJlc29sdXRpb24nIEBpUmVzb2x1dGlvblxuICAgICAgICBtLnNldFZlY3RvcjMgJ2lDZW50ZXInICAgICBAaUNlbnRlclxuICAgICAgICBtLnNldFZlY3RvcjMgJ2lDYW1lcmEnICAgICBAaUNhbWVyYVxuICAgICAgICBtLnNldEZsb2F0ICAgJ2lEaXN0JyAgICAgICBAd29ybGQuY2FtZXJhLmRpc3RcbiAgICAgICAgbS5zZXRGbG9hdCAgICdpTWluRGlzdCcgICAgQHdvcmxkLmNhbWVyYS5taW5EaXN0XG4gICAgICAgIG0uc2V0RmxvYXQgICAnaU1heERpc3QnICAgIEB3b3JsZC5jYW1lcmEubWF4RGlzdFxuICAgICAgICBtLnNldEZsb2F0ICAgJ2lSb3RhdGUnICAgICBAd29ybGQuY2FtZXJhLnJvdGF0ZVxuICAgICAgICBtLnNldEZsb2F0ICAgJ2lEZWdyZWUnICAgICBAd29ybGQuY2FtZXJhLmRlZ3JlZVxuICAgICAgICBtLnNldEZsb2F0ICAgJ2lGcmFtZVJhdGUnICBNYXRoLnJvdW5kIEBmcHNcbiAgICAgICAgbS5zZXRGbG9hdCAgICdpTXMnICAgICAgICAgQHdvcmxkLmVuZ2luZS5nZXREZWx0YVRpbWUoKVxuICAgICAgICAgICAgICAgIFxuICAgICMgIDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAwICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgIFxuICAgICMgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwICAwMDAgICAwMDAgIFxuICAgIFxuICAgIHNoYWRlck1hdGVyaWFsOiAoa2V5KSAtPlxuICAgICAgICBcbiAgICAgICAgbmV3IFNoYWRlck1hdGVyaWFsIFwiI3trZXl9U2hhZGVyXCIsIEBzY2VuZSwgIFxuICAgICAgICAgICAgICAgIHZlcnRleDogICBrZXlcbiAgICAgICAgICAgICAgICBmcmFnbWVudDoga2V5XG4gICAgICAgICAgICAsXHJcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFsncG9zaXRpb24nICdub3JtYWwnICd1diddXG4gICAgICAgICAgICAgICAgdW5pZm9ybXM6ICAgW1xuICAgICAgICAgICAgICAgICAgICAnd29ybGRWaWV3UHJvamVjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgJ2lDYW1lcmEnICdpQ2VudGVyJyAnaURpc3QnICdpTWF4RGlzdCcgJ2lNaW5EaXN0J1xuICAgICAgICAgICAgICAgICAgICAnaUZyYW1lUmF0ZScgJ2lNcycgJ2lGcmFtZScgXG4gICAgICAgICAgICAgICAgICAgICdpRGVsdGEnICdpVGltZScgJ2lUaW1lRGVsdGEnIFxuICAgICAgICAgICAgICAgICAgICAnaU1vdXNlJyAnaVJlc29sdXRpb24nIFxuICAgICAgICAgICAgICAgICAgICAnaVJvdGF0ZScgJ2lEZWdyZWUnIFxuICAgICAgICAgICAgICAgICAgICAnaUNvbXBpbGUnXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICBcbiAgICBzaGFkZXJDb2RlOiAoZnJhZ1NvdXJjZSkgLT5cbiAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0ICAgICBpVGltZTtcbiAgICAgICAgICAgIHVuaWZvcm0gZmxvYXQgICAgIGlUaW1lRGVsdGE7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0ICAgICBpRnJhbWVSYXRlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCAgICAgaU1zO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCAgICAgaUNvbXBpbGU7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0ICAgICBpRGlzdDtcbiAgICAgICAgICAgIHVuaWZvcm0gZmxvYXQgICAgIGlNaW5EaXN0O1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCAgICAgaU1heERpc3Q7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0ICAgICBpUm90YXRlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCAgICAgaURlZ3JlZTtcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMiAgICAgIGlEZWx0YTtcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjNCAgICAgIGlNb3VzZTtcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMyAgICAgIGlSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdW5pZm9ybSB2ZWMzICAgICAgaUNlbnRlcjtcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMyAgICAgIGlDYW1lcmE7XG4gICAgICAgICAgICB1bmlmb3JtIGludCAgICAgICBpRnJhbWU7XG4gICAgICAgICAgICB1bmlmb3JtIHNhbXBsZXIyRCBpQ2hhbm5lbDA7XG4gICAgICAgICAgICB1bmlmb3JtIHNhbXBsZXIyRCBpQ2hhbm5lbDE7XG4gICAgICAgICAgICB1bmlmb3JtIHNhbXBsZXIyRCBpQ2hhbm5lbDI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICN7QGNvbW1vblNvdXJjZX1cbiAgICAgICAgICAgICN7ZnJhZ1NvdXJjZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1haW5JbWFnZShnbF9GcmFnQ29sb3IsIGdsX0ZyYWdDb29yZC54eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgICAgICAgICAgICAgXG5tb2R1bGUuZXhwb3J0cyA9IFNoYWRlclxuIl19
//# sourceURL=../coffee/shader.coffee