// koffee 1.6.0

/*
 0000000  000   000   0000000   0000000    00000000  00000000   
000       000   000  000   000  000   000  000       000   000  
0000000   000000000  000000000  000   000  0000000   0000000    
     000  000   000  000   000  000   000  000       000   000  
0000000   000   000  000   000  0000000    00000000  000   000
 */
var Mesh, MeshBuilder, RawTexture, Shader, ShaderMaterial, Vector2, Vector3, Vector4, klog, performance, ref, ref1, slash;

ref = require('babylonjs'), Mesh = ref.Mesh, MeshBuilder = ref.MeshBuilder, RawTexture = ref.RawTexture, ShaderMaterial = ref.ShaderMaterial, Vector2 = ref.Vector2, Vector3 = ref.Vector3, Vector4 = ref.Vector4;

performance = require('perf_hooks').performance;

ref1 = require('kxk'), klog = ref1.klog, slash = ref1.slash;

Shader = (function() {
    function Shader(world) {
        var fragSource, fragmentShader, vertexShader;
        this.world = world;
        this.scene = this.world.scene;
        this.frameRates = [];
        this.iFrame = 0;
        vertexShader = "precision highp float;\nattribute vec3 position;\nattribute vec2 uv;\nuniform mat4 worldViewProjection;\nvoid main(void) {\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n}";
        fragSource = slash.readText(__dirname + "/../shader/astro.frag");
        fragmentShader = "precision highp float;\nuniform float iTime;\nuniform float iTimeDelta;\nuniform float iFrameRate;\nuniform float iMs;\nuniform float iCompile;\nuniform float iDist;\nuniform float iMinDist;\nuniform float iMaxDist;\nuniform float iRotate;\nuniform float iDegree;\nuniform vec2  iDelta;\nuniform vec4  iMouse;\nuniform vec2  iResolution;\nuniform vec3  iCenter;\nuniform vec3  iCamera;\nuniform int   iFrame;\nuniform sampler2D iChannel0;\n\n" + fragSource + "\n                        \nvoid main(void) \n{\n    mainImage(gl_FragColor, gl_FragCoord.xy);\n}";
        this.shaderStart = performance.now();
        this.shaderMaterial = new ShaderMaterial("shader", this.scene, {
            fragmentSource: fragmentShader,
            vertexSource: vertexShader
        }, {
            attributes: ['position', 'normal', 'uv'],
            uniforms: ['worldViewProjection', 'iMs', 'iDist', 'iMaxDist', 'iMinDist', 'iCenter', 'iCamera', 'iFrameRate', 'iDelta', 'iTime', 'iTimeDelta', 'iMouse', 'iResolution', 'iRotate', 'iDegree', 'iFrame', 'iCompile']
        });
        this.plane = MeshBuilder.CreatePlane("plane", {
            width: 10,
            height: 10
        }, this.scene);
        this.plane.material = this.shaderMaterial;
        this.plane.billboardMode = Mesh.BILLBOARDMODE_ALL;
        this.shaderMaterial.onCompiled = (function(_this) {
            return function() {
                _this.compileTime = parseInt(performance.now() - _this.shaderStart);
                return klog("compileTime " + (_this.compileTime / 1000) + "s");
            };
        })(this);
    }

    Shader.prototype.render = function() {
        var dpr, fps, i, j, k, len, mouseX, mouseY, r, ref2, ref3, ref4, results;
        this.plane.position.copyFrom(this.world.camera.position.add(this.world.camera.getDir().scale(2)));
        dpr = window.devicePixelRatio;
        mouseX = (ref2 = this.world.camera.mouseX) != null ? ref2 : 0;
        mouseY = (ref3 = this.world.camera.mouseY) != null ? ref3 : this.world.canvas.height / dpr;
        this.frameRates.push(this.world.engine.getFps());
        if (this.frameRates.length > 30) {
            this.frameRates.shift();
        }
        fps = 0;
        ref4 = this.frameRates;
        for (j = 0, len = ref4.length; j < len; j++) {
            r = ref4[j];
            fps += r;
        }
        fps /= this.frameRates.length;
        this.shaderMaterial.setTexture('iChannel0', RawTexture.CreateRTexture(this.world.keys, 256, 3, this.scene, false));
        this.shaderMaterial.setInt('iFrame', this.iFrame++);
        this.shaderMaterial.setFloat('iFrameRate', Math.round(fps));
        this.shaderMaterial.setFloat('iMs', this.world.engine.getDeltaTime());
        this.shaderMaterial.setFloat('iCompile', this.compileTime / 1000);
        this.shaderMaterial.setFloat('iTime', performance.now() / 1000);
        this.shaderMaterial.setFloat('iTimeDelta', this.world.engine.getDeltaTime() / 1000);
        this.shaderMaterial.setFloat('iDist', this.world.camera.dist);
        this.shaderMaterial.setFloat('iMinDist', this.world.camera.minDist);
        this.shaderMaterial.setFloat('iMaxDist', this.world.camera.maxDist);
        this.shaderMaterial.setFloat('iRotate', this.world.camera.rotate);
        this.shaderMaterial.setFloat('iDegree', this.world.camera.degree);
        this.shaderMaterial.setVector2('iDelta', new Vector2(this.world.camera.mouseDelta.x, this.world.camera.mouseDelta.y));
        this.shaderMaterial.setVector4('iMouse', new Vector4(mouseX * dpr, this.world.canvas.height - mouseY * dpr, this.world.camera.downButtons, 0));
        this.shaderMaterial.setVector2('iResolution', new Vector2(this.world.canvas.width, this.world.canvas.height));
        this.shaderMaterial.setVector3('iCenter', new Vector3(this.world.camera.center.x, this.world.camera.center.y, this.world.camera.center.z));
        this.shaderMaterial.setVector3('iCamera', new Vector3(this.world.camera.position.x, this.world.camera.position.y, this.world.camera.position.z));
        results = [];
        for (i = k = 256; k < 512; i = ++k) {
            results.push(this.world.keys[i] = 0);
        }
        return results;
    };

    return Shader;

})();

module.exports = Shader;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZGVyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUErRSxPQUFBLENBQVEsV0FBUixDQUEvRSxFQUFFLGVBQUYsRUFBUSw2QkFBUixFQUFxQiwyQkFBckIsRUFBaUMsbUNBQWpDLEVBQWlELHFCQUFqRCxFQUEwRCxxQkFBMUQsRUFBbUU7O0FBQ2pFLGNBQWdCLE9BQUEsQ0FBUSxZQUFSOztBQUNsQixPQUFrQixPQUFBLENBQVEsS0FBUixDQUFsQixFQUFFLGdCQUFGLEVBQVE7O0FBRUY7SUFFQyxnQkFBQyxLQUFEO0FBRUMsWUFBQTtRQUZBLElBQUMsQ0FBQSxRQUFEO1FBRUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFDLENBQUEsS0FBSyxDQUFDO1FBQ2hCLElBQUMsQ0FBQSxVQUFELEdBQWM7UUFDZCxJQUFDLENBQUEsTUFBRCxHQUFVO1FBQ1YsWUFBQSxHQUFnQjtRQWlCaEIsVUFBQSxHQUFhLEtBQUssQ0FBQyxRQUFOLENBQWtCLFNBQUQsR0FBVyx1QkFBNUI7UUFFYixjQUFBLEdBQWlCLDRiQUFBLEdBb0JYLFVBcEJXLEdBb0JBO1FBUWpCLElBQUMsQ0FBQSxXQUFELEdBQWUsV0FBVyxDQUFDLEdBQVosQ0FBQTtRQUNmLElBQUMsQ0FBQSxjQUFELEdBQWtCLElBQUksY0FBSixDQUFtQixRQUFuQixFQUE2QixJQUFDLENBQUEsS0FBOUIsRUFDVjtZQUFBLGNBQUEsRUFBZSxjQUFmO1lBQ0EsWUFBQSxFQUFlLFlBRGY7U0FEVSxFQUlWO1lBQUEsVUFBQSxFQUFZLENBQUMsVUFBRCxFQUFZLFFBQVosRUFBcUIsSUFBckIsQ0FBWjtZQUNBLFFBQUEsRUFBWSxDQUFDLHFCQUFELEVBQXVCLEtBQXZCLEVBQTZCLE9BQTdCLEVBQXFDLFVBQXJDLEVBQWdELFVBQWhELEVBQTJELFNBQTNELEVBQXFFLFNBQXJFLEVBQStFLFlBQS9FLEVBQ0MsUUFE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SUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBMUIsRUFBaUMsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBL0MsQ0FBekM7UUFDQSxJQUFDLENBQUEsY0FBYyxDQUFDLFVBQWhCLENBQTJCLFNBQTNCLEVBQXlDLElBQUksT0FBSixDQUFZLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFqQyxFQUFvQyxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBekQsRUFBNEQsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQWpGLENBQXpDO1FBQ0EsSUFBQyxDQUFBLGNBQWMsQ0FBQyxVQUFoQixDQUEyQixTQUEzQixFQUF5QyxJQUFJLE9BQUosQ0FBWSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBbkMsRUFBc0MsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQTdELEVBQWdFLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUF2RixDQUF6QztBQUVBO2FBQVMsNkJBQVQ7eUJBQ0ksSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUFaLEdBQWlCO0FBRHJCOztJQWpDSTs7Ozs7O0FBb0NaLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4gMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMDAwMDAwICAgXG4wMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4wMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICAgXG4gICAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4wMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4jIyNcblxueyBNZXNoLCBNZXNoQnVpbGRlciwgUmF3VGV4dHVyZSwgU2hhZGVyTWF0ZXJpYWwsIFZlY3RvcjIsIFZlY3RvcjMsIFZlY3RvcjQgfSA9IHJlcXVpcmUgJ2JhYnlsb25qcydcbnsgcGVyZm9ybWFuY2UgfSA9IHJlcXVpcmUgJ3BlcmZfaG9va3MnXG57IGtsb2csIHNsYXNoIH0gPSByZXF1aXJlICdreGsnXG4gICAgICAgIFxuY2xhc3MgU2hhZGVyXG4gICAgXG4gICAgQDogKEB3b3JsZCkgLT5cblxuICAgICAgICBAc2NlbmUgPSBAd29ybGQuc2NlbmVcbiAgICAgICAgQGZyYW1lUmF0ZXMgPSBbXVxuICAgICAgICBAaUZyYW1lID0gMFxuICAgICAgICB2ZXJ0ZXhTaGFkZXIgPSAgXCJcIlwiXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgICAgICAgICBhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcbiAgICAgICAgICAgIGF0dHJpYnV0ZSB2ZWMyIHV2O1xuICAgICAgICAgICAgdW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb247XG4gICAgICAgICAgICB2b2lkIG1haW4odm9pZCkge1xuICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIHZlYzQocG9zaXRpb24sIDEuMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlwiXCJcbiAgICAgICAgXHJcbiAgICAgICAgIyBmcmFnU291cmNlID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vc2hhZGVyL2dyYXBoLmZyYWdcIlxuICAgICAgICAjIGZyYWdTb3VyY2UgPSBzbGFzaC5yZWFkVGV4dCBcIiN7X19kaXJuYW1lfS8uLi9zaGFkZXIva2FsYW1hcmkuZnJhZ1wiXG4gICAgICAgICMgZnJhZ1NvdXJjZSA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci9rYWxhbWFyaV9ibHVlcHJpbnQuZnJhZ1wiXG4gICAgICAgICMgZnJhZ1NvdXJjZSA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci9rcmFwLmZyYWdcIlxuICAgICAgICAjIGZyYWdTb3VyY2UgPSBzbGFzaC5yZWFkVGV4dCBcIiN7X19kaXJuYW1lfS8uLi9zaGFkZXIvdHdpc3QuZnJhZ1wiXG4gICAgICAgICMgZnJhZ1NvdXJjZSA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci93b3JtLmZyYWdcIlxuICAgICAgICAjIGZyYWdTb3VyY2UgPSBzbGFzaC5yZWFkVGV4dCBcIiN7X19kaXJuYW1lfS8uLi9zaGFkZXIva2VybC5mcmFnXCJcbiAgICAgICAgZnJhZ1NvdXJjZSA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci9hc3Ryby5mcmFnXCJcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIGZyYWdtZW50U2hhZGVyID0gXCJcIlwiXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGlUaW1lO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpVGltZURlbHRhO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpRnJhbWVSYXRlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpTXM7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGlDb21waWxlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpRGlzdDtcbiAgICAgICAgICAgIHVuaWZvcm0gZmxvYXQgaU1pbkRpc3Q7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGlNYXhEaXN0O1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpUm90YXRlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpRGVncmVlO1xuICAgICAgICAgICAgdW5pZm9ybSB2ZWMyICBpRGVsdGE7XG4gICAgICAgICAgICB1bmlmb3JtIHZlYzQgIGlNb3VzZTtcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMiAgaVJlc29sdXRpb247XG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgIGlDZW50ZXI7XG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgIGlDYW1lcmE7XG4gICAgICAgICAgICB1bmlmb3JtIGludCAgIGlGcmFtZTtcbiAgICAgICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIGlDaGFubmVsMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgI3tmcmFnU291cmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB2b2lkIG1haW4odm9pZCkgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWFpbkltYWdlKGdsX0ZyYWdDb2xvciwgZ2xfRnJhZ0Nvb3JkLnh5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgIEBzaGFkZXJTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCBcInNoYWRlclwiLCBAc2NlbmUsICBcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNvdXJjZTpmcmFnbWVudFNoYWRlclxuICAgICAgICAgICAgICAgIHZlcnRleFNvdXJjZTogIHZlcnRleFNoYWRlclxuICAgICAgICAgICAgLFxyXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbJ3Bvc2l0aW9uJyAnbm9ybWFsJyAndXYnXVxuICAgICAgICAgICAgICAgIHVuaWZvcm1zOiAgIFsnd29ybGRWaWV3UHJvamVjdGlvbicgJ2lNcycgJ2lEaXN0JyAnaU1heERpc3QnICdpTWluRGlzdCcgJ2lDZW50ZXInICdpQ2FtZXJhJyAnaUZyYW1lUmF0ZScgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpRGVsdGEnICdpVGltZScgJ2lUaW1lRGVsdGEnICdpTW91c2UnICdpUmVzb2x1dGlvbicgJ2lSb3RhdGUnICdpRGVncmVlJyAnaUZyYW1lJyAnaUNvbXBpbGUnXVxuICAgICAgICAgICAgXG4gICAgICAgIEBwbGFuZSA9IE1lc2hCdWlsZGVyLkNyZWF0ZVBsYW5lIFwicGxhbmVcIiwgeyB3aWR0aDogMTAsIGhlaWdodDogMTAgfSwgQHNjZW5lXG4gICAgICAgIEBwbGFuZS5tYXRlcmlhbCA9IEBzaGFkZXJNYXRlcmlhbFxuICAgICAgICBAcGxhbmUuYmlsbGJvYXJkTW9kZSA9IE1lc2guQklMTEJPQVJETU9ERV9BTExcbiAgICAgICAgICAgXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5vbkNvbXBpbGVkID0gPT4gXG4gICAgICAgICAgICBAY29tcGlsZVRpbWUgPSBwYXJzZUludCBwZXJmb3JtYW5jZS5ub3coKS1Ac2hhZGVyU3RhcnRcbiAgICAgICAgICAgIGtsb2cgXCJjb21waWxlVGltZSAje0Bjb21waWxlVGltZS8xMDAwfXNcIiBcbiAgICAgICAgXG4gICAgcmVuZGVyOiAtPlxuICAgICAgICBcbiAgICAgICAgQHBsYW5lLnBvc2l0aW9uLmNvcHlGcm9tIEB3b3JsZC5jYW1lcmEucG9zaXRpb24uYWRkIEB3b3JsZC5jYW1lcmEuZ2V0RGlyKCkuc2NhbGUgMlxuICAgICAgICBcbiAgICAgICAgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW9cbiAgICAgICAgXG4gICAgICAgIG1vdXNlWCA9IEB3b3JsZC5jYW1lcmEubW91c2VYID8gMDtcbiAgICAgICAgbW91c2VZID0gQHdvcmxkLmNhbWVyYS5tb3VzZVkgPyBAd29ybGQuY2FudmFzLmhlaWdodC9kcHI7XG4gICAgICAgIFxuICAgICAgICBAZnJhbWVSYXRlcy5wdXNoIEB3b3JsZC5lbmdpbmUuZ2V0RnBzKClcbiAgICAgICAgaWYgQGZyYW1lUmF0ZXMubGVuZ3RoID4gMzAgdGhlbiBAZnJhbWVSYXRlcy5zaGlmdCgpXG4gICAgICAgIGZwcyA9IDBcbiAgICAgICAgZm9yIHIgaW4gQGZyYW1lUmF0ZXMgdGhlbiBmcHMgKz0gclxuICAgICAgICBmcHMgLz0gQGZyYW1lUmF0ZXMubGVuZ3RoXG5cbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldFRleHR1cmUgJ2lDaGFubmVsMCcgICBSYXdUZXh0dXJlLkNyZWF0ZVJUZXh0dXJlIEB3b3JsZC5rZXlzLCAyNTYsIDMsIEBzY2VuZSwgZmFsc2VcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEludCAgICAgJ2lGcmFtZScgICAgICBAaUZyYW1lKytcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEZsb2F0ICAgJ2lGcmFtZVJhdGUnICBNYXRoLnJvdW5kIGZwc1xuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaU1zJyAgICAgICAgIEB3b3JsZC5lbmdpbmUuZ2V0RGVsdGFUaW1lKClcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEZsb2F0ICAgJ2lDb21waWxlJyAgICBAY29tcGlsZVRpbWUvMTAwMFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaVRpbWUnICAgICAgIHBlcmZvcm1hbmNlLm5vdygpLzEwMDBcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEZsb2F0ICAgJ2lUaW1lRGVsdGEnICBAd29ybGQuZW5naW5lLmdldERlbHRhVGltZSgpLzEwMDBcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEZsb2F0ICAgJ2lEaXN0JyAgICAgICBAd29ybGQuY2FtZXJhLmRpc3RcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEZsb2F0ICAgJ2lNaW5EaXN0JyAgICBAd29ybGQuY2FtZXJhLm1pbkRpc3RcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEZsb2F0ICAgJ2lNYXhEaXN0JyAgICBAd29ybGQuY2FtZXJhLm1heERpc3RcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldEZsb2F0ICAgJ2lSb3RhdGUnICAgICBAd29ybGQuY2FtZXJhLnJvdGF0ZVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaURlZ3JlZScgICAgIEB3b3JsZC5jYW1lcmEuZGVncmVlXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5zZXRWZWN0b3IyICdpRGVsdGEnICAgICAgbmV3IFZlY3RvcjIoQHdvcmxkLmNhbWVyYS5tb3VzZURlbHRhLngsIEB3b3JsZC5jYW1lcmEubW91c2VEZWx0YS55KSBcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldFZlY3RvcjQgJ2lNb3VzZScgICAgICBuZXcgVmVjdG9yNChtb3VzZVgqZHByLCBAd29ybGQuY2FudmFzLmhlaWdodC1tb3VzZVkqZHByLCBAd29ybGQuY2FtZXJhLmRvd25CdXR0b25zLCAwKVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0VmVjdG9yMiAnaVJlc29sdXRpb24nIG5ldyBWZWN0b3IyKEB3b3JsZC5jYW52YXMud2lkdGgsIEB3b3JsZC5jYW52YXMuaGVpZ2h0KVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0VmVjdG9yMyAnaUNlbnRlcicgICAgIG5ldyBWZWN0b3IzKEB3b3JsZC5jYW1lcmEuY2VudGVyLngsIEB3b3JsZC5jYW1lcmEuY2VudGVyLnksIEB3b3JsZC5jYW1lcmEuY2VudGVyLnopXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5zZXRWZWN0b3IzICdpQ2FtZXJhJyAgICAgbmV3IFZlY3RvcjMoQHdvcmxkLmNhbWVyYS5wb3NpdGlvbi54LCBAd29ybGQuY2FtZXJhLnBvc2l0aW9uLnksIEB3b3JsZC5jYW1lcmEucG9zaXRpb24ueilcbiAgICAgICAgICAgIFxuICAgICAgICBmb3IgaSBpbiBbMjU2Li4uNTEyXSBcbiAgICAgICAgICAgIEB3b3JsZC5rZXlzW2ldID0gMFxuICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gU2hhZGVyXG4iXX0=
//# sourceURL=../coffee/shader.coffee