// koffee 1.6.0

/*
 0000000  000   000   0000000   0000000    00000000  00000000   
000       000   000  000   000  000   000  000       000   000  
0000000   000000000  000000000  000   000  0000000   0000000    
     000  000   000  000   000  000   000  000       000   000  
0000000   000   000  000   000  0000000    00000000  000   000
 */
var Engine, Mesh, MeshBuilder, RawTexture, RenderTargetTexture, Scene, Shader, ShaderMaterial, Texture, Vector2, Vector3, Vector4, klog, performance, ref, ref1, slash;

ref = require('babylonjs'), Engine = ref.Engine, Mesh = ref.Mesh, MeshBuilder = ref.MeshBuilder, RawTexture = ref.RawTexture, RenderTargetTexture = ref.RenderTargetTexture, Scene = ref.Scene, ShaderMaterial = ref.ShaderMaterial, Texture = ref.Texture, Vector2 = ref.Vector2, Vector3 = ref.Vector3, Vector4 = ref.Vector4;

performance = require('perf_hooks').performance;

ref1 = require('kxk'), klog = ref1.klog, slash = ref1.slash;

Shader = (function() {
    function Shader(world) {
        var buffer, fragSource, i, j, k, l, m;
        this.world = world;
        this.scene = this.world.scene;
        this.frameRates = [];
        this.buffers = [];
        this.textures = [];
        klog("buffers " + this.world.canvas.width + "x" + this.world.canvas.height);
        for (i = k = 0; k < 3; i = ++k) {
            buffer = new Int8Array(4 * this.world.canvas.width * this.world.canvas.height);
            this.buffers.push(buffer);
            l = buffer.length;
            for (j = m = 0; m < 2; j = ++m) {
                buffer[j * 4] = 255;
                buffer[j * 4 + 1] = 255;
                buffer[j * 4 + 2] = 255;
                buffer[j * 4 + 3] = 255;
            }
            this.textures.push(new RawTexture(buffer, this.world.canvas.width, this.world.canvas.height, Engine.TEXTUREFORMAT_RGBA, this.scene, false, false, Texture.NEAREST_SAMPLINGMODE, Engine.TEXTURETYPE_BYTE));
        }
        this.textures[1] = new Texture(__dirname + "/../img/font.png", this.scene);
        this.iFrame = 0;
        this.vertexShader = "precision highp float;\nattribute vec3 position;\nattribute vec2 uv;\nuniform mat4 worldViewProjection;\nvoid main(void) {\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n}";
        fragSource = slash.readText(__dirname + "/../shader/follow.frag");
        this.uniforms = ['worldViewProjection', 'iMs', 'iDist', 'iMaxDist', 'iMinDist', 'iCenter', 'iCamera', 'iFrameRate', 'iDelta', 'iTime', 'iTimeDelta', 'iMouse', 'iResolution', 'iRotate', 'iDegree', 'iFrame', 'iCompile'];
        this.shaderStart = performance.now();
        this.shaderMaterial = new ShaderMaterial("shader", this.scene, {
            vertexSource: this.vertexShader,
            fragmentSource: this.shaderCode(fragSource)
        }, {
            attributes: ['position', 'normal', 'uv'],
            uniforms: this.uniforms
        });
        this.plane = MeshBuilder.CreatePlane("plane", {
            width: 10,
            height: 10
        }, this.scene);
        this.plane.material = this.shaderMaterial;
        this.plane.billboardMode = Mesh.BILLBOARDMODE_ALL;
        this.planeFake = MeshBuilder.CreatePlane("planeFake", {
            width: 1,
            height: 1
        }, this.scene);
        this.planeFake.billboardMode = Mesh.BILLBOARDMODE_ALL;
        this.shaderMaterial.onCompiled = (function(_this) {
            return function() {
                _this.compileTime = parseInt(performance.now() - _this.shaderStart);
                return klog("compileTime " + (_this.compileTime / 1000) + "s");
            };
        })(this);
        this.renderBuffers();
    }

    Shader.prototype.shaderCode = function(fragSource) {
        return "precision highp float;\nuniform float iTime;\nuniform float iTimeDelta;\nuniform float iFrameRate;\nuniform float iMs;\nuniform float iCompile;\nuniform float iDist;\nuniform float iMinDist;\nuniform float iMaxDist;\nuniform float iRotate;\nuniform float iDegree;\nuniform vec2  iDelta;\nuniform vec4  iMouse;\nuniform vec2  iResolution;\nuniform vec3  iCenter;\nuniform vec3  iCamera;\nuniform int   iFrame;\nuniform sampler2D iChannel0;\nuniform sampler2D iChannel1;\nuniform sampler2D iChannel2;\nuniform sampler2D iChannel3;\n\n" + fragSource + "\n                        \nvoid main(void) \n{\n    mainImage(gl_FragColor, gl_FragCoord.xy);\n}";
    };

    Shader.prototype.renderBuffers = function() {
        var bufferSource;
        bufferSource = slash.readText(__dirname + "/../shader/buffer.frag");
        this.sceneFake = new Scene(this);
        this.bufferMaterial = new ShaderMaterial("bufferShader", this.scene, {
            vertexSource: this.vertexShader,
            fragmentSource: this.shaderCode(bufferSource)
        }, {
            attributes: ['position', 'normal', 'uv'],
            uniforms: this.uniforms
        });
        this.plane2 = MeshBuilder.CreatePlane("plane2", {
            width: 1,
            height: 1
        }, this.scene);
        this.plane2.material = this.bufferMaterial;
        this.plane2.billboardMode = Mesh.BILLBOARDMODE_ALL;
        this.renderTarget = new RenderTargetTexture("buf", {
            width: this.world.canvas.width,
            height: this.world.canvas.height
        }, this.scene, false);
        this.renderTarget.renderList.push(this.plane2);
        this.scene.customRenderTargets.push(this.renderTarget);
        this.rttMaterial = new BABYLON.StandardMaterial("RTT material", this.scene);
        this.rttMaterial.emissiveTexture = this.renderTarget;
        this.rttMaterial.disableLighting = true;
        return this.planeFake.material = this.rttMaterial;
    };

    Shader.prototype.render = function() {
        var dpr, fps, i, k, len, m, mouseX, mouseY, r, ref2, ref3, ref4, results;
        this.plane.position.copyFrom(this.world.camera.position.add(this.world.camera.getDir().scale(2)));
        dpr = window.devicePixelRatio;
        mouseX = (ref2 = this.world.camera.mouseX) != null ? ref2 : 0;
        mouseY = (ref3 = this.world.camera.mouseY) != null ? ref3 : this.world.canvas.height / dpr;
        this.frameRates.push(this.world.engine.getFps());
        if (this.frameRates.length > 30) {
            this.frameRates.shift();
        }
        fps = 0;
        ref4 = this.frameRates;
        for (k = 0, len = ref4.length; k < len; k++) {
            r = ref4[k];
            fps += r;
        }
        fps /= this.frameRates.length;
        this.shaderMaterial.setTexture('iChannel0', RawTexture.CreateRTexture(this.world.keys, 256, 3, this.scene, false));
        this.shaderMaterial.setTexture('iChannel1', this.textures[0]);
        this.shaderMaterial.setTexture('iChannel2', this.textures[1]);
        this.shaderMaterial.setTexture('iChannel3', this.textures[2]);
        this.shaderMaterial.setInt('iFrame', this.iFrame++);
        this.shaderMaterial.setFloat('iFrameRate', Math.round(fps));
        this.shaderMaterial.setFloat('iMs', this.world.engine.getDeltaTime());
        this.shaderMaterial.setFloat('iCompile', this.compileTime / 1000);
        this.shaderMaterial.setFloat('iTime', performance.now() / 1000);
        this.shaderMaterial.setFloat('iTimeDelta', this.world.engine.getDeltaTime() / 1000);
        this.shaderMaterial.setFloat('iDist', this.world.camera.dist);
        this.shaderMaterial.setFloat('iMinDist', this.world.camera.minDist);
        this.shaderMaterial.setFloat('iMaxDist', this.world.camera.maxDist);
        this.shaderMaterial.setFloat('iRotate', this.world.camera.rotate);
        this.shaderMaterial.setFloat('iDegree', this.world.camera.degree);
        this.shaderMaterial.setVector2('iDelta', new Vector2(this.world.camera.mouseDelta.x, this.world.camera.mouseDelta.y));
        this.shaderMaterial.setVector4('iMouse', new Vector4(mouseX * dpr, this.world.canvas.height - mouseY * dpr, this.world.camera.downButtons, 0));
        this.shaderMaterial.setVector2('iResolution', new Vector2(this.world.canvas.width, this.world.canvas.height));
        this.shaderMaterial.setVector3('iCenter', new Vector3(this.world.camera.center.x, this.world.camera.center.y, this.world.camera.center.z));
        this.shaderMaterial.setVector3('iCamera', new Vector3(this.world.camera.position.x, this.world.camera.position.y, this.world.camera.position.z));
        results = [];
        for (i = m = 256; m < 512; i = ++m) {
            results.push(this.world.keys[i] = 0);
        }
        return results;
    };

    return Shader;

})();

module.exports = Shader;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZGVyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUE0SCxPQUFBLENBQVEsV0FBUixDQUE1SCxFQUFFLG1CQUFGLEVBQVUsZUFBVixFQUFnQiw2QkFBaEIsRUFBNkIsMkJBQTdCLEVBQXlDLDZDQUF6QyxFQUE4RCxpQkFBOUQsRUFBcUUsbUNBQXJFLEVBQXFGLHFCQUFyRixFQUE4RixxQkFBOUYsRUFBdUcscUJBQXZHLEVBQWdIOztBQUM5RyxjQUFnQixPQUFBLENBQVEsWUFBUjs7QUFDbEIsT0FBa0IsT0FBQSxDQUFRLEtBQVIsQ0FBbEIsRUFBRSxnQkFBRixFQUFROztBQUVGO0lBRUMsZ0JBQUMsS0FBRDtBQUVDLFlBQUE7UUFGQSxJQUFDLENBQUEsUUFBRDtRQUVBLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBQyxDQUFBLEtBQUssQ0FBQztRQUNoQixJQUFDLENBQUEsVUFBRCxHQUFjO1FBQ2QsSUFBQyxDQUFBLE9BQUQsR0FBVztRQUNYLElBQUMsQ0FBQSxRQUFELEdBQVk7UUFFWixJQUFBLENBQUssVUFBQSxHQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQXpCLEdBQStCLEdBQS9CLEdBQWtDLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQXJEO0FBQ0EsYUFBUyx5QkFBVDtZQUNJLE1BQUEsR0FBUyxJQUFJLFNBQUosQ0FBYyxDQUFBLEdBQUUsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBaEIsR0FBc0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBbEQ7WUFDVCxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBYyxNQUFkO1lBQ0EsQ0FBQSxHQUFJLE1BQU0sQ0FBQztBQUNYLGlCQUFTLHlCQUFUO2dCQUNJLE1BQU8sQ0FBQSxDQUFBLEdBQUUsQ0FBRixDQUFQLEdBQWdCO2dC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QUFpQyxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUEvQyxDQUF6QztRQUNBLElBQUMsQ0FBQSxjQUFjLENBQUMsVUFBaEIsQ0FBMkIsU0FBM0IsRUFBeUMsSUFBSSxPQUFKLENBQVksSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQWpDLEVBQW9DLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUF6RCxFQUE0RCxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBakYsQ0FBekM7UUFDQSxJQUFDLENBQUEsY0FBYyxDQUFDLFVBQWhCLENBQTJCLFNBQTNCLEVBQXlDLElBQUksT0FBSixDQUFZLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFuQyxFQUFzQyxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBN0QsRUFBZ0UsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQXZGLENBQXpDO0FBRUE7YUFBUyw2QkFBVDt5QkFDSSxJQUFDLENBQUEsS0FBSyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQVosR0FBaUI7QUFEckI7O0lBckNJOzs7Ozs7QUF3Q1osTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbiAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMCAgMDAwMDAwMDAgICBcbjAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICBcbjAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgICBcbiAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICBcbjAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiMjI1xuXG57IEVuZ2luZSwgTWVzaCwgTWVzaEJ1aWxkZXIsIFJhd1RleHR1cmUsIFJlbmRlclRhcmdldFRleHR1cmUsIFNjZW5lLCBTaGFkZXJNYXRlcmlhbCwgVGV4dHVyZSwgVmVjdG9yMiwgVmVjdG9yMywgVmVjdG9yNCB9ID0gcmVxdWlyZSAnYmFieWxvbmpzJ1xueyBwZXJmb3JtYW5jZSB9ID0gcmVxdWlyZSAncGVyZl9ob29rcydcbnsga2xvZywgc2xhc2ggfSA9IHJlcXVpcmUgJ2t4aydcbiAgICAgICAgXG5jbGFzcyBTaGFkZXJcbiAgICBcbiAgICBAOiAoQHdvcmxkKSAtPlxuXG4gICAgICAgIEBzY2VuZSA9IEB3b3JsZC5zY2VuZVxuICAgICAgICBAZnJhbWVSYXRlcyA9IFtdXG4gICAgICAgIEBidWZmZXJzID0gW11cbiAgICAgICAgQHRleHR1cmVzID0gW11cblxuICAgICAgICBrbG9nIFwiYnVmZmVycyAje0B3b3JsZC5jYW52YXMud2lkdGh9eCN7QHdvcmxkLmNhbnZhcy5oZWlnaHR9XCJcbiAgICAgICAgZm9yIGkgaW4gWzAuLi4zXVxuICAgICAgICAgICAgYnVmZmVyID0gbmV3IEludDhBcnJheSA0KkB3b3JsZC5jYW52YXMud2lkdGgqQHdvcmxkLmNhbnZhcy5oZWlnaHRcbiAgICAgICAgICAgIEBidWZmZXJzLnB1c2ggYnVmZmVyXG4gICAgICAgICAgICBsID0gYnVmZmVyLmxlbmd0aFxuICAgICAgICAgICAgZm9yIGogaW4gWzAuLi4yXVxuICAgICAgICAgICAgICAgIGJ1ZmZlcltqKjRdICAgPSAyNTVcbiAgICAgICAgICAgICAgICBidWZmZXJbaio0KzFdID0gMjU1XG4gICAgICAgICAgICAgICAgYnVmZmVyW2oqNCsyXSA9IDI1NVxuICAgICAgICAgICAgICAgIGJ1ZmZlcltqKjQrM10gPSAyNTVcbiAgICAgICAgICAgICMgQHRleHR1cmVzLnB1c2ggUmF3VGV4dHVyZS5DcmVhdGVSR0JBVGV4dHVyZSBidWZmZXIsIEB3b3JsZC5jYW52YXMud2lkdGgsIEB3b3JsZC5jYW52YXMuaGVpZ2h0LCBcbiAgICAgICAgICAgICAgICAjIEBzY2VuZSwgZmFsc2UsIGZhbHNlLCBUZXh0dXJlLk5FQVJFU1RfU0FNUExJTkdNT0RFLCBFbmdpbmUuVEVYVFVSRVRZUEVfRkxPQVRcbiAgICAgICAgICAgIEB0ZXh0dXJlcy5wdXNoIG5ldyBSYXdUZXh0dXJlIGJ1ZmZlciwgQHdvcmxkLmNhbnZhcy53aWR0aCwgQHdvcmxkLmNhbnZhcy5oZWlnaHQsIEVuZ2luZS5URVhUVVJFRk9STUFUX1JHQkEsXG4gICAgICAgICAgICAgICAgQHNjZW5lLCBmYWxzZSwgZmFsc2UsIFRleHR1cmUuTkVBUkVTVF9TQU1QTElOR01PREUsIEVuZ2luZS5URVhUVVJFVFlQRV9CWVRFXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIEB0ZXh0dXJlc1sxXSA9IG5ldyBUZXh0dXJlKFwiI3tfX2Rpcm5hbWV9Ly4uL2ltZy9mb250LnBuZ1wiLCBAc2NlbmUpXG4gICAgICAgIFxuICAgICAgICBAaUZyYW1lID0gMFxuICAgICAgICBAdmVydGV4U2hhZGVyID0gIFwiXCJcIlxuICAgICAgICAgICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgICAgICAgICAgYXR0cmlidXRlIHZlYzMgcG9zaXRpb247XG4gICAgICAgICAgICBhdHRyaWJ1dGUgdmVjMiB1djtcbiAgICAgICAgICAgIHVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uO1xuICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIHtcbiAgICAgICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgIFxyXG4gICAgICAgICMgZnJhZ1NvdXJjZSA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci9ncmFwaC5mcmFnXCJcbiAgICAgICAgIyBmcmFnU291cmNlID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vc2hhZGVyL2thbGFtYXJpLmZyYWdcIlxuICAgICAgICAjIGZyYWdTb3VyY2UgPSBzbGFzaC5yZWFkVGV4dCBcIiN7X19kaXJuYW1lfS8uLi9zaGFkZXIva2FsYW1hcmlfYmx1ZXByaW50LmZyYWdcIlxuICAgICAgICAjIGZyYWdTb3VyY2UgPSBzbGFzaC5yZWFkVGV4dCBcIiN7X19kaXJuYW1lfS8uLi9zaGFkZXIva3JhcC5mcmFnXCJcbiAgICAgICAgIyBmcmFnU291cmNlID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vc2hhZGVyL3R3aXN0LmZyYWdcIlxuICAgICAgICAjIGZyYWdTb3VyY2UgPSBzbGFzaC5yZWFkVGV4dCBcIiN7X19kaXJuYW1lfS8uLi9zaGFkZXIvd29ybS5mcmFnXCJcbiAgICAgICAgIyBmcmFnU291cmNlID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vc2hhZGVyL2tlcmwuZnJhZ1wiXG4gICAgICAgICMgZnJhZ1NvdXJjZSA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci9hc3Ryby5mcmFnXCJcbiAgICAgICAgIyBmcmFnU291cmNlID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vc2hhZGVyL2FzdHJvX25vcXVhdC5mcmFnXCJcbiAgICAgICAgZnJhZ1NvdXJjZSA9IHNsYXNoLnJlYWRUZXh0IFwiI3tfX2Rpcm5hbWV9Ly4uL3NoYWRlci9mb2xsb3cuZnJhZ1wiXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBAdW5pZm9ybXMgPSBbXG4gICAgICAgICAgICAnd29ybGRWaWV3UHJvamVjdGlvbicgJ2lNcycgJ2lEaXN0JyAnaU1heERpc3QnICdpTWluRGlzdCcgXG4gICAgICAgICAgICAnaUNlbnRlcicgJ2lDYW1lcmEnICdpRnJhbWVSYXRlJyBcbiAgICAgICAgICAgICdpRGVsdGEnICdpVGltZScgJ2lUaW1lRGVsdGEnICdpTW91c2UnICdpUmVzb2x1dGlvbicgXG4gICAgICAgICAgICAnaVJvdGF0ZScgJ2lEZWdyZWUnICdpRnJhbWUnICdpQ29tcGlsZSdcbiAgICAgICAgXVxuICAgICAgICAgICAgXG4gICAgICAgIEBzaGFkZXJTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCBcInNoYWRlclwiLCBAc2NlbmUsICBcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTb3VyY2U6ICBAdmVydGV4U2hhZGVyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRTb3VyY2U6QHNoYWRlckNvZGUgZnJhZ1NvdXJjZSBcbiAgICAgICAgICAgICxcclxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogWydwb3NpdGlvbicgJ25vcm1hbCcgJ3V2J11cbiAgICAgICAgICAgICAgICB1bmlmb3JtczogICBAdW5pZm9ybXNcbiAgICAgICAgICAgIFxuICAgICAgICBAcGxhbmUgPSBNZXNoQnVpbGRlci5DcmVhdGVQbGFuZSBcInBsYW5lXCIsIHsgd2lkdGg6IDEwLCBoZWlnaHQ6IDEwIH0sIEBzY2VuZVxuICAgICAgICBAcGxhbmUubWF0ZXJpYWwgPSBAc2hhZGVyTWF0ZXJpYWxcbiAgICAgICAgQHBsYW5lLmJpbGxib2FyZE1vZGUgPSBNZXNoLkJJTExCT0FSRE1PREVfQUxMXG4gICAgICAgIFxuICAgICAgICBAcGxhbmVGYWtlID0gTWVzaEJ1aWxkZXIuQ3JlYXRlUGxhbmUgXCJwbGFuZUZha2VcIiwgeyB3aWR0aDogMSwgaGVpZ2h0OiAxIH0sIEBzY2VuZVxuICAgICAgICBAcGxhbmVGYWtlLmJpbGxib2FyZE1vZGUgPSBNZXNoLkJJTExCT0FSRE1PREVfQUxMXG4gICAgICAgIFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwub25Db21waWxlZCA9ID0+IFxuICAgICAgICAgICAgQGNvbXBpbGVUaW1lID0gcGFyc2VJbnQgcGVyZm9ybWFuY2Uubm93KCktQHNoYWRlclN0YXJ0XG4gICAgICAgICAgICBrbG9nIFwiY29tcGlsZVRpbWUgI3tAY29tcGlsZVRpbWUvMTAwMH1zXCIgXG4gICAgICAgICAgICBcbiAgICAgICAgQHJlbmRlckJ1ZmZlcnMoKVxuICAgICAgICBcbiAgICBzaGFkZXJDb2RlOiAoZnJhZ1NvdXJjZSkgLT5cbiAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGlUaW1lO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpVGltZURlbHRhO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpRnJhbWVSYXRlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpTXM7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGlDb21waWxlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpRGlzdDtcbiAgICAgICAgICAgIHVuaWZvcm0gZmxvYXQgaU1pbkRpc3Q7XG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGlNYXhEaXN0O1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpUm90YXRlO1xuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBpRGVncmVlO1xuICAgICAgICAgICAgdW5pZm9ybSB2ZWMyICBpRGVsdGE7XG4gICAgICAgICAgICB1bmlmb3JtIHZlYzQgIGlNb3VzZTtcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMiAgaVJlc29sdXRpb247XG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgIGlDZW50ZXI7XG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgIGlDYW1lcmE7XG4gICAgICAgICAgICB1bmlmb3JtIGludCAgIGlGcmFtZTtcbiAgICAgICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIGlDaGFubmVsMDtcbiAgICAgICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIGlDaGFubmVsMTtcbiAgICAgICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIGlDaGFubmVsMjtcbiAgICAgICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIGlDaGFubmVsMztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgI3tmcmFnU291cmNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB2b2lkIG1haW4odm9pZCkgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWFpbkltYWdlKGdsX0ZyYWdDb2xvciwgZ2xfRnJhZ0Nvb3JkLnh5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFwiXCJcIlxuICAgICAgICBcbiAgICByZW5kZXJCdWZmZXJzOiAtPlxuICAgICAgICBcbiAgICAgICAgYnVmZmVyU291cmNlID0gc2xhc2gucmVhZFRleHQgXCIje19fZGlybmFtZX0vLi4vc2hhZGVyL2J1ZmZlci5mcmFnXCJcbiAgICAgICAgXG4gICAgICAgIEBzY2VuZUZha2UgID0gbmV3IFNjZW5lIEBcbiAgICAgICAgQGJ1ZmZlck1hdGVyaWFsID0gbmV3IFNoYWRlck1hdGVyaWFsIFwiYnVmZmVyU2hhZGVyXCIsIEBzY2VuZSwgIFxuICAgICAgICAgICAgICAgIHZlcnRleFNvdXJjZTogIEB2ZXJ0ZXhTaGFkZXJcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNvdXJjZTpAc2hhZGVyQ29kZSBidWZmZXJTb3VyY2VcbiAgICAgICAgICAgICxcclxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogWydwb3NpdGlvbicgJ25vcm1hbCcgJ3V2J11cbiAgICAgICAgICAgICAgICB1bmlmb3JtczogICBAdW5pZm9ybXNcbiAgICAgICAgXG4gICAgICAgIEBwbGFuZTIgPSBNZXNoQnVpbGRlci5DcmVhdGVQbGFuZSBcInBsYW5lMlwiLCB7IHdpZHRoOiAxLCBoZWlnaHQ6IDEgfSwgQHNjZW5lXG4gICAgICAgIEBwbGFuZTIubWF0ZXJpYWwgPSBAYnVmZmVyTWF0ZXJpYWxcbiAgICAgICAgQHBsYW5lMi5iaWxsYm9hcmRNb2RlID0gTWVzaC5CSUxMQk9BUkRNT0RFX0FMTFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBAcmVuZGVyVGFyZ2V0ID0gbmV3IFJlbmRlclRhcmdldFRleHR1cmUgXCJidWZcIiwgIHt3aWR0aDpAd29ybGQuY2FudmFzLndpZHRoLCBoZWlnaHQ6QHdvcmxkLmNhbnZhcy5oZWlnaHR9LCBAc2NlbmUsIGZhbHNlXG4gICAgICAgIEByZW5kZXJUYXJnZXQucmVuZGVyTGlzdC5wdXNoIEBwbGFuZTJcbiAgICAgICAgQHNjZW5lLmN1c3RvbVJlbmRlclRhcmdldHMucHVzaCBAcmVuZGVyVGFyZ2V0XG4gICAgXHJcbiAgICAgICAgQHJ0dE1hdGVyaWFsID0gbmV3IEJBQllMT04uU3RhbmRhcmRNYXRlcmlhbCBcIlJUVCBtYXRlcmlhbFwiLCBAc2NlbmVcbiAgICAgICAgQHJ0dE1hdGVyaWFsLmVtaXNzaXZlVGV4dHVyZSA9IEByZW5kZXJUYXJnZXRcbiAgICAgICAgQHJ0dE1hdGVyaWFsLmRpc2FibGVMaWdodGluZyA9IHRydWVcbiAgICAgICAgQHBsYW5lRmFrZS5tYXRlcmlhbCA9IEBydHRNYXRlcmlhbFxuICAgICAgICBcbiAgICAgICAgIyBAcmVuZGVyVGFyZ2V0Lm9uQmVmb3JlUmVuZGVyID0gKCkgPT4gXG4gICAgICAgICAgICAjIEBwbGFuZTIucG9zaXRpb24uY29weUZyb20gQHdvcmxkLmNhbWVyYS5wb3NpdGlvbi5hZGQgQHdvcmxkLmNhbWVyYS5nZXREaXIoKS5zY2FsZSAyXG4gICAgICAgICAgICAjIEBwbGFuZS5tYXRlcmlhbCA9IEBidWZmZXJNYXRlcmlhbFxuICAgICAgICAjIEByZW5kZXJUYXJnZXQub25BZnRlclJlbmRlciA9ICgpID0+IFxuICAgICAgICAgICAgIyBAcGxhbmUubWF0ZXJpYWwgPSBAc2hhZGVyTWF0ZXJpYWxcbiAgICAgICAgICAgIFxuICAgICAgICAjIEBzY2VuZS5vbkFmdGVyUmVuZGVyVGFyZ2V0c1JlbmRlck9ic2VydmFibGUuYWRkID0+IFxuICAgICAgICAgICAgXG4gICAgICAgICMgQGZpbmFsUGFzcyA9IG5ldyBQb3N0UHJvY2VzcyhcclxuICAgICAgICAgICAgIyAnRmluYWwgY29tcG9zZSBzaGFkZXInLCBcclxuICAgICAgICAgICAgIyAnZmluYWwnLFxuICAgICAgICAgICAgIyBudWxsLFxuICAgICAgICAgICAgIyBbXSwgIyBbICdjYXVzdGljVGV4dHVyZScgXSxcbiAgICAgICAgICAgICMgMS4wLCBcbiAgICAgICAgICAgICMgbnVsbCxcbiAgICAgICAgICAgICMgQkFCWUxPTi5UZXh0dXJlLkJJTElORUFSX1NBTVBMSU5HTU9ERSxcbiAgICAgICAgICAgICMgQGVuZ2luZSlcbiAgICAgICAgICAgIFxuICAgIHJlbmRlcjogLT5cbiAgICAjIHJlbmRlck1haW46IC0+XG5cbiAgICAgICAgQHBsYW5lLnBvc2l0aW9uLmNvcHlGcm9tIEB3b3JsZC5jYW1lcmEucG9zaXRpb24uYWRkIEB3b3JsZC5jYW1lcmEuZ2V0RGlyKCkuc2NhbGUgMlxuICAgICAgICAgICAgICAgIFxuICAgICAgICBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb1xuICAgICAgICBcbiAgICAgICAgbW91c2VYID0gQHdvcmxkLmNhbWVyYS5tb3VzZVggPyAwO1xuICAgICAgICBtb3VzZVkgPSBAd29ybGQuY2FtZXJhLm1vdXNlWSA/IEB3b3JsZC5jYW52YXMuaGVpZ2h0L2RwcjtcbiAgICAgICAgXG4gICAgICAgIEBmcmFtZVJhdGVzLnB1c2ggQHdvcmxkLmVuZ2luZS5nZXRGcHMoKVxuICAgICAgICBpZiBAZnJhbWVSYXRlcy5sZW5ndGggPiAzMCB0aGVuIEBmcmFtZVJhdGVzLnNoaWZ0KClcbiAgICAgICAgZnBzID0gMFxuICAgICAgICBmb3IgciBpbiBAZnJhbWVSYXRlcyB0aGVuIGZwcyArPSByXG4gICAgICAgIGZwcyAvPSBAZnJhbWVSYXRlcy5sZW5ndGhcblxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0VGV4dHVyZSAnaUNoYW5uZWwwJyAgIFJhd1RleHR1cmUuQ3JlYXRlUlRleHR1cmUgQHdvcmxkLmtleXMsIDI1NiwgMywgQHNjZW5lLCBmYWxzZVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0VGV4dHVyZSAnaUNoYW5uZWwxJyAgIEB0ZXh0dXJlc1swXVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0VGV4dHVyZSAnaUNoYW5uZWwyJyAgIEB0ZXh0dXJlc1sxXVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0VGV4dHVyZSAnaUNoYW5uZWwzJyAgIEB0ZXh0dXJlc1syXVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0SW50ICAgICAnaUZyYW1lJyAgICAgIEBpRnJhbWUrK1xuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaUZyYW1lUmF0ZScgIE1hdGgucm91bmQgZnBzXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5zZXRGbG9hdCAgICdpTXMnICAgICAgICAgQHdvcmxkLmVuZ2luZS5nZXREZWx0YVRpbWUoKVxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaUNvbXBpbGUnICAgIEBjb21waWxlVGltZS8xMDAwXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5zZXRGbG9hdCAgICdpVGltZScgICAgICAgcGVyZm9ybWFuY2Uubm93KCkvMTAwMFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaVRpbWVEZWx0YScgIEB3b3JsZC5lbmdpbmUuZ2V0RGVsdGFUaW1lKCkvMTAwMFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaURpc3QnICAgICAgIEB3b3JsZC5jYW1lcmEuZGlzdFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaU1pbkRpc3QnICAgIEB3b3JsZC5jYW1lcmEubWluRGlzdFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaU1heERpc3QnICAgIEB3b3JsZC5jYW1lcmEubWF4RGlzdFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQgICAnaVJvdGF0ZScgICAgIEB3b3JsZC5jYW1lcmEucm90YXRlXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5zZXRGbG9hdCAgICdpRGVncmVlJyAgICAgQHdvcmxkLmNhbWVyYS5kZWdyZWVcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldFZlY3RvcjIgJ2lEZWx0YScgICAgICBuZXcgVmVjdG9yMihAd29ybGQuY2FtZXJhLm1vdXNlRGVsdGEueCwgQHdvcmxkLmNhbWVyYS5tb3VzZURlbHRhLnkpIFxuICAgICAgICBAc2hhZGVyTWF0ZXJpYWwuc2V0VmVjdG9yNCAnaU1vdXNlJyAgICAgIG5ldyBWZWN0b3I0KG1vdXNlWCpkcHIsIEB3b3JsZC5jYW52YXMuaGVpZ2h0LW1vdXNlWSpkcHIsIEB3b3JsZC5jYW1lcmEuZG93bkJ1dHRvbnMsIDApXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5zZXRWZWN0b3IyICdpUmVzb2x1dGlvbicgbmV3IFZlY3RvcjIoQHdvcmxkLmNhbnZhcy53aWR0aCwgQHdvcmxkLmNhbnZhcy5oZWlnaHQpXG4gICAgICAgIEBzaGFkZXJNYXRlcmlhbC5zZXRWZWN0b3IzICdpQ2VudGVyJyAgICAgbmV3IFZlY3RvcjMoQHdvcmxkLmNhbWVyYS5jZW50ZXIueCwgQHdvcmxkLmNhbWVyYS5jZW50ZXIueSwgQHdvcmxkLmNhbWVyYS5jZW50ZXIueilcbiAgICAgICAgQHNoYWRlck1hdGVyaWFsLnNldFZlY3RvcjMgJ2lDYW1lcmEnICAgICBuZXcgVmVjdG9yMyhAd29ybGQuY2FtZXJhLnBvc2l0aW9uLngsIEB3b3JsZC5jYW1lcmEucG9zaXRpb24ueSwgQHdvcmxkLmNhbWVyYS5wb3NpdGlvbi56KVxuICAgICAgICAgICAgXG4gICAgICAgIGZvciBpIGluIFsyNTYuLi41MTJdIFxuICAgICAgICAgICAgQHdvcmxkLmtleXNbaV0gPSAwXG4gICAgICAgIFxubW9kdWxlLmV4cG9ydHMgPSBTaGFkZXJcbiJdfQ==
//# sourceURL=../coffee/shader.coffee