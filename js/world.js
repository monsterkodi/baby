// koffee 1.6.0

/*
000   000   0000000   00000000   000      0000000    
000 0 000  000   000  000   000  000      000   000  
000000000  000   000  0000000    000      000   000  
000   000  000   000  000   000  000      000   000  
00     00   0000000   000   000  0000000  0000000
 */
var Camera, Color3, DirectionalLight, Engine, HemisphericLight, MeshBuilder, Scene, Shader, Shapes, Space, StandardMaterial, Tree, Vect, Vector3, World, animate, elem, generate, klog, prefs, ref, ref1, vec, ϕ,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('kxk'), elem = ref.elem, klog = ref.klog, prefs = ref.prefs;

ref1 = require('babylonjs'), Camera = ref1.Camera, Color3 = ref1.Color3, DirectionalLight = ref1.DirectionalLight, Engine = ref1.Engine, HemisphericLight = ref1.HemisphericLight, MeshBuilder = ref1.MeshBuilder, Scene = ref1.Scene, Space = ref1.Space, StandardMaterial = ref1.StandardMaterial, Vector3 = ref1.Vector3;

vec = require('./poly/math').vec;

generate = require('./poly/generate');

Vect = require('./vect');

Camera = require('./camera');

Scene = require('./scene');

Space = require('./space');

Tree = require('./tree');

Shapes = require('./shapes');

Shader = require('./shader');

animate = require('./animate');

ϕ = (Math.sqrt(5) - 1) / 2;

World = (function() {
    function World(view) {
        var a, c1, c2, c3, c4, ground, hemi, light, n1, n2, n3, n4, vx, vy;
        this.view = view;
        this.resized = bind(this.resized, this);
        this.animate = bind(this.animate, this);
        this.onMouseUp = bind(this.onMouseUp, this);
        this.onMouseMove = bind(this.onMouseMove, this);
        this.onMouseDown = bind(this.onMouseDown, this);
        this.paused = false;
        this.view.focus();
        this.canvas = elem('canvas', {
            "class": 'babylon',
            parent: this.view
        });
        this.engine = new Engine(this.canvas);
        this.scene = new Scene(this);
        this.shapes = new Shapes(this.scene);
        this.resized();
        a = 0.0;
        this.scene.clearColor = new Color3(a, a, a);
        this.camera = new Camera(this);
        hemi = new HemisphericLight('hemi', new Vector3(0, 1, 0), this.scene);
        hemi.intensity = 0.5;
        light = new DirectionalLight('light', new Vector3(0, -1, 0), this.scene);
        light.position.y = 3;
        this.scene.initFog();
        if (0) {
            ground = MeshBuilder.CreateGround('ground', {
                width: 1000,
                height: 1000,
                subdivisions: 4
            }, this.scene);
            ground.material = new StandardMaterial('ground', this.scene);
            ground.material.specularColor = new Color3(0.05, 0.05, 0.05);
            a = 0.05;
            ground.material.diffuseColor = new Color3(a, a, a);
            ground.receiveShadows = true;
            ground.position.y = -2;
        }
        this.cursor = MeshBuilder.CreateIcoSphere('cursor', {
            flat: false,
            radius: 1.1
        }, this.scene);
        this.cursor.material = new StandardMaterial('mat', this.scene);
        this.cursor.material.diffuseColor = new Color3(0.05, 0.05, 0.05);
        this.cursor.material.specularColor = new Color3(0, 0, 0);
        this.cursor.material.alpha = 0.5;
        this.cursor.position = [0, -1000, 0];
        this.cursor.backFaceCulling = true;
        this.cursor = this.cursor.flipFaces(true);
        this.engine.runRenderLoop(this.animate);
        if (prefs.get('inspector')) {
            this.toggleInspector();
        }
        window.addEventListener('pointerdown', this.onMouseDown);
        window.addEventListener('pointermove', this.onMouseMove);
        window.addEventListener('pointerup', this.onMouseUp);
        vy = vec(0, 1, 0);
        vx = vec(1, 0, 0);
        c1 = vec(1.0, 1.0, 1.0).normalize().rotate(vy, -45.0).rotate(vx, -54.735);
        c2 = vec(1.0, -1.0, -1.0).normalize().rotate(vy, -45.0).rotate(vx, -54.735);
        c3 = vec(-1.0, 1.0, -1.0).normalize().rotate(vy, -45.0).rotate(vx, -54.735);
        c4 = vec(-1.0, -1.0, 1.0).normalize().rotate(vy, -45.0).rotate(vx, -54.735);
        n1 = c1.minus(c4).crossed(c4.minus(c2)).normalize();
        n2 = c2.minus(c3).crossed(c3.minus(c1)).normalize();
        n3 = c3.minus(c2).crossed(c2.minus(c4)).normalize();
        n4 = c4.minus(c1).crossed(c1.minus(c3)).normalize();
        klog("vec3 c1 = vec3(" + c1.x + ", " + c1.y + ", " + c1.z + ");");
        klog("vec3 c2 = vec3(" + c2.x + ", " + c2.y + ", " + c2.z + ");");
        klog("vec3 c3 = vec3(" + c3.x + ", " + c3.y + ", " + c3.z + ");");
        klog("vec3 c4 = vec3(" + c4.x + ", " + c4.y + ", " + c4.z + ");");
        klog("vec3 n1 = vec3(" + n1.x + ", " + n1.y + ", " + n1.z + ");");
        klog("vec3 n2 = vec3(" + n2.x + ", " + n2.y + ", " + n2.z + ");");
        klog("vec3 n3 = vec3(" + n3.x + ", " + n3.y + ", " + n3.z + ");");
        klog("vec3 n4 = vec3(" + n4.x + ", " + n4.y + ", " + n4.z + ");");
        this.shader = new Shader(this);
    }

    World.prototype.onMouseDown = function(event) {
        this.mouseDownMesh = this.pickedMesh();
        return this.camera.onMouseDown(event);
    };

    World.prototype.onMouseMove = function(event) {
        var mesh;
        this.camera.onMouseDrag(event);
        if (mesh = this.pickedMesh()) {
            return this.scene.legend.show(mesh.name);
        } else {
            return this.scene.legend.show(this.legendMesh);
        }
    };

    World.prototype.onMouseUp = function(event) {
        var mesh;
        if (mesh = this.pickedMesh()) {
            if (mesh === this.mouseDownMesh) {
                this.cursor.position = mesh.getAbsolutePosition();
                this.camera.fadeToPos(mesh.getAbsolutePosition());
                this.scene.legend.show(mesh.name);
                this.legendMesh = mesh.name;
            }
        } else if (!this.mouseDownMesh) {
            this.cursor.position = [0, -1000, 0];
            this.scene.legend.hide();
            this.legendMesh = null;
        }
        return this.camera.onMouseUp(event);
    };

    World.prototype.pickedMesh = function() {
        var ref2, ref3, result;
        return null;
        if (result = this.scene.pick(this.scene.pointerX, this.scene.pointerY, function(m) {
            var ref2;
            return (ref2 = m.name) !== 'ground' && ref2 !== 'cursor';
        })) {
            if ((ref2 = (ref3 = result.pickedMesh) != null ? ref3.name : void 0) === 'faces' || ref2 === 'normals') {
                return result.pickedMesh.parent;
            } else {
                return result.pickedMesh;
            }
        }
    };

    World.prototype.highlight = function(mesh) {
        var ref2, ref3, ref4, ref5;
        if ((ref2 = this.highlightMesh) != null) {
            if ((ref3 = ref2.material) != null) {
                ref3.diffuseColor = this.preHighlightColor;
            }
        }
        this.preHighlightColor = mesh != null ? (ref4 = mesh.material) != null ? ref4.diffuseColor : void 0 : void 0;
        if (mesh != null) {
            if ((ref5 = mesh.material) != null) {
                ref5.diffuseColor = this.preHighlightColor.multiply(new Color3(1.5, 1.5, 1.5));
            }
        }
        return this.highlightMesh = mesh;
    };

    World.prototype.toggleInspector = function() {
        if (this.scene.debugLayer.isVisible()) {
            this.scene.debugLayer.hide();
            return prefs.set('inspector', false);
        } else {
            this.scene.debugLayer.show({
                overlay: true,
                showInspector: true
            });
            return prefs.set('inspector', true);
        }
    };

    World.prototype.start = function() {
        return this.view.focus();
    };

    World.prototype.animate = function() {
        var ref2, ref3, ref4;
        if (!this.paused) {
            if ((ref2 = this.space) != null) {
                ref2.render();
            }
            if ((ref3 = this.tree) != null) {
                ref3.render();
            }
            if ((ref4 = this.shader) != null) {
                ref4.render();
            }
            this.camera.render();
            this.scene.render();
            return animate.tick(this.engine.getDeltaTime() / 1000);
        }
    };

    World.prototype.resized = function() {
        var dpr;
        dpr = window.devicePixelRatio;
        this.engine.setSize(this.view.clientWidth * dpr, this.view.clientHeight * dpr);
        this.canvas.style.transform = "scale(" + (1 / dpr) + ")";
        return this.canvas.style.transformOrigin = "top left";
    };

    World.prototype.modKeyComboEventDown = function(mod, key, combo, event) {
        switch (key) {
            case 'e':
                return this.camera.moveUp();
            case 'q':
                return this.camera.moveDown();
            case 'a':
                return this.camera.moveLeft();
            case 'd':
                return this.camera.moveRight();
            case 'w':
                return this.camera.moveForward();
            case 's':
                return this.camera.moveBackward();
            case 'x':
            case 'esc':
                return this.camera.stopMoving();
            case 'r':
                return this.camera.reset();
        }
    };

    World.prototype.modKeyComboEventUp = function(mod, key, combo, event) {
        switch (key) {
            case 'e':
                return this.camera.stopUp();
            case 'q':
                return this.camera.stopDown();
            case 'a':
                return this.camera.stopLeft();
            case 'd':
                return this.camera.stopRight();
            case 'w':
                return this.camera.stopForward();
            case 's':
                return this.camera.stopBackward();
        }
    };

    return World;

})();

module.exports = World;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ybGQuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBLDRNQUFBO0lBQUE7O0FBUUEsTUFBd0IsT0FBQSxDQUFRLEtBQVIsQ0FBeEIsRUFBRSxlQUFGLEVBQVEsZUFBUixFQUFjOztBQUNkLE9BQXVILE9BQUEsQ0FBUSxXQUFSLENBQXZILEVBQUUsb0JBQUYsRUFBVSxvQkFBVixFQUFrQix3Q0FBbEIsRUFBb0Msb0JBQXBDLEVBQTRDLHdDQUE1QyxFQUE4RCw4QkFBOUQsRUFBMkUsa0JBQTNFLEVBQWtGLGtCQUFsRixFQUF5Rix3Q0FBekYsRUFBMkc7O0FBQ3pHLE1BQVEsT0FBQSxDQUFRLGFBQVI7O0FBQ1YsUUFBQSxHQUFXLE9BQUEsQ0FBUSxpQkFBUjs7QUFDWCxJQUFBLEdBQVcsT0FBQSxDQUFRLFFBQVI7O0FBQ1gsTUFBQSxHQUFXLE9BQUEsQ0FBUSxVQUFSOztBQUNYLEtBQUEsR0FBVyxPQUFBLENBQVEsU0FBUjs7QUFDWCxLQUFBLEdBQVcsT0FBQSxDQUFRLFNBQVI7O0FBQ1gsSUFBQSxHQUFXLE9BQUEsQ0FBUSxRQUFSOztBQUNYLE1BQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFDWCxNQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBQ1gsT0FBQSxHQUFXLE9BQUEsQ0FBUSxXQUFSOztBQUVYLENBQUEsR0FBSSxDQUFDLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBVixDQUFBLEdBQWEsQ0FBZCxDQUFBLEdBQWlCOztBQUVmO0lBRUMsZUFBQyxJQUFEO0FBRUMsWUFBQTtRQUZBLElBQUMsQ0FBQSxPQUFEOzs7Ozs7UUFFQSxJQUFDLENBQUEsTUFBRCxHQUFVO1FBQ1YsSUFBQyxDQUFBLElBQUksQ0FBQyxLQUFOLENBQUE7UUFFQSxJQUFDLENBQUEsTUFBRCxHQUFVLElBQUEsQ0FBSyxRQUFMLEVBQWM7WUFBQSxDQUFBLEtBQUEsQ0FBQSxFQUFNLFNBQU47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QixJQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBQTtBQUpsQixpQkFLUyxHQUxUO3VCQUtrQixJQUFDLENBQUEsTUFBTSxDQUFDLFdBQVIsQ0FBQTtBQUxsQixpQkFNUyxHQU5UO3VCQU1rQixJQUFDLENBQUEsTUFBTSxDQUFDLFlBQVIsQ0FBQTtBQU5sQixpQkFPUyxHQVBUO0FBQUEsaUJBT2EsS0FQYjt1QkFPd0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxVQUFSLENBQUE7QUFQeEIsaUJBUVMsR0FSVDt1QkFRa0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxLQUFSLENBQUE7QUFSbEI7SUFIa0I7O29CQWF0QixrQkFBQSxHQUFvQixTQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsS0FBWCxFQUFrQixLQUFsQjtBQUdoQixnQkFBTyxHQUFQO0FBQUEsaUJBQ1MsR0FEVDt1QkFDa0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQUE7QUFEbEIsaUJBRVMsR0FGVDt1QkFFa0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFSLENBQUE7QUFGbEIsaUJBR1MsR0FIVDt1QkFHa0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxRQUFSLENBQUE7QUFIbEIsaUJBSVMsR0FKVDt1QkFJa0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQUE7QUFKbEIsaUJBS1MsR0FMVDt1QkFLa0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxXQUFSLENBQUE7QUFMbEIsaUJBTVMsR0FOVDt1QkFNa0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxZQUFSLENBQUE7QUFObEI7SUFIZ0I7Ozs7OztBQVl4QixNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAgICAgMDAwMDAwMCAgICBcbjAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgXG4wMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAgICAgICAwMDAgICAwMDAgIFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICBcbjAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAgICAgXG4jIyNcblxueyBlbGVtLCBrbG9nLCBwcmVmcyB9ID0gcmVxdWlyZSAna3hrJ1xueyBDYW1lcmEsIENvbG9yMywgRGlyZWN0aW9uYWxMaWdodCwgRW5naW5lLCBIZW1pc3BoZXJpY0xpZ2h0LCBNZXNoQnVpbGRlciwgU2NlbmUsIFNwYWNlLCBTdGFuZGFyZE1hdGVyaWFsLCBWZWN0b3IzIH0gPSByZXF1aXJlICdiYWJ5bG9uanMnXG57IHZlYyB9ID0gcmVxdWlyZSAnLi9wb2x5L21hdGgnXG5nZW5lcmF0ZSA9IHJlcXVpcmUgJy4vcG9seS9nZW5lcmF0ZSdcblZlY3QgICAgID0gcmVxdWlyZSAnLi92ZWN0J1xuQ2FtZXJhICAgPSByZXF1aXJlICcuL2NhbWVyYSdcblNjZW5lICAgID0gcmVxdWlyZSAnLi9zY2VuZSdcblNwYWNlICAgID0gcmVxdWlyZSAnLi9zcGFjZSdcblRyZWUgICAgID0gcmVxdWlyZSAnLi90cmVlJ1xuU2hhcGVzICAgPSByZXF1aXJlICcuL3NoYXBlcydcblNoYWRlciAgID0gcmVxdWlyZSAnLi9zaGFkZXInXG5hbmltYXRlICA9IHJlcXVpcmUgJy4vYW5pbWF0ZSdcblxuz5UgPSAoTWF0aC5zcXJ0KDUpLTEpLzJcblxuY2xhc3MgV29ybGRcbiAgICBcbiAgICBAOiAoQHZpZXcpIC0+XG4gICAgICAgIFxuICAgICAgICBAcGF1c2VkID0gZmFsc2VcbiAgICAgICAgQHZpZXcuZm9jdXMoKVxuICAgICAgICBcbiAgICAgICAgQGNhbnZhcyA9IGVsZW0gJ2NhbnZhcycgY2xhc3M6J2JhYnlsb24nIHBhcmVudDpAdmlld1xuICAgICAgICBcbiAgICAgICAgQGVuZ2luZSA9IG5ldyBFbmdpbmUgQGNhbnZhc1xuICAgICAgICBcbiAgICAgICAgQHNjZW5lICA9IG5ldyBTY2VuZSBAXG4gICAgICAgIEBzaGFwZXMgPSBuZXcgU2hhcGVzIEBzY2VuZVxuICAgICAgICBAcmVzaXplZCgpXG4gICAgICAgIFxuICAgICAgICBhID0gMC4wICMwLjA2NVxuICAgICAgICBAc2NlbmUuY2xlYXJDb2xvciA9IG5ldyBDb2xvcjMgYSwgYSwgYVxuXG4gICAgICAgIEBjYW1lcmEgPSBuZXcgQ2FtZXJhIEBcbiAgICAgICAgXG4gICAgICAgIGhlbWkgPSBuZXcgSGVtaXNwaGVyaWNMaWdodCAnaGVtaScgbmV3IFZlY3RvcjMoMCAxIDApLCBAc2NlbmVcbiAgICAgICAgaGVtaS5pbnRlbnNpdHkgPSAwLjVcbiAgICAgICAgXG4gICAgICAgIGxpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQgJ2xpZ2h0JyBuZXcgVmVjdG9yMygwIC0xIDApLCBAc2NlbmVcbiAgICAgICAgbGlnaHQucG9zaXRpb24ueSA9IDNcblxuICAgICAgICBAc2NlbmUuaW5pdEZvZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIGlmIDBcbiAgICAgICAgICAgIGdyb3VuZCA9IE1lc2hCdWlsZGVyLkNyZWF0ZUdyb3VuZCAnZ3JvdW5kJyB7d2lkdGg6MTAwMCBoZWlnaHQ6MTAwMCBzdWJkaXZpc2lvbnM6IDR9LCBAc2NlbmVcbiAgICAgICAgICAgIGdyb3VuZC5tYXRlcmlhbCA9IG5ldyBTdGFuZGFyZE1hdGVyaWFsICdncm91bmQnIEBzY2VuZVxuICAgICAgICAgICAgZ3JvdW5kLm1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBuZXcgQ29sb3IzIDAuMDUgMC4wNSAwLjA1XG4gICAgICAgICAgICBhID0gMC4wNVxuICAgICAgICAgICAgZ3JvdW5kLm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IG5ldyBDb2xvcjMgYSwgYSwgYVxuICAgICAgICAgICAgZ3JvdW5kLnJlY2VpdmVTaGFkb3dzID0gdHJ1ZVxuICAgICAgICAgICAgZ3JvdW5kLnBvc2l0aW9uLnkgPSAtMlxuICAgICAgICAgICAgIFxuICAgICAgICBAY3Vyc29yID0gTWVzaEJ1aWxkZXIuQ3JlYXRlSWNvU3BoZXJlICdjdXJzb3InIGZsYXQ6ZmFsc2UgcmFkaXVzOjEuMSwgQHNjZW5lXG4gICAgICAgIEBjdXJzb3IubWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbCAnbWF0JyBAc2NlbmVcbiAgICAgICAgQGN1cnNvci5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBuZXcgQ29sb3IzIDAuMDUgMC4wNSAwLjA1XG4gICAgICAgIEBjdXJzb3IubWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG5ldyBDb2xvcjMgMCAwIDBcbiAgICAgICAgQGN1cnNvci5tYXRlcmlhbC5hbHBoYSA9IDAuNVxuICAgICAgICBAY3Vyc29yLnBvc2l0aW9uID0gWzAgLTEwMDAgMF1cbiAgICAgICAgQGN1cnNvci5iYWNrRmFjZUN1bGxpbmcgPSB0cnVlXG4gICAgICAgIEBjdXJzb3IgPSBAY3Vyc29yLmZsaXBGYWNlcyB0cnVlXG4gICAgICAgIFxuICAgICAgICBAZW5naW5lLnJ1blJlbmRlckxvb3AgQGFuaW1hdGVcbiAgICAgICAgXG4gICAgICAgIGlmIHByZWZzLmdldCAnaW5zcGVjdG9yJ1xuICAgICAgICAgICAgQHRvZ2dsZUluc3BlY3RvcigpXG4gICAgICAgICAgICAgXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVyZG93bicgQG9uTW91c2VEb3duXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVybW92ZScgQG9uTW91c2VNb3ZlXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVydXAnICAgQG9uTW91c2VVcFxuICBcbiAgICAgICAgdnkgPSB2ZWMoMCwxLDApO1xuICAgICAgICB2eCA9IHZlYygxLDAsMCk7XG4gICAgICAgIFxuICAgICAgICBjMSA9IHZlYyggMS4wLCAxLjAsIDEuMCkubm9ybWFsaXplKCkucm90YXRlKHZ5LCAtNDUuMCkucm90YXRlKHZ4LCAtNTQuNzM1KVxuICAgICAgICBjMiA9IHZlYyggMS4wLC0xLjAsLTEuMCkubm9ybWFsaXplKCkucm90YXRlKHZ5LCAtNDUuMCkucm90YXRlKHZ4LCAtNTQuNzM1KVxuICAgICAgICBjMyA9IHZlYygtMS4wLCAxLjAsLTEuMCkubm9ybWFsaXplKCkucm90YXRlKHZ5LCAtNDUuMCkucm90YXRlKHZ4LCAtNTQuNzM1KVxuICAgICAgICBjNCA9IHZlYygtMS4wLC0xLjAsIDEuMCkubm9ybWFsaXplKCkucm90YXRlKHZ5LCAtNDUuMCkucm90YXRlKHZ4LCAtNTQuNzM1KVxuICAgICAgICBcbiAgICAgICAgbjEgPSBjMS5taW51cyhjNCkuY3Jvc3NlZChjNC5taW51cyhjMikpLm5vcm1hbGl6ZSgpXG4gICAgICAgIG4yID0gYzIubWludXMoYzMpLmNyb3NzZWQoYzMubWludXMoYzEpKS5ub3JtYWxpemUoKVxuICAgICAgICBuMyA9IGMzLm1pbnVzKGMyKS5jcm9zc2VkKGMyLm1pbnVzKGM0KSkubm9ybWFsaXplKClcbiAgICAgICAgbjQgPSBjNC5taW51cyhjMSkuY3Jvc3NlZChjMS5taW51cyhjMykpLm5vcm1hbGl6ZSgpXG4gICAgICAgIFxuICAgICAgICBrbG9nIFwidmVjMyBjMSA9IHZlYzMoI3tjMS54fSwgI3tjMS55fSwgI3tjMS56fSk7XCJcbiAgICAgICAga2xvZyBcInZlYzMgYzIgPSB2ZWMzKCN7YzIueH0sICN7YzIueX0sICN7YzIuen0pO1wiXG4gICAgICAgIGtsb2cgXCJ2ZWMzIGMzID0gdmVjMygje2MzLnh9LCAje2MzLnl9LCAje2MzLnp9KTtcIlxuICAgICAgICBrbG9nIFwidmVjMyBjNCA9IHZlYzMoI3tjNC54fSwgI3tjNC55fSwgI3tjNC56fSk7XCJcbiAgICAgICAgICAgICBcbiAgICAgICAga2xvZyBcInZlYzMgbjEgPSB2ZWMzKCN7bjEueH0sICN7bjEueX0sICN7bjEuen0pO1wiXG4gICAgICAgIGtsb2cgXCJ2ZWMzIG4yID0gdmVjMygje24yLnh9LCAje24yLnl9LCAje24yLnp9KTtcIlxuICAgICAgICBrbG9nIFwidmVjMyBuMyA9IHZlYzMoI3tuMy54fSwgI3tuMy55fSwgI3tuMy56fSk7XCJcbiAgICAgICAga2xvZyBcInZlYzMgbjQgPSB2ZWMzKCN7bjQueH0sICN7bjQueX0sICN7bjQuen0pO1wiXG4gICAgICAgIFxuICAgICAgICBAc2hhZGVyID0gbmV3IFNoYWRlciBAXG4gICAgICAgICMgaWYgMFxuICAgICAgICAgICAgIyBAc3BhY2UgPSBuZXcgU3BhY2UgQFxuICAgICAgICAjIGVsc2UgaWYgMFxuICAgICAgICAgICAgIyBAdHJlZSA9IG5ldyBUcmVlIEBcbiAgICAgICAgIyBlbHNlXG4gICAgICAgICAgICAjIEBzaGFwZXMuZGFoKClcbiAgICAgICAgICAgIFxuICAgICMgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgb25Nb3VzZURvd246IChldmVudCkgPT5cbiAgICAgICAgXG4gICAgICAgIEBtb3VzZURvd25NZXNoID0gQHBpY2tlZE1lc2goKVxuICAgICAgICBAY2FtZXJhLm9uTW91c2VEb3duIGV2ZW50XG5cbiAgICBvbk1vdXNlTW92ZTogKGV2ZW50KSA9PlxuICAgICAgICBcbiAgICAgICAgQGNhbWVyYS5vbk1vdXNlRHJhZyBldmVudFxuICAgICAgICBpZiBtZXNoID0gQHBpY2tlZE1lc2goKVxuICAgICAgICAgICAgIyBAaGlnaGxpZ2h0IG1lc2ggICAgXG4gICAgICAgICAgICBAc2NlbmUubGVnZW5kLnNob3cgbWVzaC5uYW1lXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBzY2VuZS5sZWdlbmQuc2hvdyBAbGVnZW5kTWVzaFxuICAgICAgICBcbiAgICBvbk1vdXNlVXA6IChldmVudCkgPT4gICAgICAgICAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiBtZXNoID0gQHBpY2tlZE1lc2goKVxuICAgICAgICAgICAgaWYgbWVzaCA9PSBAbW91c2VEb3duTWVzaFxuICAgICAgICAgICAgICAgIEBjdXJzb3IucG9zaXRpb24gPSBtZXNoLmdldEFic29sdXRlUG9zaXRpb24oKVxuICAgICAgICAgICAgICAgIEBjYW1lcmEuZmFkZVRvUG9zIG1lc2guZ2V0QWJzb2x1dGVQb3NpdGlvbigpXG4gICAgICAgICAgICAgICAgQHNjZW5lLmxlZ2VuZC5zaG93IG1lc2gubmFtZVxuICAgICAgICAgICAgICAgIEBsZWdlbmRNZXNoID0gbWVzaC5uYW1lXG5cbiAgICAgICAgZWxzZSBpZiBub3QgQG1vdXNlRG93bk1lc2hcbiAgICAgICAgICAgIEBjdXJzb3IucG9zaXRpb24gPSBbMCAtMTAwMCAwXVxuICAgICAgICAgICAgQHNjZW5lLmxlZ2VuZC5oaWRlKClcbiAgICAgICAgICAgIEBsZWdlbmRNZXNoID0gbnVsbFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBAY2FtZXJhLm9uTW91c2VVcCBldmVudFxuICAgICAgICAgIFxuICAgIHBpY2tlZE1lc2g6IC0+XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICBcbiAgICAgICAgaWYgcmVzdWx0ID0gQHNjZW5lLnBpY2soQHNjZW5lLnBvaW50ZXJYLCBAc2NlbmUucG9pbnRlclksIChtKSAtPiBtLm5hbWUgbm90IGluIFsnZ3JvdW5kJyAnY3Vyc29yJ10pXG4gICAgICAgICAgICBpZiByZXN1bHQucGlja2VkTWVzaD8ubmFtZSBpbiBbJ2ZhY2VzJydub3JtYWxzJ11cbiAgICAgICAgICAgICAgICByZXN1bHQucGlja2VkTWVzaC5wYXJlbnRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXN1bHQucGlja2VkTWVzaFxuICAgICAgICBcbiAgICBoaWdobGlnaHQ6IChtZXNoKSAtPlxuICAgICAgICBcbiAgICAgICAgQGhpZ2hsaWdodE1lc2g/Lm1hdGVyaWFsPy5kaWZmdXNlQ29sb3IgPSBAcHJlSGlnaGxpZ2h0Q29sb3JcbiAgICAgICAgQHByZUhpZ2hsaWdodENvbG9yID0gbWVzaD8ubWF0ZXJpYWw/LmRpZmZ1c2VDb2xvclxuICAgICAgICBtZXNoPy5tYXRlcmlhbD8uZGlmZnVzZUNvbG9yID0gQHByZUhpZ2hsaWdodENvbG9yLm11bHRpcGx5IG5ldyBDb2xvcjMgMS41IDEuNSAxLjVcbiAgICAgICAgQGhpZ2hsaWdodE1lc2ggPSBtZXNoICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICBcbiAgICAjIDAwMCAgMDAwICAwMDAwICAgICAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgICAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAgICAgICAgIDAwMDAwMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgdG9nZ2xlSW5zcGVjdG9yOiAtPlxuICAgICAgICBcbiAgICAgICAgaWYgQHNjZW5lLmRlYnVnTGF5ZXIuaXNWaXNpYmxlKClcbiAgICAgICAgICAgIEBzY2VuZS5kZWJ1Z0xheWVyLmhpZGUoKVxuICAgICAgICAgICAgcHJlZnMuc2V0ICdpbnNwZWN0b3InIGZhbHNlXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBzY2VuZS5kZWJ1Z0xheWVyLnNob3cgb3ZlcmxheTp0cnVlIHNob3dJbnNwZWN0b3I6dHJ1ZVxuICAgICAgICAgICAgcHJlZnMuc2V0ICdpbnNwZWN0b3InIHRydWVcbiAgICAgICAgXG4gICAgc3RhcnQ6IC0+IEB2aWV3LmZvY3VzKClcblxuICAgICMgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAgMCAwMDAgIDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwMDAwMDAgIFxuICAgIFxuICAgIGFuaW1hdGU6ID0+XG5cbiAgICAgICAgaWYgbm90IEBwYXVzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgQHNwYWNlPy5yZW5kZXIoKVxuICAgICAgICAgICAgQHRyZWU/LnJlbmRlcigpXG4gICAgICAgICAgICBAc2hhZGVyPy5yZW5kZXIoKVxuICAgICAgICAgICAgQGNhbWVyYS5yZW5kZXIoKVxuICAgICAgICAgICAgQHNjZW5lLnJlbmRlcigpXG4gICAgICAgICAgICBhbmltYXRlLnRpY2sgQGVuZ2luZS5nZXREZWx0YVRpbWUoKS8xMDAwXG4gICAgXG4gICAgIyAwMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwICAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAwMDAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgIDAwMCAgICAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAgICAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICAgMDAwICAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgXG4gICAgcmVzaXplZDogPT4gXG5cbiAgICAgICAgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW9cbiAgICAgICAgQGVuZ2luZS5zZXRTaXplIEB2aWV3LmNsaWVudFdpZHRoICogZHByLCBAdmlldy5jbGllbnRIZWlnaHQgKiBkcHJcbiAgICAgICAgQGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKCN7MS9kcHJ9KVwiXG4gICAgICAgIEBjYW52YXMuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gXCJ0b3AgbGVmdFwiXG4gICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgICAgICAgIDAwMCAwMDAgICBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgICAgMDAwMDAgICAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgICAgICAgICAwMDAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgICAgMDAwICAgICBcbiAgICBcbiAgICBtb2RLZXlDb21ib0V2ZW50RG93bjogKG1vZCwga2V5LCBjb21ibywgZXZlbnQpIC0+XG4gICAgICAgIFxuICAgICAgICAjIGtsb2cgJ21vZEtleUNvbWJvRXZlbnREb3duJyBtb2QsIGtleSwgY29tYm8sIGV2ZW50LndoaWNoXG4gICAgICAgIHN3aXRjaCBrZXlcbiAgICAgICAgICAgIHdoZW4gJ2UnIHRoZW4gQGNhbWVyYS5tb3ZlVXAoKVxuICAgICAgICAgICAgd2hlbiAncScgdGhlbiBAY2FtZXJhLm1vdmVEb3duKClcbiAgICAgICAgICAgIHdoZW4gJ2EnIHRoZW4gQGNhbWVyYS5tb3ZlTGVmdCgpXG4gICAgICAgICAgICB3aGVuICdkJyB0aGVuIEBjYW1lcmEubW92ZVJpZ2h0KClcbiAgICAgICAgICAgIHdoZW4gJ3cnIHRoZW4gQGNhbWVyYS5tb3ZlRm9yd2FyZCgpXG4gICAgICAgICAgICB3aGVuICdzJyB0aGVuIEBjYW1lcmEubW92ZUJhY2t3YXJkKClcbiAgICAgICAgICAgIHdoZW4gJ3gnICdlc2MnIHRoZW4gQGNhbWVyYS5zdG9wTW92aW5nKClcbiAgICAgICAgICAgIHdoZW4gJ3InIHRoZW4gQGNhbWVyYS5yZXNldCgpXG4gICAgICAgIFxuICAgIG1vZEtleUNvbWJvRXZlbnRVcDogKG1vZCwga2V5LCBjb21ibywgZXZlbnQpIC0+XG5cbiAgICAgICAgIyBrbG9nICdtb2RLZXlDb21ib0V2ZW50VXAnIG1vZCwga2V5LCBjb21ibywgZXZlbnQuY29kZVxuICAgICAgICBzd2l0Y2gga2V5XG4gICAgICAgICAgICB3aGVuICdlJyB0aGVuIEBjYW1lcmEuc3RvcFVwKClcbiAgICAgICAgICAgIHdoZW4gJ3EnIHRoZW4gQGNhbWVyYS5zdG9wRG93bigpXG4gICAgICAgICAgICB3aGVuICdhJyB0aGVuIEBjYW1lcmEuc3RvcExlZnQoKVxuICAgICAgICAgICAgd2hlbiAnZCcgdGhlbiBAY2FtZXJhLnN0b3BSaWdodCgpXG4gICAgICAgICAgICB3aGVuICd3JyB0aGVuIEBjYW1lcmEuc3RvcEZvcndhcmQoKVxuICAgICAgICAgICAgd2hlbiAncycgdGhlbiBAY2FtZXJhLnN0b3BCYWNrd2FyZCgpXG4gICAgICAgIFxuICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gV29ybGRcbiJdfQ==
//# sourceURL=../coffee/world.coffee