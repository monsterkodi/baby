// koffee 1.7.0

/*
000   000   0000000   00000000   000      0000000    
000 0 000  000   000  000   000  000      000   000  
000000000  000   000  0000000    000      000   000  
000   000  000   000  000   000  000      000   000  
00     00   0000000   000   000  0000000  0000000
 */
var Camera, Color3, DirectionalLight, Engine, HemisphericLight, MeshBuilder, Scene, Shapes, Space, StandardMaterial, Tree, Vect, Vector3, World, animate, elem, generate, prefs, ref, ref1, vec, ϕ,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('kxk'), elem = ref.elem, prefs = ref.prefs;

ref1 = require('babylonjs'), Camera = ref1.Camera, Color3 = ref1.Color3, DirectionalLight = ref1.DirectionalLight, Engine = ref1.Engine, HemisphericLight = ref1.HemisphericLight, MeshBuilder = ref1.MeshBuilder, Scene = ref1.Scene, Space = ref1.Space, StandardMaterial = ref1.StandardMaterial, Vector3 = ref1.Vector3;

vec = require('./poly/math').vec;

generate = require('./poly/generate');

Vect = require('./vect');

Camera = require('./camera');

Scene = require('./scene');

Space = require('./space');

Tree = require('./tree');

Shapes = require('./shapes');

animate = require('./animate');

ϕ = (Math.sqrt(5) - 1) / 2;

World = (function() {
    function World(view) {
        var a, ground, hemi, light;
        this.view = view;
        this.resized = bind(this.resized, this);
        this.animate = bind(this.animate, this);
        this.onMouseUp = bind(this.onMouseUp, this);
        this.onMouseMove = bind(this.onMouseMove, this);
        this.onMouseDown = bind(this.onMouseDown, this);
        this.paused = false;
        this.view.focus();
        this.keys = new Float32Array(3 * 256);
        this.canvas = elem('canvas', {
            "class": 'babylon',
            parent: this.view
        });
        this.engine = new Engine(this.canvas);
        this.scene = new Scene(this);
        this.shapes = new Shapes(this.scene);
        this.resized();
        a = 0.0;
        this.scene.clearColor = new Color3(a, a, a);
        this.camera = new Camera(this);
        hemi = new HemisphericLight('hemi', new Vector3(0, 1, 0), this.scene);
        hemi.intensity = 0.5;
        light = new DirectionalLight('light', new Vector3(0, -1, 0), this.scene);
        light.position.y = 3;
        this.scene.initFog();
        if (0) {
            ground = MeshBuilder.CreateGround('ground', {
                width: 1000,
                height: 1000,
                subdivisions: 4
            }, this.scene);
            ground.material = new StandardMaterial('ground', this.scene);
            ground.material.specularColor = new Color3(0.05, 0.05, 0.05);
            a = 0.05;
            ground.material.diffuseColor = new Color3(a, a, a);
            ground.receiveShadows = true;
            ground.position.y = -2;
        }
        this.cursor = MeshBuilder.CreateIcoSphere('cursor', {
            flat: false,
            radius: 1.1
        }, this.scene);
        this.cursor.material = new StandardMaterial('mat', this.scene);
        this.cursor.material.diffuseColor = new Color3(0.05, 0.05, 0.05);
        this.cursor.material.specularColor = new Color3(0, 0, 0);
        this.cursor.material.alpha = 0.5;
        this.cursor.position = [0, -1000, 0];
        this.cursor.backFaceCulling = true;
        this.cursor = this.cursor.flipFaces(true);
        this.engine.runRenderLoop(this.animate);
        if (prefs.get('inspector')) {
            this.toggleInspector();
        }
        window.addEventListener('pointerdown', this.onMouseDown);
        window.addEventListener('pointermove', this.onMouseMove);
        window.addEventListener('pointerup', this.onMouseUp);
        if (0) {
            this.space = new Space(this);
        } else if (0) {
            this.tree = new Tree(this);
        } else {
            this.shapes.dah();
        }
    }

    World.prototype.onMouseDown = function(event) {
        this.mouseDownMesh = this.pickedMesh();
        return this.camera.onMouseDown(event);
    };

    World.prototype.onMouseMove = function(event) {
        var mesh;
        this.camera.onMouseDrag(event);
        if (mesh = this.pickedMesh()) {
            return this.scene.legend.show(mesh.name);
        } else {
            return this.scene.legend.show(this.legendMesh);
        }
    };

    World.prototype.onMouseUp = function(event) {
        var mesh;
        if (mesh = this.pickedMesh()) {
            if (mesh === this.mouseDownMesh) {
                this.cursor.position = mesh.getAbsolutePosition();
                this.camera.fadeToPos(mesh.getAbsolutePosition());
                this.scene.legend.show(mesh.name);
                this.legendMesh = mesh.name;
            }
        } else if (!this.mouseDownMesh) {
            this.cursor.position = [0, -1000, 0];
            this.scene.legend.hide();
            this.legendMesh = null;
        }
        return this.camera.onMouseUp(event);
    };

    World.prototype.pickedMesh = function() {
        var ref2, ref3, result;
        return null;
        if (result = this.scene.pick(this.scene.pointerX, this.scene.pointerY, function(m) {
            var ref2;
            return (ref2 = m.name) !== 'ground' && ref2 !== 'cursor';
        })) {
            if ((ref2 = (ref3 = result.pickedMesh) != null ? ref3.name : void 0) === 'faces' || ref2 === 'normals') {
                return result.pickedMesh.parent;
            } else {
                return result.pickedMesh;
            }
        }
    };

    World.prototype.highlight = function(mesh) {
        var ref2, ref3, ref4, ref5;
        if ((ref2 = this.highlightMesh) != null) {
            if ((ref3 = ref2.material) != null) {
                ref3.diffuseColor = this.preHighlightColor;
            }
        }
        this.preHighlightColor = mesh != null ? (ref4 = mesh.material) != null ? ref4.diffuseColor : void 0 : void 0;
        if (mesh != null) {
            if ((ref5 = mesh.material) != null) {
                ref5.diffuseColor = this.preHighlightColor.multiply(new Color3(1.5, 1.5, 1.5));
            }
        }
        return this.highlightMesh = mesh;
    };

    World.prototype.toggleInspector = function() {
        if (this.scene.debugLayer.isVisible()) {
            this.scene.debugLayer.hide();
            return prefs.set('inspector', false);
        } else {
            this.scene.debugLayer.show({
                overlay: true,
                showInspector: true
            });
            return prefs.set('inspector', true);
        }
    };

    World.prototype.start = function() {
        return this.view.focus();
    };

    World.prototype.animate = function() {
        var ref2, ref3, ref4;
        if (!this.paused) {
            if ((ref2 = this.space) != null) {
                ref2.render();
            }
            if ((ref3 = this.tree) != null) {
                ref3.render();
            }
            if ((ref4 = this.shader) != null) {
                ref4.render();
            }
            this.camera.render();
            this.scene.render();
            return animate.tick(this.engine.getDeltaTime() / 1000);
        }
    };

    World.prototype.resized = function() {
        var dpr;
        dpr = window.devicePixelRatio;
        this.engine.setSize(this.view.clientWidth * dpr, this.view.clientHeight * dpr);
        this.canvas.style.transform = "scale(" + (1 / dpr) + ")";
        return this.canvas.style.transformOrigin = "top left";
    };

    World.prototype.modKeyComboEventDown = function(mod, key, combo, event) {
        if (event.which < 256 && !event.repeat) {
            this.keys[event.which] = 1;
            this.keys[event.which + 256] = 1;
            this.keys[event.which + 512] = 1 - this.keys[event.which + 512];
        }
        switch (key) {
            case 'e':
                return this.camera.moveUp();
            case 'q':
                return this.camera.moveDown();
            case 'a':
                return this.camera.moveLeft();
            case 'd':
                return this.camera.moveRight();
            case 'w':
                return this.camera.moveForward();
            case 's':
                return this.camera.moveBackward();
            case 'x':
            case 'esc':
                return this.camera.stopMoving();
            case 'r':
                return this.camera.reset();
        }
    };

    World.prototype.modKeyComboEventUp = function(mod, key, combo, event) {
        if (event.which < 256) {
            this.keys[event.which] = 0;
        }
        switch (key) {
            case 'e':
                return this.camera.stopUp();
            case 'q':
                return this.camera.stopDown();
            case 'a':
                return this.camera.stopLeft();
            case 'd':
                return this.camera.stopRight();
            case 'w':
                return this.camera.stopForward();
            case 's':
                return this.camera.stopBackward();
        }
    };

    return World;

})();

module.exports = World;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ybGQuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBLDhMQUFBO0lBQUE7O0FBUUEsTUFBa0IsT0FBQSxDQUFRLEtBQVIsQ0FBbEIsRUFBRSxlQUFGLEVBQVE7O0FBQ1IsT0FBdUgsT0FBQSxDQUFRLFdBQVIsQ0FBdkgsRUFBRSxvQkFBRixFQUFVLG9CQUFWLEVBQWtCLHdDQUFsQixFQUFvQyxvQkFBcEMsRUFBNEMsd0NBQTVDLEVBQThELDhCQUE5RCxFQUEyRSxrQkFBM0UsRUFBa0Ysa0JBQWxGLEVBQXlGLHdDQUF6RixFQUEyRzs7QUFDekcsTUFBUSxPQUFBLENBQVEsYUFBUjs7QUFDVixRQUFBLEdBQVcsT0FBQSxDQUFRLGlCQUFSOztBQUNYLElBQUEsR0FBVyxPQUFBLENBQVEsUUFBUjs7QUFDWCxNQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBQ1gsS0FBQSxHQUFXLE9BQUEsQ0FBUSxTQUFSOztBQUNYLEtBQUEsR0FBVyxPQUFBLENBQVEsU0FBUjs7QUFDWCxJQUFBLEdBQVcsT0FBQSxDQUFRLFFBQVI7O0FBQ1gsTUFBQSxHQUFXLE9BQUEsQ0FBUSxVQUFSOztBQUNYLE9BQUEsR0FBVyxPQUFBLENBQVEsV0FBUjs7QUFFWCxDQUFBLEdBQUksQ0FBQyxJQUFJLENBQUMsSUFBTCxDQUFVLENBQVYsQ0FBQSxHQUFhLENBQWQsQ0FBQSxHQUFpQjs7QUFFZjtJQUVDLGVBQUMsSUFBRDtBQUVDLFlBQUE7UUFGQSxJQUFDLENBQUEsT0FBRDs7Ozs7O1FBRUEsSUFBQyxDQUFBLE1BQUQsR0FBVTtRQUNWLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBTixDQUFBO1FBRUEsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFJLFlBQUosQ0FBaUIsQ0FBQSxHQUFFLEdBQW5CO1FBRVIsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFBLENBQUssUUFBTCxFQUFjO1lBQUEsQ0FBQSxLQUFB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MDAgICAwMDAgICAgICAwMDAwMDAwICAgIFxuMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICBcbjAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMCAgICAgIDAwMCAgIDAwMCAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIFxuMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgMDAwMDAwMCAgICBcbiMjI1xuXG57IGVsZW0sIHByZWZzIH0gPSByZXF1aXJlICdreGsnXG57IENhbWVyYSwgQ29sb3IzLCBEaXJlY3Rpb25hbExpZ2h0LCBFbmdpbmUsIEhlbWlzcGhlcmljTGlnaHQsIE1lc2hCdWlsZGVyLCBTY2VuZSwgU3BhY2UsIFN0YW5kYXJkTWF0ZXJpYWwsIFZlY3RvcjMgfSA9IHJlcXVpcmUgJ2JhYnlsb25qcydcbnsgdmVjIH0gPSByZXF1aXJlICcuL3BvbHkvbWF0aCdcbmdlbmVyYXRlID0gcmVxdWlyZSAnLi9wb2x5L2dlbmVyYXRlJ1xuVmVjdCAgICAgPSByZXF1aXJlICcuL3ZlY3QnXG5DYW1lcmEgICA9IHJlcXVpcmUgJy4vY2FtZXJhJ1xuU2NlbmUgICAgPSByZXF1aXJlICcuL3NjZW5lJ1xuU3BhY2UgICAgPSByZXF1aXJlICcuL3NwYWNlJ1xuVHJlZSAgICAgPSByZXF1aXJlICcuL3RyZWUnXG5TaGFwZXMgICA9IHJlcXVpcmUgJy4vc2hhcGVzJ1xuYW5pbWF0ZSAgPSByZXF1aXJlICcuL2FuaW1hdGUnXG5cbs+VID0gKE1hdGguc3FydCg1KS0xKS8yXG5cbmNsYXNzIFdvcmxkXG4gICAgXG4gICAgQDogKEB2aWV3KSAtPlxuICAgICAgICBcbiAgICAgICAgQHBhdXNlZCA9IGZhbHNlXG4gICAgICAgIEB2aWV3LmZvY3VzKClcbiAgICAgICAgXG4gICAgICAgIEBrZXlzID0gbmV3IEZsb2F0MzJBcnJheSAzKjI1NlxuICAgICAgICBcbiAgICAgICAgQGNhbnZhcyA9IGVsZW0gJ2NhbnZhcycgY2xhc3M6J2JhYnlsb24nIHBhcmVudDpAdmlld1xuICAgICAgICBcbiAgICAgICAgQGVuZ2luZSA9IG5ldyBFbmdpbmUgQGNhbnZhc1xuICAgICAgICBcbiAgICAgICAgQHNjZW5lICA9IG5ldyBTY2VuZSBAXG4gICAgICAgIEBzaGFwZXMgPSBuZXcgU2hhcGVzIEBzY2VuZVxuICAgICAgICBAcmVzaXplZCgpXG4gICAgICAgIFxuICAgICAgICBhID0gMC4wICMwLjA2NVxuICAgICAgICBAc2NlbmUuY2xlYXJDb2xvciA9IG5ldyBDb2xvcjMgYSwgYSwgYVxuXG4gICAgICAgIEBjYW1lcmEgPSBuZXcgQ2FtZXJhIEBcbiAgICAgICAgXG4gICAgICAgIGhlbWkgPSBuZXcgSGVtaXNwaGVyaWNMaWdodCAnaGVtaScgbmV3IFZlY3RvcjMoMCAxIDApLCBAc2NlbmVcbiAgICAgICAgaGVtaS5pbnRlbnNpdHkgPSAwLjVcbiAgICAgICAgXG4gICAgICAgIGxpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQgJ2xpZ2h0JyBuZXcgVmVjdG9yMygwIC0xIDApLCBAc2NlbmVcbiAgICAgICAgbGlnaHQucG9zaXRpb24ueSA9IDNcblxuICAgICAgICBAc2NlbmUuaW5pdEZvZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIGlmIDBcbiAgICAgICAgICAgIGdyb3VuZCA9IE1lc2hCdWlsZGVyLkNyZWF0ZUdyb3VuZCAnZ3JvdW5kJyB7d2lkdGg6MTAwMCBoZWlnaHQ6MTAwMCBzdWJkaXZpc2lvbnM6IDR9LCBAc2NlbmVcbiAgICAgICAgICAgIGdyb3VuZC5tYXRlcmlhbCA9IG5ldyBTdGFuZGFyZE1hdGVyaWFsICdncm91bmQnIEBzY2VuZVxuICAgICAgICAgICAgZ3JvdW5kLm1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBuZXcgQ29sb3IzIDAuMDUgMC4wNSAwLjA1XG4gICAgICAgICAgICBhID0gMC4wNVxuICAgICAgICAgICAgZ3JvdW5kLm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IG5ldyBDb2xvcjMgYSwgYSwgYVxuICAgICAgICAgICAgZ3JvdW5kLnJlY2VpdmVTaGFkb3dzID0gdHJ1ZVxuICAgICAgICAgICAgZ3JvdW5kLnBvc2l0aW9uLnkgPSAtMlxuICAgICAgICAgICAgIFxuICAgICAgICBAY3Vyc29yID0gTWVzaEJ1aWxkZXIuQ3JlYXRlSWNvU3BoZXJlICdjdXJzb3InIGZsYXQ6ZmFsc2UgcmFkaXVzOjEuMSwgQHNjZW5lXG4gICAgICAgIEBjdXJzb3IubWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbCAnbWF0JyBAc2NlbmVcbiAgICAgICAgQGN1cnNvci5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBuZXcgQ29sb3IzIDAuMDUgMC4wNSAwLjA1XG4gICAgICAgIEBjdXJzb3IubWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG5ldyBDb2xvcjMgMCAwIDBcbiAgICAgICAgQGN1cnNvci5tYXRlcmlhbC5hbHBoYSA9IDAuNVxuICAgICAgICBAY3Vyc29yLnBvc2l0aW9uID0gWzAgLTEwMDAgMF1cbiAgICAgICAgQGN1cnNvci5iYWNrRmFjZUN1bGxpbmcgPSB0cnVlXG4gICAgICAgIEBjdXJzb3IgPSBAY3Vyc29yLmZsaXBGYWNlcyB0cnVlXG4gICAgICAgIFxuICAgICAgICBAZW5naW5lLnJ1blJlbmRlckxvb3AgQGFuaW1hdGVcbiAgICAgICAgXG4gICAgICAgIGlmIHByZWZzLmdldCAnaW5zcGVjdG9yJ1xuICAgICAgICAgICAgQHRvZ2dsZUluc3BlY3RvcigpXG4gICAgICAgICAgICAgXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVyZG93bicgQG9uTW91c2VEb3duXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVybW92ZScgQG9uTW91c2VNb3ZlXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVydXAnICAgQG9uTW91c2VVcFxuICBcbiAgICAgICAgaWYgMFxuICAgICAgICAgICAgQHNwYWNlID0gbmV3IFNwYWNlIEBcbiAgICAgICAgZWxzZSBpZiAwXG4gICAgICAgICAgICBAdHJlZSA9IG5ldyBUcmVlIEBcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNoYXBlcy5kYWgoKVxuICAgICAgICAgICAgXG4gICAgIyAwMCAgICAgMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICBcbiAgICBcbiAgICBvbk1vdXNlRG93bjogKGV2ZW50KSA9PlxuICAgICAgICBcbiAgICAgICAgQG1vdXNlRG93bk1lc2ggPSBAcGlja2VkTWVzaCgpXG4gICAgICAgIEBjYW1lcmEub25Nb3VzZURvd24gZXZlbnRcblxuICAgIG9uTW91c2VNb3ZlOiAoZXZlbnQpID0+XG4gICAgICAgIFxuICAgICAgICBAY2FtZXJhLm9uTW91c2VEcmFnIGV2ZW50XG4gICAgICAgIGlmIG1lc2ggPSBAcGlja2VkTWVzaCgpXG4gICAgICAgICAgICAjIEBoaWdobGlnaHQgbWVzaCAgICBcbiAgICAgICAgICAgIEBzY2VuZS5sZWdlbmQuc2hvdyBtZXNoLm5hbWVcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNjZW5lLmxlZ2VuZC5zaG93IEBsZWdlbmRNZXNoXG4gICAgICAgIFxuICAgIG9uTW91c2VVcDogKGV2ZW50KSA9PiAgICAgICAgICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmIG1lc2ggPSBAcGlja2VkTWVzaCgpXG4gICAgICAgICAgICBpZiBtZXNoID09IEBtb3VzZURvd25NZXNoXG4gICAgICAgICAgICAgICAgQGN1cnNvci5wb3NpdGlvbiA9IG1lc2guZ2V0QWJzb2x1dGVQb3NpdGlvbigpXG4gICAgICAgICAgICAgICAgQGNhbWVyYS5mYWRlVG9Qb3MgbWVzaC5nZXRBYnNvbHV0ZVBvc2l0aW9uKClcbiAgICAgICAgICAgICAgICBAc2NlbmUubGVnZW5kLnNob3cgbWVzaC5uYW1lXG4gICAgICAgICAgICAgICAgQGxlZ2VuZE1lc2ggPSBtZXNoLm5hbWVcblxuICAgICAgICBlbHNlIGlmIG5vdCBAbW91c2VEb3duTWVzaFxuICAgICAgICAgICAgQGN1cnNvci5wb3NpdGlvbiA9IFswIC0xMDAwIDBdXG4gICAgICAgICAgICBAc2NlbmUubGVnZW5kLmhpZGUoKVxuICAgICAgICAgICAgQGxlZ2VuZE1lc2ggPSBudWxsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIEBjYW1lcmEub25Nb3VzZVVwIGV2ZW50XG4gICAgICAgICAgXG4gICAgcGlja2VkTWVzaDogLT5cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIFxuICAgICAgICBpZiByZXN1bHQgPSBAc2NlbmUucGljayhAc2NlbmUucG9pbnRlclgsIEBzY2VuZS5wb2ludGVyWSwgKG0pIC0+IG0ubmFtZSBub3QgaW4gWydncm91bmQnICdjdXJzb3InXSlcbiAgICAgICAgICAgIGlmIHJlc3VsdC5waWNrZWRNZXNoPy5uYW1lIGluIFsnZmFjZXMnJ25vcm1hbHMnXVxuICAgICAgICAgICAgICAgIHJlc3VsdC5waWNrZWRNZXNoLnBhcmVudFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlc3VsdC5waWNrZWRNZXNoXG4gICAgICAgIFxuICAgIGhpZ2hsaWdodDogKG1lc2gpIC0+XG4gICAgICAgIFxuICAgICAgICBAaGlnaGxpZ2h0TWVzaD8ubWF0ZXJpYWw/LmRpZmZ1c2VDb2xvciA9IEBwcmVIaWdobGlnaHRDb2xvclxuICAgICAgICBAcHJlSGlnaGxpZ2h0Q29sb3IgPSBtZXNoPy5tYXRlcmlhbD8uZGlmZnVzZUNvbG9yXG4gICAgICAgIG1lc2g/Lm1hdGVyaWFsPy5kaWZmdXNlQ29sb3IgPSBAcHJlSGlnaGxpZ2h0Q29sb3IubXVsdGlwbHkgbmV3IENvbG9yMyAxLjUgMS41IDEuNVxuICAgICAgICBAaGlnaGxpZ2h0TWVzaCA9IG1lc2ggICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgIFxuICAgICMgMDAwICAwMDAgIDAwMDAgICAgICAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMCAgICAgICAgMDAwMDAwMDAgICAwMDAwMDAwICAgICAwMDAgICAgICAwMDAwMDAwICAgMDAwICAgMDAwICBcbiAgICBcbiAgICB0b2dnbGVJbnNwZWN0b3I6IC0+XG4gICAgICAgIFxuICAgICAgICBpZiBAc2NlbmUuZGVidWdMYXllci5pc1Zpc2libGUoKVxuICAgICAgICAgICAgQHNjZW5lLmRlYnVnTGF5ZXIuaGlkZSgpXG4gICAgICAgICAgICBwcmVmcy5zZXQgJ2luc3BlY3RvcicgZmFsc2VcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNjZW5lLmRlYnVnTGF5ZXIuc2hvdyBvdmVybGF5OnRydWUgc2hvd0luc3BlY3Rvcjp0cnVlXG4gICAgICAgICAgICBwcmVmcy5zZXQgJ2luc3BlY3RvcicgdHJ1ZVxuICAgICAgICBcbiAgICBzdGFydDogLT4gQHZpZXcuZm9jdXMoKVxuXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAwMCAgICAgMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMCAwIDAwMCAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgICAgMDAwICAgICAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgYW5pbWF0ZTogPT5cblxuICAgICAgICBpZiBub3QgQHBhdXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBAc3BhY2U/LnJlbmRlcigpXG4gICAgICAgICAgICBAdHJlZT8ucmVuZGVyKClcbiAgICAgICAgICAgIEBzaGFkZXI/LnJlbmRlcigpXG4gICAgICAgICAgICBAY2FtZXJhLnJlbmRlcigpXG4gICAgICAgICAgICBAc2NlbmUucmVuZGVyKClcbiAgICAgICAgICAgIGFuaW1hdGUudGljayBAZW5naW5lLmdldERlbHRhVGltZSgpLzEwMDBcbiAgICBcbiAgICAjIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgMDAwICAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICBcbiAgICByZXNpemVkOiA9PiBcblxuICAgICAgICBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb1xuICAgICAgICBAZW5naW5lLnNldFNpemUgQHZpZXcuY2xpZW50V2lkdGggKiBkcHIsIEB2aWV3LmNsaWVudEhlaWdodCAqIGRwclxuICAgICAgICBAY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoI3sxL2Rwcn0pXCJcbiAgICAgICAgQGNhbnZhcy5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBcInRvcCBsZWZ0XCJcbiAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAwIDAwMCAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgICAwMDAwMCAgICBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgICAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAwMDAgICAgIFxuICAgIFxuICAgIG1vZEtleUNvbWJvRXZlbnREb3duOiAobW9kLCBrZXksIGNvbWJvLCBldmVudCkgLT5cbiAgICAgICAgXG4gICAgICAgICMga2xvZyAnbW9kS2V5Q29tYm9FdmVudERvd24nIGtleSwgZXZlbnQud2hpY2hcbiAgICAgICAgaWYgZXZlbnQud2hpY2ggPCAyNTYgYW5kIG5vdCBldmVudC5yZXBlYXRcbiAgICAgICAgICAgIEBrZXlzW2V2ZW50LndoaWNoXSAgICAgPSAxXG4gICAgICAgICAgICBAa2V5c1tldmVudC53aGljaCsyNTZdID0gMVxuICAgICAgICAgICAgQGtleXNbZXZlbnQud2hpY2grNTEyXSA9IDEtQGtleXNbZXZlbnQud2hpY2grNTEyXVxuICAgICAgICAgICAgXG4gICAgICAgIHN3aXRjaCBrZXlcbiAgICAgICAgICAgIHdoZW4gJ2UnIHRoZW4gQGNhbWVyYS5tb3ZlVXAoKVxuICAgICAgICAgICAgd2hlbiAncScgdGhlbiBAY2FtZXJhLm1vdmVEb3duKClcbiAgICAgICAgICAgIHdoZW4gJ2EnIHRoZW4gQGNhbWVyYS5tb3ZlTGVmdCgpXG4gICAgICAgICAgICB3aGVuICdkJyB0aGVuIEBjYW1lcmEubW92ZVJpZ2h0KClcbiAgICAgICAgICAgIHdoZW4gJ3cnIHRoZW4gQGNhbWVyYS5tb3ZlRm9yd2FyZCgpXG4gICAgICAgICAgICB3aGVuICdzJyB0aGVuIEBjYW1lcmEubW92ZUJhY2t3YXJkKClcbiAgICAgICAgICAgIHdoZW4gJ3gnICdlc2MnIHRoZW4gQGNhbWVyYS5zdG9wTW92aW5nKClcbiAgICAgICAgICAgIHdoZW4gJ3InIHRoZW4gQGNhbWVyYS5yZXNldCgpXG4gICAgICAgIFxuICAgIG1vZEtleUNvbWJvRXZlbnRVcDogKG1vZCwga2V5LCBjb21ibywgZXZlbnQpIC0+XG5cbiAgICAgICAgIyBrbG9nICdtb2RLZXlDb21ib0V2ZW50VXAnIG1vZCwga2V5LCBjb21ibywgZXZlbnQuY29kZVxuICAgICAgICBpZiBldmVudC53aGljaCA8IDI1NlxuICAgICAgICAgICAgQGtleXNbZXZlbnQud2hpY2hdID0gMFxuICAgICAgICBcbiAgICAgICAgc3dpdGNoIGtleVxuICAgICAgICAgICAgd2hlbiAnZScgdGhlbiBAY2FtZXJhLnN0b3BVcCgpXG4gICAgICAgICAgICB3aGVuICdxJyB0aGVuIEBjYW1lcmEuc3RvcERvd24oKVxuICAgICAgICAgICAgd2hlbiAnYScgdGhlbiBAY2FtZXJhLnN0b3BMZWZ0KClcbiAgICAgICAgICAgIHdoZW4gJ2QnIHRoZW4gQGNhbWVyYS5zdG9wUmlnaHQoKVxuICAgICAgICAgICAgd2hlbiAndycgdGhlbiBAY2FtZXJhLnN0b3BGb3J3YXJkKClcbiAgICAgICAgICAgIHdoZW4gJ3MnIHRoZW4gQGNhbWVyYS5zdG9wQmFja3dhcmQoKVxuICAgICAgICBcbiAgICAgICAgXG5tb2R1bGUuZXhwb3J0cyA9IFdvcmxkXG4iXX0=
//# sourceURL=../coffee/world.coffee