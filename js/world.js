// koffee 1.6.0

/*
000   000   0000000   00000000   000      0000000    
000 0 000  000   000  000   000  000      000   000  
000000000  000   000  0000000    000      000   000  
000   000  000   000  000   000  000      000   000  
00     00   0000000   000   000  0000000  0000000
 */
var AmbientLight, ArcRotateCamera, Camera, Color3, DirectionalLight, Engine, FramingBehavior, HemisphericLight, Mesh, MeshBuilder, PointLight, Poly, Scene, ShadowGenerator, SimplificationType, SpotLight, StandardMaterial, Vect, Vector3, World, animate, deg2rad, elem, generate, klog, prefs, ref, ref1, ϕ,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('kxk'), deg2rad = ref.deg2rad, prefs = ref.prefs, elem = ref.elem, klog = ref.klog;

ref1 = require('babylonjs'), ArcRotateCamera = ref1.ArcRotateCamera, FramingBehavior = ref1.FramingBehavior, Engine = ref1.Engine, Color3 = ref1.Color3, Vector3 = ref1.Vector3, Mesh = ref1.Mesh, SimplificationType = ref1.SimplificationType, DirectionalLight = ref1.DirectionalLight, AmbientLight = ref1.AmbientLight, ShadowGenerator = ref1.ShadowGenerator, StandardMaterial = ref1.StandardMaterial, MeshBuilder = ref1.MeshBuilder, HemisphericLight = ref1.HemisphericLight, SpotLight = ref1.SpotLight, PointLight = ref1.PointLight;

generate = require('./poly/generate');

Poly = require('./poly/polyold');

Vect = require('./vect');

Camera = require('./camera');

Scene = require('./scene');

animate = require('./animate');

ϕ = (Math.sqrt(5) - 1) / 2;

World = (function() {
    function World(view) {
        var a, ci, code, d, f, ground, hemi, i, j, k, l, len, len1, len2, len3, light, m, n, names, o, p, poly, q, ref2, ri, row, rows, shadowGenerator, truncated, y;
        this.view = view;
        this.resized = bind(this.resized, this);
        this.animate = bind(this.animate, this);
        this.onMouseUp = bind(this.onMouseUp, this);
        this.onMouseMove = bind(this.onMouseMove, this);
        this.onMouseDown = bind(this.onMouseDown, this);
        this.paused = false;
        this.view.focus();
        this.canvas = elem('canvas', {
            "class": 'babylon',
            parent: this.view
        });
        this.engine = new Engine(this.canvas, true);
        this.scene = new Scene(this.engine);
        this.resized();
        a = 0.06;
        this.scene.clearColor = new Color3(a, a, a);
        this.camera = new Camera(this.scene, this.view, this.canvas);
        hemi = new HemisphericLight('hemi', new Vect(0, 1, 0), this.scene);
        hemi.intensity = 0.5;
        light = new DirectionalLight('light', new Vector3(0, -1, 0), this.scene);
        light.position.y = 3;
        shadowGenerator = new ShadowGenerator(8 * 1024, light);
        shadowGenerator.bias = 0.0002;
        shadowGenerator.darkness = 0.8;
        shadowGenerator.useExponentialShadowMap = true;
        shadowGenerator.usePoissonSampling = true;
        shadowGenerator.usePercentageCloserFiltering = true;
        shadowGenerator.useContactHardeningShadow = true;
        ground = MeshBuilder.CreateGround('ground', {
            width: 1000,
            height: 1000,
            subdivisions: 4
        }, this.scene);
        ground.material = new StandardMaterial('mat', this.scene);
        ground.material.specularColor = new Color3(0.05, 0.05, 0.05);
        a = 0.05;
        ground.material.diffuseColor = new Color3(a, a, a);
        ground.receiveShadows = true;
        ground.position.y = -4;
        this.cursor = MeshBuilder.CreateIcoSphere('cursor', {
            flat: false,
            radius: 0.99
        }, this.scene);
        this.cursor.material = new StandardMaterial('mat', this.scene);
        this.cursor.material.diffuseColor = new Color3(0.05, 0.05, 0.05);
        this.cursor.material.alpha = 0.25;
        this.cursor.position = this.camera.position;
        this.engine.runRenderLoop(this.animate);
        if (prefs.get('inspector')) {
            this.toggleInspector();
        }
        window.addEventListener('pointerdown', this.onMouseDown);
        window.addEventListener('pointerup', this.onMouseUp);
        if (0) {
            names = ['tetrahedron', 'cube', 'octahedron', 'dodecahedron', 'icosahedron', 'cuboctahedron', 'icosidodecahedron', 'truncatedicosidodecahedron', 'rhombicosidodecahedron', 'rhombicubocahedron', 'snubicosidodecahedron', 'snubcuboctahedron'];
            for (j = k = 0, len = names.length; k < len; j = ++k) {
                m = names[j];
                for (i = l = 0; l <= 10; i = ++l) {
                    truncated = Poly.truncate(Poly[m](), i * 0.1);
                    p = Mesh.CreatePolyhedron(m, {
                        custom: truncated
                    }, this.scene);
                    p.receiveShadows = true;
                    p.convertToFlatShadedMesh();
                    p.position.x = 3 * j;
                    p.position.z = 3 * i;
                    p.position.y = -2;
                    shadowGenerator.addShadowCaster(p);
                    p.material = new StandardMaterial('mat', this.scene);
                    p.material.alpha = 1;
                    p.material.diffuseColor = new Color3(i / 12, (j / 6) % 1, 1 - j / 12);
                }
            }
        }
        rows = [['c0C', 'c0.25C', 'cC', 'c0.57C', 'c0.58C', 'c0.59C', 'c1C']];
        ri = 0;
        for (n = 0, len1 = rows.length; n < len1; n++) {
            row = rows[n];
            ci = 0;
            ri++;
            for (o = 0, len2 = row.length; o < len2; o++) {
                code = row[o];
                ci++;
                ref2 = [''];
                for (y = q = 0, len3 = ref2.length; q < len3; y = ++q) {
                    d = ref2[y];
                    poly = generate(d + code, false);
                    p = Mesh.CreatePolyhedron(d + code, {
                        custom: poly
                    }, this.scene);
                    this.scene.showFaces(p, poly);
                    this.scene.label(p);
                    p.receiveShadows = true;
                    p.position.x = 3 * ci;
                    p.position.z = 3 * ri;
                    p.position.y = y * 3;
                    p.rotate(Vect.unitX, deg2rad(-90));
                    shadowGenerator.addShadowCaster(p);
                    p.material = new StandardMaterial('mat', this.scene);
                    p.material.alpha = 1;
                    f = ci / 5;
                    p.material.diffuseColor = new Color3(f * ((ri & 1) >> 0), f * ((ri & 2) >> 1), f * ((ri & 4) >> 2));
                }
            }
        }
    }

    World.prototype.onMouseDown = function(event) {
        var result;
        window.addEventListener('pointermove', this.onMouseMove);
        result = this.scene.pick(this.scene.pointerX, this.scene.pointerY);
        if (event.buttons & 2 && result.pickedMesh.name !== 'ground') {
            this.mouseDownMesh = result.pickedMesh;
        } else {
            this.mouseDownMesh = null;
        }
        return this.camera.onMouseDown(event);
    };

    World.prototype.onMouseMove = function(event) {
        return this.camera.onMouseDrag(event);
    };

    World.prototype.onMouseUp = function(event) {
        var mesh, ref2, result;
        window.removeEventListener('pointermove', this.onMouseMove);
        result = this.scene.pick(this.scene.pointerX, this.scene.pointerY);
        if (mesh = result.pickedMesh) {
            if (mesh.name !== 'ground' && mesh === this.mouseDownMesh) {
                if ((ref2 = mesh.name) === 'faces' || ref2 === 'normals') {
                    klog(mesh.parent.name);
                }
                this.cursor.position = mesh.getAbsolutePosition();
                this.camera.fadeToPos(mesh.getAbsolutePosition());
            } else {
                if (!this.mouseDownMesh) {
                    this.cursor.position = this.camera.position;
                }
            }
        }
        return this.camera.onMouseUp(event);
    };

    World.prototype.toggleInspector = function() {
        if (this.scene.debugLayer.isVisible()) {
            this.scene.debugLayer.hide();
            return prefs.set('inspector', false);
        } else {
            this.scene.debugLayer.show({
                overlay: true,
                showInspector: true
            });
            return prefs.set('inspector', true);
        }
    };

    World.prototype.start = function() {
        return this.view.focus();
    };

    World.prototype.animate = function() {
        if (!this.paused) {
            this.scene.render();
            return animate.tick(this.engine.getDeltaTime() / 1000);
        }
    };

    World.prototype.resized = function() {
        this.canvas.width = this.view.clientWidth;
        this.canvas.height = this.view.clientHeight;
        return this.engine.resize();
    };

    World.prototype.modKeyComboEventDown = function(mod, key, combo, event) {
        switch (key) {
            case 'e':
                return this.camera.moveUp();
            case 'q':
                return this.camera.moveDown();
            case 'a':
                return this.camera.moveLeft();
            case 'd':
                return this.camera.moveRight();
            case 'w':
                return this.camera.moveForward();
            case 's':
                return this.camera.moveBackward();
            case 'x':
            case 'esc':
                return this.camera.stopMoving();
        }
    };

    World.prototype.modKeyComboEventUp = function(mod, key, combo, event) {
        switch (key) {
            case 'e':
                return this.camera.stopUp();
            case 'q':
                return this.camera.stopDown();
            case 'a':
                return this.camera.stopLeft();
            case 'd':
                return this.camera.stopRight();
            case 'w':
                return this.camera.stopForward();
            case 's':
                return this.camera.stopBackward();
        }
    };

    return World;

})();

module.exports = World;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ybGQuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBLDJTQUFBO0lBQUE7O0FBUUEsTUFBaUMsT0FBQSxDQUFRLEtBQVIsQ0FBakMsRUFBRSxxQkFBRixFQUFXLGlCQUFYLEVBQWtCLGVBQWxCLEVBQXdCOztBQUN4QixPQUFtTixPQUFBLENBQVEsV0FBUixDQUFuTixFQUFFLHNDQUFGLEVBQW1CLHNDQUFuQixFQUFvQyxvQkFBcEMsRUFBNEMsb0JBQTVDLEVBQW9ELHNCQUFwRCxFQUE2RCxnQkFBN0QsRUFBbUUsNENBQW5FLEVBQXVGLHdDQUF2RixFQUF5RyxnQ0FBekcsRUFBdUgsc0NBQXZILEVBQXdJLHdDQUF4SSxFQUEwSiw4QkFBMUosRUFBdUssd0NBQXZLLEVBQXlMLDBCQUF6TCxFQUFvTTs7QUFFcE0sUUFBQSxHQUFXLE9BQUEsQ0FBUSxpQkFBUjs7QUFDWCxJQUFBLEdBQVcsT0FBQSxDQUFRLGdCQUFSOztBQUNYLElBQUEsR0FBVyxPQUFBLENBQVEsUUFBUjs7QUFDWCxNQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBQ1gsS0FBQSxHQUFXLE9BQUEsQ0FBUSxTQUFSOztBQUNYLE9BQUEsR0FBVyxPQUFBLENBQVEsV0FBUjs7QUFFWCxDQUFBLEdBQUksQ0FBQyxJQUFJLENBQUMsSUFBTCxDQUFVLENBQVYsQ0FBQSxHQUFhLENBQWQsQ0FBQSxHQUFpQjs7QUFFZjtJQUVDLGVBQUMsSUFBRDtBQUVDLFlBQUE7UUFGQSxJQUFDLENBQUEsT0FBRDs7Ozs7O1FBRUEsSUFBQyxDQUFBLE1BQUQsR0FBVTtRQUNWLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBTixDQUFBO1FBRUEsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFBLENBQUssUUFBTCxFQUFjO1lBQUEsQ0FBQSxLQUFBLENBQUEsRUFBTSxTQUFOO1lBQWdCLE1BQUEsRUFBTyxJQUFDLENBQUEsSUFBeEI7U0FB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QUFObEIsaUJBT1MsR0FQVDtBQUFBLGlCQU9hLEtBUGI7dUJBT3dCLElBQUMsQ0FBQSxNQUFNLENBQUMsVUFBUixDQUFBO0FBUHhCO0lBSGtCOztvQkFZdEIsa0JBQUEsR0FBb0IsU0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEtBQVgsRUFBa0IsS0FBbEI7QUFFaEIsZ0JBQU8sR0FBUDtBQUFBLGlCQUNTLEdBRFQ7dUJBQ2tCLElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBUixDQUFBO0FBRGxCLGlCQUVTLEdBRlQ7dUJBRWtCLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUixDQUFBO0FBRmxCLGlCQUdTLEdBSFQ7dUJBR2tCLElBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUixDQUFBO0FBSGxCLGlCQUlTLEdBSlQ7dUJBSWtCLElBQUMsQ0FBQSxNQUFNLENBQUMsU0FBUixDQUFBO0FBSmxCLGlCQUtTLEdBTFQ7dUJBS2tCLElBQUMsQ0FBQSxNQUFNLENBQUMsV0FBUixDQUFBO0FBTGxCLGlCQU1TLEdBTlQ7dUJBTWtCLElBQUMsQ0FBQSxNQUFNLENBQUMsWUFBUixDQUFBO0FBTmxCO0lBRmdCOzs7Ozs7QUFZeEIsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMCAgICAgIDAwMDAwMDAgICAgXG4wMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIFxuMDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwICAgICAgMDAwICAgMDAwICBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgXG4wMCAgICAgMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAwMDAwMDAwICAgIFxuIyMjXG5cbnsgZGVnMnJhZCwgcHJlZnMsIGVsZW0sIGtsb2cgfSA9IHJlcXVpcmUgJ2t4aydcbnsgQXJjUm90YXRlQ2FtZXJhLCBGcmFtaW5nQmVoYXZpb3IsIEVuZ2luZSwgQ29sb3IzLCBWZWN0b3IzLCBNZXNoLCBTaW1wbGlmaWNhdGlvblR5cGUsIERpcmVjdGlvbmFsTGlnaHQsIEFtYmllbnRMaWdodCwgU2hhZG93R2VuZXJhdG9yLCBTdGFuZGFyZE1hdGVyaWFsLCBNZXNoQnVpbGRlciwgSGVtaXNwaGVyaWNMaWdodCwgU3BvdExpZ2h0LCBQb2ludExpZ2h0IH0gPSByZXF1aXJlICdiYWJ5bG9uanMnXG5cbmdlbmVyYXRlID0gcmVxdWlyZSAnLi9wb2x5L2dlbmVyYXRlJ1xuUG9seSAgICAgPSByZXF1aXJlICcuL3BvbHkvcG9seW9sZCdcblZlY3QgICAgID0gcmVxdWlyZSAnLi92ZWN0J1xuQ2FtZXJhICAgPSByZXF1aXJlICcuL2NhbWVyYSdcblNjZW5lICAgID0gcmVxdWlyZSAnLi9zY2VuZSdcbmFuaW1hdGUgID0gcmVxdWlyZSAnLi9hbmltYXRlJ1xuXG7PlSA9IChNYXRoLnNxcnQoNSktMSkvMlxuXG5jbGFzcyBXb3JsZFxuICAgIFxuICAgIEA6IChAdmlldykgLT5cbiAgICAgICAgXG4gICAgICAgIEBwYXVzZWQgPSBmYWxzZVxuICAgICAgICBAdmlldy5mb2N1cygpXG4gICAgICAgIFxuICAgICAgICBAY2FudmFzID0gZWxlbSAnY2FudmFzJyBjbGFzczonYmFieWxvbicgcGFyZW50OkB2aWV3XG4gICAgICAgIFxuICAgICAgICBAZW5naW5lID0gbmV3IEVuZ2luZSBAY2FudmFzLCB0cnVlXG4gICAgICAgIEBzY2VuZSA9IG5ldyBTY2VuZSBAZW5naW5lIFxuICAgICAgICBAcmVzaXplZCgpXG4gICAgICAgIFxuICAgICAgICBhID0gMC4wNlxuICAgICAgICBAc2NlbmUuY2xlYXJDb2xvciA9IG5ldyBDb2xvcjMgYSwgYSwgYVxuXG4gICAgICAgIEBjYW1lcmEgPSBuZXcgQ2FtZXJhIEBzY2VuZSwgQHZpZXcsIEBjYW52YXNcbiAgICAgICAgXG4gICAgICAgIGhlbWkgPSBuZXcgSGVtaXNwaGVyaWNMaWdodCAnaGVtaScgbmV3IFZlY3QoMCAxIDApLCBAc2NlbmVcbiAgICAgICAgaGVtaS5pbnRlbnNpdHkgPSAwLjVcbiAgICAgICAgXG4gICAgICAgIGxpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQgJ2xpZ2h0JyAobmV3IFZlY3RvcjMoMCAtMSAwKSksIEBzY2VuZVxuICAgICAgICBsaWdodC5wb3NpdGlvbi55ID0gM1xuICAgICAgICAjIGxpZ2h0LmludGVuc2l0eSA9IDAuMVxuICAgICAgICBcbiAgICAgICAgc2hhZG93R2VuZXJhdG9yID0gbmV3IFNoYWRvd0dlbmVyYXRvciA4KjEwMjQsIGxpZ2h0XG4gICAgICAgIHNoYWRvd0dlbmVyYXRvci5iaWFzID0gMC4wMDAyXG4gICAgICAgIHNoYWRvd0dlbmVyYXRvci5kYXJrbmVzcyA9IDAuOFxuICAgICAgICBzaGFkb3dHZW5lcmF0b3IudXNlRXhwb25lbnRpYWxTaGFkb3dNYXAgPSB0cnVlXG4gICAgICAgIHNoYWRvd0dlbmVyYXRvci51c2VQb2lzc29uU2FtcGxpbmcgPSB0cnVlXG4gICAgICAgIHNoYWRvd0dlbmVyYXRvci51c2VQZXJjZW50YWdlQ2xvc2VyRmlsdGVyaW5nID0gdHJ1ZVxuICAgICAgICBzaGFkb3dHZW5lcmF0b3IudXNlQ29udGFjdEhhcmRlbmluZ1NoYWRvdyA9IHRydWVcbiAgICAgICAgXG4gICAgICAgIGdyb3VuZCA9IE1lc2hCdWlsZGVyLkNyZWF0ZUdyb3VuZCAnZ3JvdW5kJyB7d2lkdGg6MTAwMCBoZWlnaHQ6MTAwMCBzdWJkaXZpc2lvbnM6IDR9LCBAc2NlbmVcbiAgICAgICAgZ3JvdW5kLm1hdGVyaWFsID0gbmV3IFN0YW5kYXJkTWF0ZXJpYWwgJ21hdCcgQHNjZW5lXG4gICAgICAgIGdyb3VuZC5tYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gbmV3IENvbG9yMyAwLjA1IDAuMDUgMC4wNVxuICAgICAgICBhID0gMC4wNVxuICAgICAgICBncm91bmQubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gbmV3IENvbG9yMyBhLCBhLCBhXG4gICAgICAgIGdyb3VuZC5yZWNlaXZlU2hhZG93cyA9IHRydWVcbiAgICAgICAgZ3JvdW5kLnBvc2l0aW9uLnkgPSAtNFxuICAgICAgICAgICAgIFxuICAgICAgICBAY3Vyc29yID0gTWVzaEJ1aWxkZXIuQ3JlYXRlSWNvU3BoZXJlICdjdXJzb3InIGZsYXQ6ZmFsc2UgcmFkaXVzOjAuOTksIEBzY2VuZVxuICAgICAgICBAY3Vyc29yLm1hdGVyaWFsID0gbmV3IFN0YW5kYXJkTWF0ZXJpYWwgJ21hdCcgQHNjZW5lXG4gICAgICAgIEBjdXJzb3IubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gbmV3IENvbG9yMyAwLjA1IDAuMDUgMC4wNVxuICAgICAgICBAY3Vyc29yLm1hdGVyaWFsLmFscGhhID0gMC4yNVxuICAgICAgICBAY3Vyc29yLnBvc2l0aW9uID0gQGNhbWVyYS5wb3NpdGlvblxuICAgICAgICBcbiAgICAgICAgQGVuZ2luZS5ydW5SZW5kZXJMb29wIEBhbmltYXRlXG4gICAgICAgIGlmIHByZWZzLmdldCAnaW5zcGVjdG9yJ1xuICAgICAgICAgICAgQHRvZ2dsZUluc3BlY3RvcigpXG4gICAgICAgICAgICAgXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVyZG93bicgQG9uTW91c2VEb3duXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVydXAnICAgQG9uTW91c2VVcFxuICAgICAgICAgICAgXG4gICAgICAgIGlmIDBcbiAgICAgICAgICAgIG5hbWVzID0gW1xuICAgICAgICAgICAgICAgICd0ZXRyYWhlZHJvbidcbiAgICAgICAgICAgICAgICAnY3ViZSdcbiAgICAgICAgICAgICAgICAnb2N0YWhlZHJvbidcbiAgICAgICAgICAgICAgICAnZG9kZWNhaGVkcm9uJ1xuICAgICAgICAgICAgICAgICdpY29zYWhlZHJvbidcbiAgICAgICAgICAgICAgICAnY3Vib2N0YWhlZHJvbidcbiAgICAgICAgICAgICAgICAnaWNvc2lkb2RlY2FoZWRyb24nXG4gICAgICAgICAgICAgICAgJ3RydW5jYXRlZGljb3NpZG9kZWNhaGVkcm9uJyBcbiAgICAgICAgICAgICAgICAncmhvbWJpY29zaWRvZGVjYWhlZHJvbicgXG4gICAgICAgICAgICAgICAgJ3Job21iaWN1Ym9jYWhlZHJvbicgXG4gICAgICAgICAgICAgICAgJ3NudWJpY29zaWRvZGVjYWhlZHJvbicgXG4gICAgICAgICAgICAgICAgJ3NudWJjdWJvY3RhaGVkcm9uJ1xuICAgICAgICAgICAgXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgbSxqIGluIG5hbWVzXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yIGkgaW4gWzAuLjEwXVxuICAgICAgICAgICAgICAgICAgICB0cnVuY2F0ZWQgPSBQb2x5LnRydW5jYXRlIFBvbHlbbV0oKSwgaSowLjFcbiAgICAgICAgICAgICAgICAgICAgcCA9IE1lc2guQ3JlYXRlUG9seWhlZHJvbiBtLCB7Y3VzdG9tOnRydW5jYXRlZH0sIEBzY2VuZVxuICAgICAgICAgICAgICAgICAgICBwLnJlY2VpdmVTaGFkb3dzID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBwLmNvbnZlcnRUb0ZsYXRTaGFkZWRNZXNoKClcbiAgICAgICAgICAgICAgICAgICAgcC5wb3NpdGlvbi54ID0gMypqXG4gICAgICAgICAgICAgICAgICAgIHAucG9zaXRpb24ueiA9IDMqaVxuICAgICAgICAgICAgICAgICAgICBwLnBvc2l0aW9uLnkgPSAtMlxuICAgICAgICAgICAgICAgICAgICBzaGFkb3dHZW5lcmF0b3IuYWRkU2hhZG93Q2FzdGVyIHBcbiAgICAgICAgICAgICAgICAgICAgcC5tYXRlcmlhbCA9IG5ldyBTdGFuZGFyZE1hdGVyaWFsICdtYXQnIEBzY2VuZVxuICAgICAgICAgICAgICAgICAgICBwLm1hdGVyaWFsLmFscGhhID0gMSAjIDAuOFxuICAgICAgICAgICAgICAgICAgICBwLm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IG5ldyBDb2xvcjMgaS8xMiAoai82KSUxIDEtai8xMlxuICBcbiAgICAgICAgcm93cyA9IFtcbiAgICAgICAgICAgICMgWydjQyddIFxuICAgICAgICAgICAgIyBbJ2NDJ10gXG4gICAgICAgICAgICAjIFsnYzBUJydjMC4yNVQnJ2NUJydjMC43NVQnJ2MxVCddXG4gICAgICAgICAgICBbJ2MwQycnYzAuMjVDJydjQycnYzAuNTdDJydjMC41OEMnJ2MwLjU5QycnYzFDJ11cbiAgICAgICAgICAgICMgWydjME8nJ2MwLjI1TycnY08nJ2MwLjc1TycnYzFPJ11cbiAgICAgICAgICAgICMgWydjMEQnJ2MwLjI1RCcnY0QnJ2MwLjc1RCcnYzFEJ11cbiAgICAgICAgICAgICMgWydjMEknJ2MwLjI1SScnY0knJ2MwLjc1SScnYzFJJ11cbiAgICAgICAgICAgICMgWydUJydDJydPJydEJydJJ11cbiAgICAgICAgICAgICMgWydjVCcnY0MnJ2NPJydjRCcnY0knXVxuICAgICAgICAgICAgIyBbJ3o2enRUJyd6Nnp0TycnenRJJ11cbiAgICAgICAgICAgICMgWyd2MTB6NmNUJyd2Y0MnJ3ZjTycndmNEJyd2Y0knXVxuICAgICAgICAgICAgIyBbJ2RUJydkQycnZE8nJ2REJydkSSddXG4gICAgICAgICAgICAjIFsnYVQnJ2FDJydhTycnYUQnJ2FJJ11cbiAgICAgICAgICAgICMgWydrVCcna0MnJ2tPJydrRCcna0knXVxuICAgICAgICAgICAgIyBbJ3ZnVCcndmdDJyd2Z08nJ3ZnRCcndmdJJ11cbiAgICAgICAgICAgICMgWydyVCcnckMnJ3JPJydyRCcnckknXVxuICAgICAgICAgICAgIyBbJ3Z3VCcndndDJyd2d08nJ3Z3RCcndndJJ11cbiAgICAgICAgICAgICMgWyduVCcnbkMnJ25PJyduRCcnbkknXVxuICAgICAgICAgICAgIyBbJ3hUJyd4QycneE8nJ3hEJyd4SSddXG4gICAgICAgICAgICAjIFsncFQnJ3BDJydwTycncEQnJ3BJJ11cbiAgICAgICAgICAgICMgWydxVCcncUMnJ3FPJydxRCcncUknXVxuICAgICAgICAgICAgIyBbJ2hUJydoQycnaE8nJ2hEJydoSSddXG4gICAgICAgICAgICAjIFsndVQnJ3VDJyd1TycndUQnJ3VJJ11cbiAgICAgICAgICAgICMgWydlVCcnZUMnJ2VPJydlRCcnZUknXVxuIyAgICAgICAgICAgICBcbiAgICAgICAgICAgICMgWyd2alQnJ3ZqQycndmpPJyd2akQnJ3ZqSSddXG4gICAgICAgICAgICAjIFsnc1QnJ3NDJydzTycnc0QnJ3NJJ11cbiAgICAgICAgICAgICMgWydkemRrKDAsLTAuNSlkVCcnZHpkaygwLC0wLjMpZFQnJ2R6ZGsoMCwwKWRUJydkemRrKDAsMC44KWRUJydkemRrKDAsMS4yKWRUJ11cbiAgICAgICAgICAgICMgWydkaygzLDAuMSl6dFQnJ2RrKDMsLTAuMyl6dFQnJ2RrKDMsLTAuNCl6dFQnJ2RrKDMsLTAuNDUpenRUJydkaygzLC0wLjUpenRUJ11cbiAgICAgICAgICAgICMgWyd4KDAsMSlUJyd4KDAsMilDJyd4KDAsMylPJyd4KDAsNClEJyd4KDAsNSlJJ11cbiAgICAgICAgICAgICMgWyd4KDMsMSwwKW4oMCwwLjUsMClUJyduKDAsMC41LC0wLjMpQycnbigwLDAuMjUsLTAuMSlPJyduKDAsMC44LC0wLjIpRCcnbkknXVxuICAgICAgICAgICAgIyBbJ2R6dFQnJ2R6dEMnJ2R6dE8nJ2R6dEQnJ2R6dEknXVxuICAgICAgICAgICAgIyBbJ2RrKDMsMC4xKXp0VCcndDNkenRDJyd0NGR6dE8nJ3QzZHp0RCcndDVkenRJJyd0NmR6dEknXVxuICAgICAgICAgICAgIyBbJ2tUJyd2akMnJ2tPJydrQycnb0MnJ21DJyd2Z0MnJ3ZqRCcna0knJ2tEJydvRCcnbUQnJ3ZnRCddXG5cbiAgICAgICAgICAgICMgWydZMycnWTQnJ1k1JydZNicnWTcnJ1k4JydZOScnWTEwJydZMTEnJ1kxMiddXG4gICAgICAgICAgICAjIFsnUDMnJ1A0JydQNScnUDYnJ1A3JydQOCcnUDknJ1AxMCcnUDExJydQMTInXVxuICAgICAgICAgICAgIyBbJ0EzJydBNCcnQTUnJ0E2JydBNycnQTgnJ0E5JydBMTAnJ0ExMScnQTEyJ11cbiAgICAgICAgICAgICMgWydVMycnVTQnJ1U1JydVNicnVTcnJ1U4JydVOScnVTEwJydVMTEnJ1UxMiddXG4gICAgICAgICAgICAjIFsnVjMnJ1Y0JydWNScnVjYnJ1Y3JydWOCcnVjknJ1YxMCcnVjExJydWMTInXVxuICAgICAgICAgICAgIyBbJ2hZMycnaFk0JydoWTUnJ2hZNicnaFk3JydoWTgnJ2hZOScnaFkxMCcnaFkxMScnaFkxMicnaFkxMycnaFkxNCddXG4gICAgICAgICAgICBdXG4gICAgICAgIFxuICAgICAgICByaSA9IDBcbiAgICAgICAgZm9yIHJvdyBpbiByb3dzXG4gICAgICAgICAgICBjaSA9IDBcbiAgICAgICAgICAgIHJpKytcbiAgICAgICAgICAgIGZvciBjb2RlIGluIHJvd1xuICAgICAgICAgICAgICAgIGNpKytcbiAgICAgICAgICAgICAgICAjIGZvciBkLHkgaW4gWycnICdjJyAnY2MnXVxuICAgICAgICAgICAgICAgIGZvciBkLHkgaW4gWycnXVxuICAgICAgICAgICAgICAgICAgICBwb2x5ID0gZ2VuZXJhdGUgZCtjb2RlLCBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBwID0gTWVzaC5DcmVhdGVQb2x5aGVkcm9uIGQrY29kZSwge2N1c3RvbTpwb2x5fSwgQHNjZW5lXG4gICAgICAgICAgICAgICAgICAgICMgQHNjZW5lLnNob3dOb3JtYWxzIHBcbiAgICAgICAgICAgICAgICAgICAgQHNjZW5lLnNob3dGYWNlcyBwLCBwb2x5XG4gICAgICAgICAgICAgICAgICAgIEBzY2VuZS5sYWJlbCBwXG4gICAgICAgICAgICAgICAgICAgIHAucmVjZWl2ZVNoYWRvd3MgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIHAucG9zaXRpb24ueCA9IDMqY2lcbiAgICAgICAgICAgICAgICAgICAgcC5wb3NpdGlvbi56ID0gMypyaVxuICAgICAgICAgICAgICAgICAgICBwLnBvc2l0aW9uLnkgPSB5KjNcbiAgICAgICAgICAgICAgICAgICAgcC5yb3RhdGUgVmVjdC51bml0WCwgZGVnMnJhZCAtOTBcbiAgICAgICAgICAgICAgICAgICAgIyBwLmNvbnZlcnRUb0ZsYXRTaGFkZWRNZXNoKClcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93R2VuZXJhdG9yLmFkZFNoYWRvd0Nhc3RlciBwXG4gICAgICAgICAgICAgICAgICAgIHAubWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbCAnbWF0JyBAc2NlbmVcbiAgICAgICAgICAgICAgICAgICAgcC5tYXRlcmlhbC5hbHBoYSA9IDFcbiAgICAgICAgICAgICAgICAgICAgZiA9IGNpLzVcbiAgICAgICAgICAgICAgICAgICAgcC5tYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBuZXcgQ29sb3IzIGYqKChyaSYxKT4+MCksIGYqKChyaSYyKT4+MSksIGYqKChyaSY0KT4+MilcbiAgICAgICAgICAgIFxuICAgICMgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgb25Nb3VzZURvd246IChldmVudCkgPT5cbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdwb2ludGVybW92ZScgQG9uTW91c2VNb3ZlXG4gICAgICAgIFxuICAgICAgICByZXN1bHQgPSBAc2NlbmUucGljayBAc2NlbmUucG9pbnRlclgsIEBzY2VuZS5wb2ludGVyWVxuICAgICAgICBpZiBldmVudC5idXR0b25zICYgMiBhbmQgcmVzdWx0LnBpY2tlZE1lc2gubmFtZSAhPSAnZ3JvdW5kJ1xuICAgICAgICAgICAgQG1vdXNlRG93bk1lc2ggPSByZXN1bHQucGlja2VkTWVzaCBcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQG1vdXNlRG93bk1lc2ggPSBudWxsXG4gICAgICAgIEBjYW1lcmEub25Nb3VzZURvd24gZXZlbnRcblxuICAgIG9uTW91c2VNb3ZlOiAoZXZlbnQpID0+XG4gICAgICAgIFxuICAgICAgICBAY2FtZXJhLm9uTW91c2VEcmFnIGV2ZW50XG4gICAgICAgIFxuICAgIG9uTW91c2VVcDogKGV2ZW50KSA9PiAgICAgICAgICAgICAgICBcblxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciAncG9pbnRlcm1vdmUnIEBvbk1vdXNlTW92ZVxuICAgICAgICAgXG4gICAgICAgIHJlc3VsdCA9IEBzY2VuZS5waWNrIEBzY2VuZS5wb2ludGVyWCwgQHNjZW5lLnBvaW50ZXJZXG4gICAgICAgIGlmIG1lc2ggPSByZXN1bHQucGlja2VkTWVzaFxuICAgICAgICAgICAgaWYgbWVzaC5uYW1lICE9ICdncm91bmQnIGFuZCBtZXNoID09IEBtb3VzZURvd25NZXNoXG4gICAgICAgICAgICAgICAgaWYgbWVzaC5uYW1lIGluIFsnZmFjZXMnJ25vcm1hbHMnXVxuICAgICAgICAgICAgICAgICAgICBrbG9nIG1lc2gucGFyZW50Lm5hbWVcbiAgICAgICAgICAgICAgICBAY3Vyc29yLnBvc2l0aW9uID0gbWVzaC5nZXRBYnNvbHV0ZVBvc2l0aW9uKClcbiAgICAgICAgICAgICAgICBAY2FtZXJhLmZhZGVUb1BvcyBtZXNoLmdldEFic29sdXRlUG9zaXRpb24oKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGlmIG5vdCBAbW91c2VEb3duTWVzaFxuICAgICAgICAgICAgICAgICAgICBAY3Vyc29yLnBvc2l0aW9uID0gQGNhbWVyYS5wb3NpdGlvblxuICAgICAgICAgICAgICAgIFxuICAgICAgICBAY2FtZXJhLm9uTW91c2VVcCBldmVudFxuICAgICAgICAgICAgICAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgIFxuICAgICMgMDAwICAwMDAgIDAwMDAgICAgICAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMCAgICAgICAgMDAwMDAwMDAgICAwMDAwMDAwICAgICAwMDAgICAgICAwMDAwMDAwICAgMDAwICAgMDAwICBcbiAgICBcbiAgICB0b2dnbGVJbnNwZWN0b3I6IC0+XG4gICAgICAgIFxuICAgICAgICBpZiBAc2NlbmUuZGVidWdMYXllci5pc1Zpc2libGUoKVxuICAgICAgICAgICAgQHNjZW5lLmRlYnVnTGF5ZXIuaGlkZSgpXG4gICAgICAgICAgICBwcmVmcy5zZXQgJ2luc3BlY3RvcicgZmFsc2VcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNjZW5lLmRlYnVnTGF5ZXIuc2hvdyBvdmVybGF5OnRydWUgc2hvd0luc3BlY3Rvcjp0cnVlXG4gICAgICAgICAgICBwcmVmcy5zZXQgJ2luc3BlY3RvcicgdHJ1ZVxuICAgICAgICBcbiAgICBzdGFydDogLT4gQHZpZXcuZm9jdXMoKVxuXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAwMCAgICAgMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMCAwIDAwMCAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgICAgMDAwICAgICAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMCAgXG4gICAgXG4gICAgYW5pbWF0ZTogPT5cblxuICAgICAgICBpZiBub3QgQHBhdXNlZFxuICAgICAgICAgICAgQHNjZW5lLnJlbmRlcigpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFuaW1hdGUudGljayBAZW5naW5lLmdldERlbHRhVGltZSgpLzEwMDBcbiAgICBcbiAgICAjIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgMDAwICAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICBcbiAgICByZXNpemVkOiA9PiBcblxuICAgICAgICBAY2FudmFzLndpZHRoID0gQHZpZXcuY2xpZW50V2lkdGhcbiAgICAgICAgQGNhbnZhcy5oZWlnaHQgPSBAdmlldy5jbGllbnRIZWlnaHRcbiAgICAgICAgQGVuZ2luZS5yZXNpemUoKVxuICAgICAgICAjIEBzY2VuZS5yZXNpemUoKVxuICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgMDAwICAgXG4gICAgIyAwMDAwMDAwICAgIDAwMDAwMDAgICAgIDAwMDAwICAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgICAgICAgICAgMDAwICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAgIDAwMCAgICAgXG4gICAgXG4gICAgbW9kS2V5Q29tYm9FdmVudERvd246IChtb2QsIGtleSwgY29tYm8sIGV2ZW50KSAtPlxuICAgICAgICBcbiAgICAgICAgIyBrbG9nICdtb2RLZXlDb21ib0V2ZW50RG93bicgbW9kLCBrZXksIGNvbWJvLCBldmVudC53aGljaFxuICAgICAgICBzd2l0Y2gga2V5XG4gICAgICAgICAgICB3aGVuICdlJyB0aGVuIEBjYW1lcmEubW92ZVVwKClcbiAgICAgICAgICAgIHdoZW4gJ3EnIHRoZW4gQGNhbWVyYS5tb3ZlRG93bigpXG4gICAgICAgICAgICB3aGVuICdhJyB0aGVuIEBjYW1lcmEubW92ZUxlZnQoKVxuICAgICAgICAgICAgd2hlbiAnZCcgdGhlbiBAY2FtZXJhLm1vdmVSaWdodCgpXG4gICAgICAgICAgICB3aGVuICd3JyB0aGVuIEBjYW1lcmEubW92ZUZvcndhcmQoKVxuICAgICAgICAgICAgd2hlbiAncycgdGhlbiBAY2FtZXJhLm1vdmVCYWNrd2FyZCgpXG4gICAgICAgICAgICB3aGVuICd4JyAnZXNjJyB0aGVuIEBjYW1lcmEuc3RvcE1vdmluZygpXG4gICAgICAgIFxuICAgIG1vZEtleUNvbWJvRXZlbnRVcDogKG1vZCwga2V5LCBjb21ibywgZXZlbnQpIC0+XG5cbiAgICAgICAgc3dpdGNoIGtleVxuICAgICAgICAgICAgd2hlbiAnZScgdGhlbiBAY2FtZXJhLnN0b3BVcCgpXG4gICAgICAgICAgICB3aGVuICdxJyB0aGVuIEBjYW1lcmEuc3RvcERvd24oKVxuICAgICAgICAgICAgd2hlbiAnYScgdGhlbiBAY2FtZXJhLnN0b3BMZWZ0KClcbiAgICAgICAgICAgIHdoZW4gJ2QnIHRoZW4gQGNhbWVyYS5zdG9wUmlnaHQoKVxuICAgICAgICAgICAgd2hlbiAndycgdGhlbiBAY2FtZXJhLnN0b3BGb3J3YXJkKClcbiAgICAgICAgICAgIHdoZW4gJ3MnIHRoZW4gQGNhbWVyYS5zdG9wQmFja3dhcmQoKVxuICAgICAgICBcbiAgICAgICAgIyBrbG9nICdtb2RLZXlDb21ib0V2ZW50VXAnIG1vZCwga2V5LCBjb21ibywgZXZlbnQuY29kZVxuICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gV29ybGRcbiJdfQ==
//# sourceURL=../coffee/world.coffee