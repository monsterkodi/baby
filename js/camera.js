// koffee 1.6.0

/*
 0000000   0000000   00     00  00000000  00000000    0000000 
000       000   000  000   000  000       000   000  000   000
000       000000000  000000000  0000000   0000000    000000000
000       000   000  000 0 000  000       000   000  000   000
 0000000  000   000  000   000  00000000  000   000  000   000
 */
var ArcRotateCamera, Camera, FlyCamera, FramingBehavior, Quat, UniversalCamera, Vect, clamp, klog, quat, reduce, ref, ref1, vec,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

ref = require('kxk'), reduce = ref.reduce, clamp = ref.clamp, klog = ref.klog;

ref1 = require('babylonjs'), UniversalCamera = ref1.UniversalCamera, ArcRotateCamera = ref1.ArcRotateCamera, FlyCamera = ref1.FlyCamera, FramingBehavior = ref1.FramingBehavior;

Vect = require('./vect');

Quat = require('./quat');

vec = function(x, y, z) {
    return new Vect(x, y, z);
};

quat = function(x, y, z, w) {
    return new Quat(x, y, z, w);
};

Camera = (function(superClass) {
    extend(Camera, superClass);

    function Camera(scene, view, canvas) {
        var height, width;
        this.scene = scene;
        this.setDistFactor = bind(this.setDistFactor, this);
        this.inertZoom = bind(this.inertZoom, this);
        this.onMouseWheel = bind(this.onMouseWheel, this);
        this.moveCenter = bind(this.moveCenter, this);
        this.fadeCenter = bind(this.fadeCenter, this);
        this.pivotCenter = bind(this.pivotCenter, this);
        this.onMouseDrag = bind(this.onMouseDrag, this);
        this.onDblClick = bind(this.onDblClick, this);
        this.onMouseUp = bind(this.onMouseUp, this);
        this.onMouseDown = bind(this.onMouseDown, this);
        this.del = bind(this.del, this);
        width = view.clientWidth;
        height = view.clientHeight;
        this.size = vec(width, height);
        this.elem = view;
        this.dist = 10;
        this.maxDist = this.far / 4;
        this.minDist = 0.9;
        this.center = vec(0, 0, 0);
        this.degree = 60;
        this.rotate = 0;
        this.wheelInert = 0;
        this.pivotX = 0;
        this.pivotY = 0;
        this.moveX = 0;
        this.moveY = 0;
        this.quat = quat();
        this.elem.addEventListener('mousewheel', this.onMouseWheel);
        this.elem.addEventListener('mousedown', this.onMouseDown);
        this.elem.addEventListener('dblclick', this.onDblClick);
        Camera.__super__.constructor.call(this, 'Camera', vec(0, 0, -10), this.scene);
        this.attachControl(canvas, false);
        this.inertia = 0.8;
        this.keysLeft = this.keysLeft.concat([64]);
        klog('keysLeft', this.keysLeft);
    }

    Camera.prototype.getPosition = function() {
        return vec(this.getFrontPosition(0));
    };

    Camera.prototype.getDir = function() {
        return quat(this.rotationQuaternion).rotate(Vect.minusZ);
    };

    Camera.prototype.getUp = function() {
        return quat(this.rotationQuaternion).rotate(Vect.unitY);
    };

    Camera.prototype.getRight = function() {
        return quat(this.rotationQuaternion).rotate(Vect.unitX);
    };

    Camera.prototype.del = function() {
        this.elem.removeEventListener('mousewheel', this.onMouseWheel);
        this.elem.removeEventListener('mousedown', this.onMouseDown);
        this.elem.removeEventListener('dblclick', this.onDblClick);
        window.removeEventListener('mouseup', this.onMouseUp);
        return window.removeEventListener('mousemove', this.onMouseDrag);
    };

    Camera.prototype.onMouseDown = function(event) {
        this.downButtons = event.buttons;
        this.mouseMoved = false;
        this.mouseX = event.clientX;
        this.mouseY = event.clientY;
        this.downPos = vec(this.mouseX, this.mouseY);
        window.addEventListener('mousemove', this.onMouseDrag);
        return window.addEventListener('mouseup', this.onMouseUp);
    };

    Camera.prototype.onMouseUp = function(event) {
        window.removeEventListener('mousemove', this.onMouseDrag);
        return window.removeEventListener('mouseup', this.onMouseUp);
    };

    Camera.prototype.onDblClick = function(event) {};

    Camera.prototype.onMouseDrag = function(event) {
        var s, x, y;
        x = event.clientX - this.mouseX;
        y = event.clientY - this.mouseY;
        this.mouseX = event.clientX;
        this.mouseY = event.clientY;
        if (this.downPos.dist(vec(this.mouseX, this.mouseY)) > 60) {
            this.mouseMoved = true;
        }
        if (event.buttons & 4) {
            s = this.dist;
            this.pan(x * 2 * s / this.size.x, y * s / this.size.y);
        }
        if (event.buttons & 2) {
            return this.pivot(4000 * x / this.size.x, 2000 * y / this.size.y);
        }
    };

    Camera.prototype.pivot = function(x, y) {
        this.rotate += -0.1 * x;
        this.degree += -0.1 * y;
        return this.update();
    };

    Camera.prototype.startPivotLeft = function() {
        this.pivotX = 20;
        return this.startPivot();
    };

    Camera.prototype.startPivotRight = function() {
        this.pivotX = -20;
        return this.startPivot();
    };

    Camera.prototype.startPivotUp = function() {
        this.pivotY = -10;
        return this.startPivot();
    };

    Camera.prototype.startPivotDown = function() {
        this.pivotY = 10;
        return this.startPivot();
    };

    Camera.prototype.stopPivot = function() {
        this.pivoting = false;
        this.pivotX = 0;
        return this.pivotY = 0;
    };

    Camera.prototype.startPivot = function() {
        if (!this.pivoting) {
            return this.pivoting = true;
        }
    };

    Camera.prototype.pivotCenter = function(deltaSeconds) {
        if (!this.pivoting) {
            return;
        }
        return this.pivot(this.pivotX, this.pivotY);
    };

    Camera.prototype.pan = function(x, y) {
        var ref2, right, up;
        right = vec(-x, 0, 0);
        right.applyQuaternion(this.rotationQuaternion);
        up = vec(0, y, 0);
        up.applyQuaternion(this.rotationQuaternion);
        this.center.add(right.add(up));
        if ((ref2 = this.centerTarget) != null) {
            ref2.copy(this.center);
        }
        return this.update();
    };

    Camera.prototype.focusOnPos = function(v) {
        this.centerTarget = vec(v);
        this.center = vec(v);
        return this.update();
    };

    Camera.prototype.fadeToPos = function(v) {
        this.centerTarget = vec(v);
        return this.startFadeCenter();
    };

    Camera.prototype.startFadeCenter = function() {
        if (!this.fading) {
            return this.fading = true;
        }
    };

    Camera.prototype.fadeCenter = function(deltaSeconds) {
        if (!this.fading) {
            return;
        }
        this.center.fade(this.centerTarget, deltaSeconds);
        this.update();
        if (this.center.dist(this.centerTarget) > 0.00001) {
            return true;
        } else {
            return delete this.fading;
        }
    };

    Camera.prototype.moveFactor = function() {
        return this.dist / 2;
    };

    Camera.prototype.startMoveLeft = function() {
        this.moveX = -this.moveFactor();
        return this.startMove();
    };

    Camera.prototype.startMoveRight = function() {
        this.moveX = this.moveFactor();
        return this.startMove();
    };

    Camera.prototype.startMoveUp = function() {
        this.moveY = this.moveFactor();
        return this.startMove();
    };

    Camera.prototype.startMoveDown = function() {
        this.moveY = -this.moveFactor();
        return this.startMove();
    };

    Camera.prototype.stopMoving = function() {
        this.moving = false;
        this.moveX = 0;
        return this.moveY = 0;
    };

    Camera.prototype.startMove = function() {
        this.fading = false;
        if (!this.moving) {
            rts.animate(this.moveCenter);
            return this.moving = true;
        }
    };

    Camera.prototype.moveCenter = function(deltaSeconds) {
        var dir;
        if (!this.moving) {
            return;
        }
        dir = vec();
        dir.add(Vect.unitX.mul(this.moveX));
        dir.add(Vect.unitY.mul(this.moveY));
        dir.scale(deltaSeconds);
        dir.applyQuaternion(this.rotationQuaternion);
        this.center.add(dir);
        this.update();
        return rts.animate(this.moveCenter);
    };

    Camera.prototype.onMouseWheel = function(event) {
        klog('wheel', event.wheelDelta);
        if (this.wheelInert > 0 && event.wheelDelta < 0) {
            this.wheelInert = 0;
            return;
        }
        if (this.wheelInert < 0 && event.wheelDelta > 0) {
            this.wheelInert = 0;
            return;
        }
        this.wheelInert += event.wheelDelta * (1 + (this.dist / this.maxDist) * 3) * 0.0001;
        return this.startZoom();
    };

    Camera.prototype.startZoomIn = function() {
        this.wheelInert = (1 + (this.dist / this.maxDist) * 3) * 10;
        return this.startZoom();
    };

    Camera.prototype.startZoomOut = function() {
        this.wheelInert = -(1 + (this.dist / this.maxDist) * 3) * 10;
        return this.startZoom();
    };

    Camera.prototype.startZoom = function() {
        if (!this.zooming) {
            return this.zooming = true;
        }
    };

    Camera.prototype.stopZoom = function() {
        this.wheelInert = 0;
        return this.zooming = false;
    };

    Camera.prototype.inertZoom = function(deltaSeconds) {
        this.setDistFactor(1 - clamp(-0.02, 0.02, this.wheelInert));
        this.wheelInert = reduce(this.wheelInert, deltaSeconds * 0.3);
        if (Math.abs(this.wheelInert) > 0.00000001) {
            return true;
        } else {
            delete this.zooming;
            return this.wheelInert = 0;
        }
    };

    Camera.prototype.setDistFactor = function(factor) {
        this.dist = clamp(this.minDist, this.maxDist, this.dist * factor);
        return this.update();
    };

    Camera.prototype.setFov = function(fov) {
        return this.fov = Math.max(2.0, Math.min(fov, 175.0));
    };

    return Camera;

})(UniversalCamera);

module.exports = Camera;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FtZXJhLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQSwySEFBQTtJQUFBOzs7O0FBUUEsTUFBMEIsT0FBQSxDQUFRLEtBQVIsQ0FBMUIsRUFBRSxtQkFBRixFQUFVLGlCQUFWLEVBQWlCOztBQUNqQixPQUFtRSxPQUFBLENBQVEsV0FBUixDQUFuRSxFQUFFLHNDQUFGLEVBQW1CLHNDQUFuQixFQUFvQywwQkFBcEMsRUFBK0M7O0FBRS9DLElBQUEsR0FBTyxPQUFBLENBQVEsUUFBUjs7QUFDUCxJQUFBLEdBQU8sT0FBQSxDQUFRLFFBQVI7O0FBRVAsR0FBQSxHQUFNLFNBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMO1dBQVcsSUFBSSxJQUFKLENBQVMsQ0FBVCxFQUFZLENBQVosRUFBZSxDQUFmO0FBQVg7O0FBQ04sSUFBQSxHQUFPLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEVBQVUsQ0FBVjtXQUFnQixJQUFJLElBQUosQ0FBUyxDQUFULEVBQVksQ0FBWixFQUFlLENBQWYsRUFBa0IsQ0FBbEI7QUFBaEI7O0FBRUQ7OztJQUVDLGdCQUFDLEtBQUQsRUFBUyxJQUFULEVBQWUsTUFBZjtBQUVDLFlBQUE7UUFGQSxJQUFDLENBQUEsUUFBRDs7Ozs7Ozs7Ozs7O1FBRUEsS0FBQSxHQUFTLElBQUksQ0FBQztRQUNkLE1BQUEsR0FBUyxJQUFJLENBQUM7UUFFZCxJQUFDLENBQUEsSUFBRCxHQUFjLEdBQUEsQ0FBSSxLQUFKLEVBQVcsTUFBWDtRQUNkLElBQUMsQ0FBQSxJQUFELEdBQWM7UUFDZCxJQUFDLENBQUEsSUFBRCxHQUFjO1FBQ2QsSUFBQyxDQUFBLE9BQUQsR0FBYyxJQUFDLENBQUEsR0FBRCxHQUFLO1FBQ25CLElBQUMsQ0FBQSxPQUFELEdBQWM7UUFDZCxJQUFDLENBQUEsTUFBRCxHQUFjLEdBQUEsQ0FBSSxDQUFKLEVBQU0sQ0FBTixFQUFR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MCAgMDAwMDAwMDAgIDAwMDAwMDAwICAgIDAwMDAwMDAgXG4wMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAwICAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMDBcbjAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4gMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyMjXG5cbnsgcmVkdWNlLCBjbGFtcCwga2xvZyB9ID0gcmVxdWlyZSAna3hrJ1xueyBVbml2ZXJzYWxDYW1lcmEsIEFyY1JvdGF0ZUNhbWVyYSwgRmx5Q2FtZXJhLCBGcmFtaW5nQmVoYXZpb3IgfSA9IHJlcXVpcmUgJ2JhYnlsb25qcydcblxuVmVjdCA9IHJlcXVpcmUgJy4vdmVjdCdcblF1YXQgPSByZXF1aXJlICcuL3F1YXQnXG5cbnZlYyA9ICh4LHkseikgLT4gbmV3IFZlY3QgeCwgeSwgelxucXVhdCA9ICh4LCB5LCB6LCB3KSAtPiBuZXcgUXVhdCB4LCB5LCB6LCB3XG5cbmNsYXNzIENhbWVyYSBleHRlbmRzIFVuaXZlcnNhbENhbWVyYVxuXG4gICAgQDogKEBzY2VuZSwgdmlldywgY2FudmFzKSAtPlxuICAgICAgICBcbiAgICAgICAgd2lkdGggID0gdmlldy5jbGllbnRXaWR0aFxuICAgICAgICBoZWlnaHQgPSB2aWV3LmNsaWVudEhlaWdodFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBAc2l6ZSAgICAgICA9IHZlYyB3aWR0aCwgaGVpZ2h0XG4gICAgICAgIEBlbGVtICAgICAgID0gdmlld1xuICAgICAgICBAZGlzdCAgICAgICA9IDEwXG4gICAgICAgIEBtYXhEaXN0ICAgID0gQGZhci80XG4gICAgICAgIEBtaW5EaXN0ICAgID0gMC45XG4gICAgICAgIEBjZW50ZXIgICAgID0gdmVjIDAgMCAwXG4gICAgICAgIEBkZWdyZWUgICAgID0gNjBcbiAgICAgICAgQHJvdGF0ZSAgICAgPSAwXG4gICAgICAgIEB3aGVlbEluZXJ0ID0gMFxuICAgICAgICBAcGl2b3RYICAgICA9IDBcbiAgICAgICAgQHBpdm90WSAgICAgPSAwXG4gICAgICAgIEBtb3ZlWCAgICAgID0gMFxuICAgICAgICBAbW92ZVkgICAgICA9IDBcbiAgICAgICAgQHF1YXQgICAgICAgPSBxdWF0KClcblxuICAgICAgICBAZWxlbS5hZGRFdmVudExpc3RlbmVyICdtb3VzZXdoZWVsJyBAb25Nb3VzZVdoZWVsXG4gICAgICAgIEBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgJ21vdXNlZG93bicgIEBvbk1vdXNlRG93blxuICAgICAgICAjIEBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgJ2tleXByZXNzJyAgIEBvbktleVByZXNzXG4gICAgICAgICMgQGVsZW0uYWRkRXZlbnRMaXN0ZW5lciAna2V5cmVsZWFzZScgQG9uS2V5UmVsZWFzZVxuICAgICAgICBAZWxlbS5hZGRFdmVudExpc3RlbmVyICdkYmxjbGljaycgICBAb25EYmxDbGlja1xuICAgICAgICBcbiAgICAgICAgc3VwZXIgJ0NhbWVyYScgdmVjKDAgMCAtMTApLCBAc2NlbmVcbiAgICAgICAgIyBzdXBlciAnQ2FtZXJhJyAwIDAgMCBWZWN0Llplcm8oKSwgQHNjZW5lXG4gICAgICAgIFxuICAgICAgICBAYXR0YWNoQ29udHJvbCBjYW52YXMsIGZhbHNlXG4gICAgICAgICMgQHdoZWVsRGVsdGFQZXJjZW50YWdlID0gMC4wMlxuICAgICAgICBAaW5lcnRpYSA9IDAuOFxuICAgICAgICAjIEBzcGVlZCA9IDFcbiAgICAgICAgXG4gICAgICAgICMgQGxvd2VyUmFkaXVzTGltaXQgPSAyXG4gICAgICAgICMgQHVwcGVyUmFkaXVzTGltaXQgPSAxMDBcbiAgICAgICAgIyBAc2V0UG9zaXRpb24gdmVjIDAgMCAtNDBcbiAgICAgICAgIyBAdXNlRnJhbWluZ0JlaGF2aW9yID0gdHJ1ZVxuICAgICAgICAjIEZyYW1pbmdCZWhhdmlvci5tb2RlID0gRnJhbWluZ0JlaGF2aW9yLkZpdEZydXN0dW1TaWRlc01vZGVcbiAgICAgICAgIyBGcmFtaW5nQmVoYXZpb3IucmFkaXVzU2NhbGUgPSA0XG4gICAgICAgIFxuICAgICAgICBAa2V5c0xlZnQgPSBAa2V5c0xlZnQuY29uY2F0IFs2NF1cbiAgICAgICAga2xvZyAna2V5c0xlZnQnIEBrZXlzTGVmdFxuICAgICAgICBcbiAgICAgICAgIyBAdXBkYXRlKClcblxuICAgIGdldFBvc2l0aW9uOiAtPiB2ZWMgQGdldEZyb250UG9zaXRpb24gMFxuICAgIGdldERpcjogICAgICAtPiBxdWF0KEByb3RhdGlvblF1YXRlcm5pb24pLnJvdGF0ZSBWZWN0Lm1pbnVzWlxuICAgIGdldFVwOiAgICAgICAtPiBxdWF0KEByb3RhdGlvblF1YXRlcm5pb24pLnJvdGF0ZSBWZWN0LnVuaXRZXG4gICAgZ2V0UmlnaHQ6ICAgIC0+IHF1YXQoQHJvdGF0aW9uUXVhdGVybmlvbikucm90YXRlIFZlY3QudW5pdFhcblxuICAgIGRlbDogPT5cbiAgICAgICAgXG4gICAgICAgICMgQGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAgJ2tleXByZXNzJyAgIEBvbktleVByZXNzXG4gICAgICAgICMgQGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAgJ2tleXJlbGVhc2UnIEBvbktleVJlbGVhc2VcbiAgICAgICAgQGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAgJ21vdXNld2hlZWwnIEBvbk1vdXNlV2hlZWxcbiAgICAgICAgQGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAgJ21vdXNlZG93bicgIEBvbk1vdXNlRG93blxuICAgICAgICBAZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICAnZGJsY2xpY2snICAgQG9uRGJsQ2xpY2tcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgJ21vdXNldXAnICAgIEBvbk1vdXNlVXBcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgJ21vdXNlbW92ZScgIEBvbk1vdXNlRHJhZyBcbiAgICAgICAgXG4gICAgIyAwMCAgICAgMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICBcbiAgICBcbiAgICBvbk1vdXNlRG93bjogKGV2ZW50KSA9PiBcbiAgICAgICAgXG4gICAgICAgIEBkb3duQnV0dG9ucyA9IGV2ZW50LmJ1dHRvbnNcbiAgICAgICAgQG1vdXNlTW92ZWQgID0gZmFsc2VcbiAgICAgICAgICAgIFxuICAgICAgICBAbW91c2VYID0gZXZlbnQuY2xpZW50WFxuICAgICAgICBAbW91c2VZID0gZXZlbnQuY2xpZW50WVxuICAgICAgICBcbiAgICAgICAgQGRvd25Qb3MgPSB2ZWMgQG1vdXNlWCwgQG1vdXNlWVxuICAgICAgICBcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJ21vdXNlbW92ZScgQG9uTW91c2VEcmFnXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICdtb3VzZXVwJyAgIEBvbk1vdXNlVXBcbiAgICAgICAgXG4gICAgb25Nb3VzZVVwOiAoZXZlbnQpID0+IFxuXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyICdtb3VzZW1vdmUnIEBvbk1vdXNlRHJhZ1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciAnbW91c2V1cCcgICBAb25Nb3VzZVVwXG4gICAgICAgIFxuICAgIG9uRGJsQ2xpY2s6IChldmVudCkgPT5cbiAgICAgICAgXG4gICAgb25Nb3VzZURyYWc6IChldmVudCkgPT5cblxuICAgICAgICB4ID0gZXZlbnQuY2xpZW50WC1AbW91c2VYXG4gICAgICAgIHkgPSBldmVudC5jbGllbnRZLUBtb3VzZVlcbiAgICAgICAgXG4gICAgICAgIEBtb3VzZVggPSBldmVudC5jbGllbnRYXG4gICAgICAgIEBtb3VzZVkgPSBldmVudC5jbGllbnRZXG4gICAgICAgIFxuICAgICAgICBpZiBAZG93blBvcy5kaXN0KHZlYyBAbW91c2VYLCBAbW91c2VZKSA+IDYwXG4gICAgICAgICAgICBAbW91c2VNb3ZlZCA9IHRydWVcbiAgICAgICAgXG4gICAgICAgIGlmIGV2ZW50LmJ1dHRvbnMgJiA0XG4gICAgICAgICAgICBzID0gQGRpc3RcbiAgICAgICAgICAgIEBwYW4geCoyKnMvQHNpemUueCwgeSpzL0BzaXplLnlcbiAgICAgICAgICAgIFxuICAgICAgICBpZiBldmVudC5idXR0b25zICYgMlxuICAgICAgICAgICAgQHBpdm90IDQwMDAqeC9Ac2l6ZS54LCAyMDAwKnkvQHNpemUueVxuICAgICAgICAgICAgXG4gICAgIyAwMDAwMDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAwMDAwMCAgIDAwMCAgIDAwMCAwMDAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAgICAgIDAwMCAgICAgIDAgICAgICAgMDAwMDAwMCAgICAgIDAwMCAgICAgXG4gICAgXG4gICAgcGl2b3Q6ICh4LHkpIC0+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIEByb3RhdGUgKz0gLTAuMSp4XG4gICAgICAgIEBkZWdyZWUgKz0gLTAuMSp5XG4gICAgICAgIFxuICAgICAgICBAdXBkYXRlKClcbiAgICAgICAgICAgXG4gICAgc3RhcnRQaXZvdExlZnQ6IC0+XG4gICAgICAgIFxuICAgICAgICBAcGl2b3RYID0gMjBcbiAgICAgICAgQHN0YXJ0UGl2b3QoKVxuICAgICAgICBcbiAgICBzdGFydFBpdm90UmlnaHQ6IC0+XG4gICAgICAgIFxuICAgICAgICBAcGl2b3RYID0gLTIwXG4gICAgICAgIEBzdGFydFBpdm90KClcblxuICAgIHN0YXJ0UGl2b3RVcDogLT5cbiAgICAgICAgXG4gICAgICAgIEBwaXZvdFkgPSAtMTBcbiAgICAgICAgQHN0YXJ0UGl2b3QoKVxuICAgICAgICBcbiAgICBzdGFydFBpdm90RG93bjogLT5cbiAgICAgICAgXG4gICAgICAgIEBwaXZvdFkgPSAxMFxuICAgICAgICBAc3RhcnRQaXZvdCgpXG4gICAgICAgIFxuICAgIHN0b3BQaXZvdDogLT5cbiAgICAgICAgXG4gICAgICAgIEBwaXZvdGluZyA9IGZhbHNlXG4gICAgICAgIEBwaXZvdFggPSAwXG4gICAgICAgIEBwaXZvdFkgPSAwXG4gICAgICAgXG4gICAgc3RhcnRQaXZvdDogLT4gXG4gICAgICAgIFxuICAgICAgICBpZiBub3QgQHBpdm90aW5nXG4gICAgICAgICAgICAjIHJ0cy5hbmltYXRlIEBwaXZvdENlbnRlclxuICAgICAgICAgICAgQHBpdm90aW5nID0gdHJ1ZVxuICAgICAgICAgICAgXG4gICAgcGl2b3RDZW50ZXI6IChkZWx0YVNlY29uZHMpID0+XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gaWYgbm90IEBwaXZvdGluZ1xuXG4gICAgICAgIEBwaXZvdCBAcGl2b3RYLCBAcGl2b3RZXG4gICAgICAgIFxuICAgICAgICAjIHJ0cy5hbmltYXRlIEBwaXZvdENlbnRlclxuICAgICAgICBcbiAgICAjIDAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgXG4gICAgIyAwMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwIDAgMDAwICBcbiAgICAjIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgIFxuICAgICMgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgcGFuOiAoeCx5KSAtPlxuICAgICAgICBcbiAgICAgICAgcmlnaHQgPSB2ZWMgLXgsIDAsIDAgXG4gICAgICAgIHJpZ2h0LmFwcGx5UXVhdGVybmlvbiBAcm90YXRpb25RdWF0ZXJuaW9uXG5cbiAgICAgICAgdXAgPSB2ZWMgMCwgeSwgMCBcbiAgICAgICAgdXAuYXBwbHlRdWF0ZXJuaW9uIEByb3RhdGlvblF1YXRlcm5pb25cbiAgICAgICAgXG4gICAgICAgIEBjZW50ZXIuYWRkIHJpZ2h0LmFkZCB1cFxuICAgICAgICBAY2VudGVyVGFyZ2V0Py5jb3B5IEBjZW50ZXJcbiAgICAgICAgQHVwZGF0ZSgpXG4gICAgICAgICAgICBcbiAgICAjIDAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgICAgMDAwICBcbiAgICAjIDAwMCAgICAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICBcbiAgICAgICAgICAgICAgICAgICAgIFxuICAgIGZvY3VzT25Qb3M6ICh2KSAtPlxuICAgICAgICBcbiAgICAgICAgQGNlbnRlclRhcmdldCA9IHZlYyB2XG4gICAgICAgIEBjZW50ZXIgPSB2ZWMgdlxuICAgICAgICBAdXBkYXRlKClcbiAgICAgICAgIFxuICAgIGZhZGVUb1BvczogKHYpIC0+IFxuICAgICAgICBcbiAgICAgICAgQGNlbnRlclRhcmdldCA9IHZlYyB2XG4gICAgICAgIEBzdGFydEZhZGVDZW50ZXIoKVxuXG4gICAgc3RhcnRGYWRlQ2VudGVyOiAtPiBcbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBAZmFkaW5nXG4gICAgICAgICAgICAjIHJ0cy5hbmltYXRlIEBmYWRlQ2VudGVyXG4gICAgICAgICAgICBAZmFkaW5nID0gdHJ1ZVxuICAgICAgICAgICAgXG4gICAgZmFkZUNlbnRlcjogKGRlbHRhU2Vjb25kcykgPT5cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpZiBub3QgQGZhZGluZ1xuICAgICAgICBcbiAgICAgICAgQGNlbnRlci5mYWRlIEBjZW50ZXJUYXJnZXQsIGRlbHRhU2Vjb25kc1xuICAgICAgICBAdXBkYXRlKClcbiAgICAgICAgXG4gICAgICAgIGlmIEBjZW50ZXIuZGlzdChAY2VudGVyVGFyZ2V0KSA+IDAuMDAwMDFcbiAgICAgICAgICAgICMgcnRzLmFuaW1hdGUgQGZhZGVDZW50ZXJcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZGVsZXRlIEBmYWRpbmdcblxuICAgICMgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAgMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAgMDAwMDAwMCAgICAgICAwICAgICAgMDAwMDAwMDAgIFxuICAgIFxuICAgIG1vdmVGYWN0b3I6IC0+IEBkaXN0LzJcbiAgICBcbiAgICBzdGFydE1vdmVMZWZ0OiAtPlxuICAgICAgICBcbiAgICAgICAgQG1vdmVYID0gLUBtb3ZlRmFjdG9yKClcbiAgICAgICAgQHN0YXJ0TW92ZSgpXG4gICAgICAgIFxuICAgIHN0YXJ0TW92ZVJpZ2h0OiAtPlxuICAgICAgICBcbiAgICAgICAgQG1vdmVYID0gQG1vdmVGYWN0b3IoKVxuICAgICAgICBAc3RhcnRNb3ZlKClcblxuICAgIHN0YXJ0TW92ZVVwOiAtPlxuICAgICAgICBcbiAgICAgICAgQG1vdmVZID0gQG1vdmVGYWN0b3IoKVxuICAgICAgICBAc3RhcnRNb3ZlKClcbiAgICAgICAgXG4gICAgc3RhcnRNb3ZlRG93bjogLT5cbiAgICAgICAgXG4gICAgICAgIEBtb3ZlWSA9IC1AbW92ZUZhY3RvcigpXG4gICAgICAgIEBzdGFydE1vdmUoKVxuICAgICAgICBcbiAgICBzdG9wTW92aW5nOiAtPlxuICAgICAgICBcbiAgICAgICAgQG1vdmluZyA9IGZhbHNlXG4gICAgICAgIEBtb3ZlWCA9IDBcbiAgICAgICAgQG1vdmVZID0gMFxuICAgICAgIFxuICAgIHN0YXJ0TW92ZTogLT4gXG4gICAgICAgIFxuICAgICAgICBAZmFkaW5nID0gZmFsc2VcbiAgICAgICAgaWYgbm90IEBtb3ZpbmdcbiAgICAgICAgICAgIHJ0cy5hbmltYXRlIEBtb3ZlQ2VudGVyXG4gICAgICAgICAgICBAbW92aW5nID0gdHJ1ZVxuICAgICAgICAgICAgXG4gICAgbW92ZUNlbnRlcjogKGRlbHRhU2Vjb25kcykgPT5cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpZiBub3QgQG1vdmluZ1xuICAgICAgICBcbiAgICAgICAgZGlyID0gdmVjKClcbiAgICAgICAgZGlyLmFkZCBWZWN0LnVuaXRYLm11bCBAbW92ZVhcbiAgICAgICAgZGlyLmFkZCBWZWN0LnVuaXRZLm11bCBAbW92ZVlcbiAgICAgICAgZGlyLnNjYWxlIGRlbHRhU2Vjb25kc1xuICAgICAgICBkaXIuYXBwbHlRdWF0ZXJuaW9uIEByb3RhdGlvblF1YXRlcm5pb25cbiAgICAgICAgXG4gICAgICAgIEBjZW50ZXIuYWRkIGRpclxuICAgICAgICBAdXBkYXRlKClcbiAgICAgICAgXG4gICAgICAgIHJ0cy5hbmltYXRlIEBtb3ZlQ2VudGVyXG4gICAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgICAgXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICBcbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAgXG4gICAgIyAwMCAgICAgMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICBcbiAgICBcbiAgICBvbk1vdXNlV2hlZWw6IChldmVudCkgPT4gXG4gICAgXG4gICAgICAgIGtsb2cgJ3doZWVsJyBldmVudC53aGVlbERlbHRhXG4gICAgICAgIGlmIEB3aGVlbEluZXJ0ID4gMCBhbmQgZXZlbnQud2hlZWxEZWx0YSA8IDBcbiAgICAgICAgICAgIEB3aGVlbEluZXJ0ID0gMFxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgaWYgQHdoZWVsSW5lcnQgPCAwIGFuZCBldmVudC53aGVlbERlbHRhID4gMFxuICAgICAgICAgICAgQHdoZWVsSW5lcnQgPSAwXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIFxuICAgICAgICBAd2hlZWxJbmVydCArPSBldmVudC53aGVlbERlbHRhICogKDErKEBkaXN0L0BtYXhEaXN0KSozKSAqIDAuMDAwMVxuICAgICAgICBcbiAgICAgICAgQHN0YXJ0Wm9vbSgpXG5cbiAgICAjIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMCAgICAgMDAgIFxuICAgICMgICAgMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAgIDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICBcbiAgICAjICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIFxuICAgICMgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG5cbiAgICBzdGFydFpvb21JbjogLT5cbiAgICAgICAgXG4gICAgICAgIEB3aGVlbEluZXJ0ID0gKDErKEBkaXN0L0BtYXhEaXN0KSozKSoxMFxuICAgICAgICBAc3RhcnRab29tKClcbiAgICAgICAgXG4gICAgc3RhcnRab29tT3V0OiAtPlxuICAgICAgICBcbiAgICAgICAgQHdoZWVsSW5lcnQgPSAtKDErKEBkaXN0L0BtYXhEaXN0KSozKSoxMFxuICAgICAgICBAc3RhcnRab29tKClcbiAgICBcbiAgICBzdGFydFpvb206IC0+IFxuICAgICAgICBcbiAgICAgICAgaWYgbm90IEB6b29taW5nXG4gICAgICAgICAgICAjIHJ0cy5hbmltYXRlIEBpbmVydFpvb21cbiAgICAgICAgICAgIEB6b29taW5nID0gdHJ1ZVxuICAgICAgICAgICAgXG4gICAgc3RvcFpvb206IC0+IFxuICAgICAgICBcbiAgICAgICAgQHdoZWVsSW5lcnQgPSAwXG4gICAgICAgIEB6b29taW5nID0gZmFsc2VcbiAgICBcbiAgICBpbmVydFpvb206IChkZWx0YVNlY29uZHMpID0+XG5cbiAgICAgICAgQHNldERpc3RGYWN0b3IgMSAtIGNsYW1wIC0wLjAyIDAuMDIgQHdoZWVsSW5lcnRcbiAgICAgICAgQHdoZWVsSW5lcnQgPSByZWR1Y2UgQHdoZWVsSW5lcnQsIGRlbHRhU2Vjb25kcyowLjNcbiAgICAgICAgXG4gICAgICAgIGlmIE1hdGguYWJzKEB3aGVlbEluZXJ0KSA+IDAuMDAwMDAwMDFcbiAgICAgICAgICAgICMgcnRzLmFuaW1hdGUgQGluZXJ0Wm9vbVxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgQHpvb21pbmdcbiAgICAgICAgICAgIEB3aGVlbEluZXJ0ID0gMFxuICAgIFxuICAgIHNldERpc3RGYWN0b3I6IChmYWN0b3IpID0+XG4gICAgICAgIFxuICAgICAgICBAZGlzdCA9IGNsYW1wIEBtaW5EaXN0LCBAbWF4RGlzdCwgQGRpc3QqZmFjdG9yXG4gICAgICAgIEB1cGRhdGUoKVxuICAgICAgICBcbiAgICBzZXRGb3Y6IChmb3YpIC0+IEBmb3YgPSBNYXRoLm1heCgyLjAgTWF0aC5taW4gZm92LCAxNzUuMClcbiAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgICAgICAgMDAwMDAwMCAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwMDAwMDAgIFxuICAgIFxuICAgICMgdXBkYXRlOiAtPiBcbiMgICAgICAgICBcbiAgICAgICAgIyBAZGVncmVlID0gY2xhbXAgMCAxODAgQGRlZ3JlZVxuICAgICAgICBcbiAgICAgICAgIyBAcXVhdC5yZXNldCgpXG4gICAgICAgICMgQHF1YXQucm90YXRlQXhpc0FuZ2xlIFZlY3QudW5pdFosIEByb3RhdGVcbiAgICAgICAgIyBAcXVhdC5yb3RhdGVBeGlzQW5nbGUgVmVjdC51bml0WCwgQGRlZ3JlZVxuICAgICAgICBcbiAgICAgICAgIyBAcG9zaXRpb24uY29weSBAY2VudGVyLnBsdXMgdmVjKDAgMCBAZGlzdCkuYXBwbHlRdWF0ZXJuaW9uIEBxdWF0XG4gICAgICAgICMgQHJvdGF0aW9uUXVhdGVybmlvbi5jb3B5IEBxdWF0XG4gICAgICAgIFxuICAgICAgICAjIGxvZyBcImNhbWVyYTpcIiwgQGRpc3QsIEByb3RhdGUsIEBkZWdyZWVcblxubW9kdWxlLmV4cG9ydHMgPSBDYW1lcmFcbiJdfQ==
//# sourceURL=../coffee/camera.coffee